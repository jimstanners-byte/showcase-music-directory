{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/assets/showcase-logo.svg.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 500, height: 105, blurWidth: 0, blurHeight: 0};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,yJAAG;IAAE,OAAO;IAAK,QAAQ;IAAK,WAAW;IAAG,YAAY;AAAC","debugId":null}},
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS;IAAG,IAAA,IAAA,OAAA,UAAA,QAAA,AAAG,SAAH,UAAA,OAAA,OAAA,GAAA,OAAA,MAAA;QAAG,OAAH,QAAA,SAAA,CAAA,KAAuB;;IACxC,OAAO,IAAA,6LAAO,EAAC,IAAA,oKAAI,EAAC;AACtB","debugId":null}},
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-semibold ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"gradient-action text-primary-foreground hover:opacity-90 hover:shadow-glow-pink\",\n        destructive: \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline: \"border border-primary/50 bg-transparent text-primary hover:bg-primary/10 hover:border-primary\",\n        secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent/10 hover:text-primary\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n        gradient: \"gradient-brand text-primary-foreground hover:opacity-90 hover:shadow-glow-pink\",\n        \"gradient-outline\": \"border border-transparent bg-card text-foreground gradient-border hover:shadow-glow-pink\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean;\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\";\n    return <Comp className={cn(buttonVariants({ variant, size, className }))} ref={ref} {...props} />;\n  },\n);\nButton.displayName = \"Button\";\n\nexport { Button, buttonVariants };"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,8LAAG,EACxB,wWACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aAAa;YACb,SAAS;YACT,WAAW;YACX,OAAO;YACP,MAAM;YACN,UAAU;YACV,oBAAoB;QACtB;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,+LAAgB,MAC7B,QAA0D;QAAzD,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO;IACtD,MAAM,OAAO,UAAU,+LAAI,GAAG;IAC9B,qBAAO,iNAAC;QAAK,WAAW,IAAA,gJAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QAAK,KAAK;QAAM,GAAG,KAAK;;;;;;AAC/F;;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/ui/sheet.tsx"],"sourcesContent":["import * as SheetPrimitive from \"@radix-ui/react-dialog\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\nimport { X } from \"lucide-react\";\nimport * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Sheet = SheetPrimitive.Root;\n\nconst SheetTrigger = SheetPrimitive.Trigger;\n\nconst SheetClose = SheetPrimitive.Close;\n\nconst SheetPortal = SheetPrimitive.Portal;\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className,\n    )}\n    {...props}\n    ref={ref}\n  />\n));\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName;\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  },\n);\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<React.ElementRef<typeof SheetPrimitive.Content>, SheetContentProps>(\n  ({ side = \"right\", className, children, ...props }, ref) => (\n    <SheetPortal>\n      <SheetOverlay />\n      <SheetPrimitive.Content ref={ref} className={cn(sheetVariants({ side }), className)} {...props}>\n        {children}\n        <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none\">\n          <X className=\"h-4 w-4\" />\n          <span className=\"sr-only\">Close</span>\n        </SheetPrimitive.Close>\n      </SheetPrimitive.Content>\n    </SheetPortal>\n  ),\n);\nSheetContent.displayName = SheetPrimitive.Content.displayName;\n\nconst SheetHeader = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (\n  <div className={cn(\"flex flex-col space-y-2 text-center sm:text-left\", className)} {...props} />\n);\nSheetHeader.displayName = \"SheetHeader\";\n\nconst SheetFooter = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (\n  <div className={cn(\"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\", className)} {...props} />\n);\nSheetFooter.displayName = \"SheetFooter\";\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title ref={ref} className={cn(\"text-lg font-semibold text-foreground\", className)} {...props} />\n));\nSheetTitle.displayName = SheetPrimitive.Title.displayName;\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description ref={ref} className={cn(\"text-sm text-muted-foreground\", className)} {...props} />\n));\nSheetDescription.displayName = SheetPrimitive.Description.displayName;\n\nexport {\n  Sheet,\n  SheetClose,\n  SheetContent,\n  SheetDescription,\n  SheetFooter,\n  SheetHeader,\n  SheetOverlay,\n  SheetPortal,\n  SheetTitle,\n  SheetTrigger,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;;;;;;;AAEA,MAAM,QAAQ,iMAAmB;AAEjC,MAAM,eAAe,oMAAsB;AAE3C,MAAM,aAAa,kMAAoB;AAEvC,MAAM,cAAc,mMAAqB;AAEzC,MAAM,6BAAe,+LAAgB,CAGnC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,iNAAC,oMAAsB;QACrB,WAAW,IAAA,gJAAE,EACX,0JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;;KAVH;AAaN,aAAa,WAAW,GAAG,oMAAsB,CAAC,WAAW;AAE7D,MAAM,gBAAgB,IAAA,8LAAG,EACvB,oMACA;IACE,UAAU;QACR,MAAM;YACJ,KAAK;YACL,QACE;YACF,MAAM;YACN,OACE;QACJ;IACF;IACA,iBAAiB;QACf,MAAM;IACR;AACF;AAOF,MAAM,6BAAe,+LAAgB,OACnC,QAAoD;QAAnD,EAAE,OAAO,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO;yBAChD,iNAAC;;0BACC,iNAAC;;;;;0BACD,iNAAC,oMAAsB;gBAAC,KAAK;gBAAK,WAAW,IAAA,gJAAE,EAAC,cAAc;oBAAE;gBAAK,IAAI;gBAAa,GAAG,KAAK;;oBAC3F;kCACD,iNAAC,kMAAoB;wBAAC,WAAU;;0CAC9B,iNAAC,wNAAC;gCAAC,WAAU;;;;;;0CACb,iNAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;;;AAMpC,aAAa,WAAW,GAAG,oMAAsB,CAAC,WAAW;AAE7D,MAAM,cAAc;QAAC,EAAE,SAAS,EAAE,GAAG,OAA6C;yBAChF,iNAAC;QAAI,WAAW,IAAA,gJAAE,EAAC,oDAAoD;QAAa,GAAG,KAAK;;;;;;;MADxF;AAGN,YAAY,WAAW,GAAG;AAE1B,MAAM,cAAc;QAAC,EAAE,SAAS,EAAE,GAAG,OAA6C;yBAChF,iNAAC;QAAI,WAAW,IAAA,gJAAE,EAAC,iEAAiE;QAAa,GAAG,KAAK;;;;;;;MADrG;AAGN,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,+LAAgB,OAGjC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,iNAAC,kMAAoB;QAAC,KAAK;QAAK,WAAW,IAAA,gJAAE,EAAC,yCAAyC;QAAa,GAAG,KAAK;;;;;;;;AAE9G,WAAW,WAAW,GAAG,kMAAoB,CAAC,WAAW;AAEzD,MAAM,iCAAmB,+LAAgB,OAGvC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,iNAAC,wMAA0B;QAAC,KAAK;QAAK,WAAW,IAAA,gJAAE,EAAC,iCAAiC;QAAa,GAAG,KAAK;;;;;;;;AAE5G,iBAAiB,WAAW,GAAG,wMAA0B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 311, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/hooks/useFavourites.ts"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\r\n\r\nconst STORAGE_KEY = 'showcase-favourites';\r\nconst FAVOURITES_UPDATED_EVENT = 'favourites-updated';\r\n\r\n// Helper to read current favourites from localStorage\r\nconst getFavouritesFromStorage = (): string[] => {\r\n  try {\r\n    const stored = localStorage.getItem(STORAGE_KEY);\r\n    return stored ? JSON.parse(stored) : [];\r\n  } catch {\r\n    return [];\r\n  }\r\n};\r\n\r\n// Helper to save favourites to localStorage and dispatch event\r\nconst saveFavouritesToStorage = (favourites: string[]) => {\r\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(favourites));\r\n  window.dispatchEvent(new CustomEvent(FAVOURITES_UPDATED_EVENT));\r\n};\r\n\r\n// For components that only need to check one listing (FavouriteButton)\r\nexport function useIsFavourite(listingId: string) {\r\n  const [isFav, setIsFav] = useState(() => \r\n    getFavouritesFromStorage().includes(listingId)\r\n  );\r\n\r\n  useEffect(() => {\r\n    const handleUpdate = () => {\r\n      setIsFav(getFavouritesFromStorage().includes(listingId));\r\n    };\r\n    \r\n    window.addEventListener(FAVOURITES_UPDATED_EVENT, handleUpdate);\r\n    window.addEventListener('storage', handleUpdate);\r\n    \r\n    return () => {\r\n      window.removeEventListener(FAVOURITES_UPDATED_EVENT, handleUpdate);\r\n      window.removeEventListener('storage', handleUpdate);\r\n    };\r\n  }, [listingId]);\r\n\r\n  const toggle = useCallback(() => {\r\n    const currentFavourites = getFavouritesFromStorage();\r\n    let newFavourites: string[];\r\n    \r\n    if (currentFavourites.includes(listingId)) {\r\n      newFavourites = currentFavourites.filter(id => id !== listingId);\r\n    } else {\r\n      newFavourites = [...currentFavourites, listingId];\r\n    }\r\n    \r\n    saveFavouritesToStorage(newFavourites);\r\n  }, [listingId]);\r\n\r\n  return { isFavourite: isFav, toggle };\r\n}\r\n\r\n// For components that need the full list (Favourites page, Header count)\r\nexport function useFavourites() {\r\n  const [favourites, setFavourites] = useState<string[]>(getFavouritesFromStorage);\r\n\r\n  useEffect(() => {\r\n    const handleUpdate = () => {\r\n      setFavourites(getFavouritesFromStorage());\r\n    };\r\n    \r\n    window.addEventListener(FAVOURITES_UPDATED_EVENT, handleUpdate);\r\n    window.addEventListener('storage', handleUpdate);\r\n    \r\n    return () => {\r\n      window.removeEventListener(FAVOURITES_UPDATED_EVENT, handleUpdate);\r\n      window.removeEventListener('storage', handleUpdate);\r\n    };\r\n  }, []);\r\n\r\n  const toggleFavourite = useCallback((listingId: string) => {\r\n    const currentFavourites = getFavouritesFromStorage();\r\n    let newFavourites: string[];\r\n    \r\n    if (currentFavourites.includes(listingId)) {\r\n      newFavourites = currentFavourites.filter(id => id !== listingId);\r\n    } else {\r\n      newFavourites = [...currentFavourites, listingId];\r\n    }\r\n    \r\n    saveFavouritesToStorage(newFavourites);\r\n  }, []);\r\n\r\n  const removeFavourite = useCallback((listingId: string) => {\r\n    const currentFavourites = getFavouritesFromStorage();\r\n    const newFavourites = currentFavourites.filter(id => id !== listingId);\r\n    saveFavouritesToStorage(newFavourites);\r\n  }, []);\r\n\r\n  return {\r\n    favourites,\r\n    toggleFavourite,\r\n    removeFavourite,\r\n    count: favourites.length,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;;;AAEA;;AAFA;;AAIA,MAAM,cAAc;AACpB,MAAM,2BAA2B;AAEjC,sDAAsD;AACtD,MAAM,2BAA2B;IAC/B,IAAI;QACF,MAAM,SAAS,aAAa,OAAO,CAAC;QACpC,OAAO,SAAS,KAAK,KAAK,CAAC,UAAU,EAAE;IACzC,EAAE,UAAM;QACN,OAAO,EAAE;IACX;AACF;AAEA,+DAA+D;AAC/D,MAAM,0BAA0B,CAAC;IAC/B,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;IACjD,OAAO,aAAa,CAAC,IAAI,YAAY;AACvC;AAGO,SAAS,eAAe,SAAiB;;IAC9C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,6LAAQ;mCAAC,IACjC,2BAA2B,QAAQ,CAAC;;IAGtC,IAAA,8LAAS;oCAAC;YACR,MAAM;yDAAe;oBACnB,SAAS,2BAA2B,QAAQ,CAAC;gBAC/C;;YAEA,OAAO,gBAAgB,CAAC,0BAA0B;YAClD,OAAO,gBAAgB,CAAC,WAAW;YAEnC;4CAAO;oBACL,OAAO,mBAAmB,CAAC,0BAA0B;oBACrD,OAAO,mBAAmB,CAAC,WAAW;gBACxC;;QACF;mCAAG;QAAC;KAAU;IAEd,MAAM,SAAS,IAAA,gMAAW;8CAAC;YACzB,MAAM,oBAAoB;YAC1B,IAAI;YAEJ,IAAI,kBAAkB,QAAQ,CAAC,YAAY;gBACzC,gBAAgB,kBAAkB,MAAM;0DAAC,CAAA,KAAM,OAAO;;YACxD,OAAO;gBACL,gBAAgB;uBAAI;oBAAmB;iBAAU;YACnD;YAEA,wBAAwB;QAC1B;6CAAG;QAAC;KAAU;IAEd,OAAO;QAAE,aAAa;QAAO;IAAO;AACtC;GAjCgB;AAoCT,SAAS;;IACd,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,6LAAQ,EAAW;IAEvD,IAAA,8LAAS;mCAAC;YACR,MAAM;wDAAe;oBACnB,cAAc;gBAChB;;YAEA,OAAO,gBAAgB,CAAC,0BAA0B;YAClD,OAAO,gBAAgB,CAAC,WAAW;YAEnC;2CAAO;oBACL,OAAO,mBAAmB,CAAC,0BAA0B;oBACrD,OAAO,mBAAmB,CAAC,WAAW;gBACxC;;QACF;kCAAG,EAAE;IAEL,MAAM,kBAAkB,IAAA,gMAAW;sDAAC,CAAC;YACnC,MAAM,oBAAoB;YAC1B,IAAI;YAEJ,IAAI,kBAAkB,QAAQ,CAAC,YAAY;gBACzC,gBAAgB,kBAAkB,MAAM;kEAAC,CAAA,KAAM,OAAO;;YACxD,OAAO;gBACL,gBAAgB;uBAAI;oBAAmB;iBAAU;YACnD;YAEA,wBAAwB;QAC1B;qDAAG,EAAE;IAEL,MAAM,kBAAkB,IAAA,gMAAW;sDAAC,CAAC;YACnC,MAAM,oBAAoB;YAC1B,MAAM,gBAAgB,kBAAkB,MAAM;4EAAC,CAAA,KAAM,OAAO;;YAC5D,wBAAwB;QAC1B;qDAAG,EAAE;IAEL,OAAO;QACL;QACA;QACA;QACA,OAAO,WAAW,MAAM;IAC1B;AACF;IA1CgB","debugId":null}},
    {"offset": {"line": 447, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/header/MobileMenuButton.tsx"],"sourcesContent":["'use client';\r\n\r\nimport Link from 'next/link';\r\nimport { Menu, Heart } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Sheet, SheetContent, SheetTrigger } from \"@/components/ui/sheet\";\r\nimport { useFavourites } from \"@/hooks/useFavourites\";\r\nimport { useState } from \"react\";\r\n\r\nconst navItems = [\r\n  { label: \"HOME\", to: \"/\" },\r\n  { label: \"CATEGORIES\", to: \"/categories\" },\r\n];\r\n\r\nexport function MobileMenuButton() {\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n  const { count: favouritesCount } = useFavourites();\r\n\r\n  return (\r\n    <Sheet open={mobileMenuOpen} onOpenChange={setMobileMenuOpen}>\r\n      <SheetTrigger asChild className=\"md:hidden\">\r\n        <Button variant=\"ghost\" size=\"icon\">\r\n          <Menu className=\"h-6 w-6\" />\r\n        </Button>\r\n      </SheetTrigger>\r\n      <SheetContent side=\"right\" className=\"w-[280px] bg-card border-border\">\r\n        <nav className=\"flex flex-col gap-4 mt-8\">\r\n          {navItems.map((item) => (\r\n            <Link\r\n              key={item.to}\r\n              href={item.to}\r\n              className=\"text-lg font-medium text-foreground hover:text-primary transition-colors py-2\"\r\n              onClick={() => setMobileMenuOpen(false)}\r\n            >\r\n              {item.label}\r\n            </Link>\r\n          ))}\r\n          <Link\r\n            href=\"/favourites\"\r\n            className=\"text-lg font-medium text-foreground hover:text-primary transition-colors py-2 flex items-center gap-2\"\r\n            onClick={() => setMobileMenuOpen(false)}\r\n          >\r\n            <Heart className=\"h-5 w-5\" />\r\n            FAVOURITES\r\n            {favouritesCount > 0 && (\r\n              <span className=\"bg-primary text-primary-foreground text-xs px-1.5 py-0.5 rounded-full\">\r\n                {favouritesCount}\r\n              </span>\r\n            )}\r\n          </Link>\r\n        </nav>\r\n      </SheetContent>\r\n    </Sheet>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;AASA,MAAM,WAAW;IACf;QAAE,OAAO;QAAQ,IAAI;IAAI;IACzB;QAAE,OAAO;QAAc,IAAI;IAAc;CAC1C;AAEM,SAAS;;IACd,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,6LAAQ,EAAC;IACrD,MAAM,EAAE,OAAO,eAAe,EAAE,GAAG,IAAA,qKAAa;IAEhD,qBACE,iNAAC,iKAAK;QAAC,MAAM;QAAgB,cAAc;;0BACzC,iNAAC,wKAAY;gBAAC,OAAO;gBAAC,WAAU;0BAC9B,cAAA,iNAAC,mKAAM;oBAAC,SAAQ;oBAAQ,MAAK;8BAC3B,cAAA,iNAAC,iOAAI;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGpB,iNAAC,wKAAY;gBAAC,MAAK;gBAAQ,WAAU;0BACnC,cAAA,iNAAC;oBAAI,WAAU;;wBACZ,SAAS,GAAG,CAAC,CAAC,qBACb,iNAAC,8LAAI;gCAEH,MAAM,KAAK,EAAE;gCACb,WAAU;gCACV,SAAS,IAAM,kBAAkB;0CAEhC,KAAK,KAAK;+BALN,KAAK,EAAE;;;;;sCAQhB,iNAAC,8LAAI;4BACH,MAAK;4BACL,WAAU;4BACV,SAAS,IAAM,kBAAkB;;8CAEjC,iNAAC,oOAAK;oCAAC,WAAU;;;;;;gCAAY;gCAE5B,kBAAkB,mBACjB,iNAAC;oCAAK,WAAU;8CACb;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQjB;GAxCgB;;QAEqB,qKAAa;;;KAFlC","debugId":null}},
    {"offset": {"line": 585, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/header/TopBar.tsx"],"sourcesContent":["import Link from 'next/link';\r\nimport showcaseLogo from \"@/assets/showcase-logo.svg\";\r\nimport { MobileMenuButton } from './MobileMenuButton';\r\n\r\ninterface Ad {\r\n  id: string;\r\n  name: string;\r\n  image_url: string;\r\n  link_url: string | null;\r\n  alt_text: string | null;\r\n}\r\n\r\ninterface TopBarProps {\r\n  sponsorAd: Ad | null;\r\n}\r\n\r\nexport function TopBar({ sponsorAd }: TopBarProps) {\r\n  return (\r\n    <div className=\"bg-card/50 border-b border-border\">\r\n      <div className=\"container py-4\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <Link href=\"/\">\r\n            <img\r\n              src={showcaseLogo}\r\n              alt=\"Showcase Music - The International Music Business Guide\"\r\n              className=\"h-14 w-auto\"\r\n            />\r\n          </Link>\r\n\r\n          <div className=\"hidden md:flex items-center gap-3\">\r\n            <span className=\"text-xs text-muted-foreground uppercase tracking-wide\">Sponsored By</span>\r\n            {sponsorAd ? (\r\n              <a href={sponsorAd.link_url || \"#\"} target=\"_blank\" rel=\"noopener noreferrer\" className=\"block hover:opacity-80 transition-opacity\">\r\n                <img src={sponsorAd.image_url} alt={sponsorAd.alt_text || sponsorAd.name} className=\"h-14 w-auto max-w-48 object-contain\" />\r\n              </a>\r\n            ) : (\r\n              <div className=\"w-48 h-14 bg-secondary border border-dashed border-border rounded-lg flex items-center justify-center\">\r\n                <span className=\"text-xs text-muted-foreground\">Your Logo Here</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <MobileMenuButton />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAcO,SAAS,OAAO,KAA0B;QAA1B,EAAE,SAAS,EAAe,GAA1B;IACrB,qBACE,iNAAC;QAAI,WAAU;kBACb,cAAA,iNAAC;YAAI,WAAU;sBACb,cAAA,iNAAC;gBAAI,WAAU;;kCACb,iNAAC,8LAAI;wBAAC,MAAK;kCACT,cAAA,iNAAC;4BACC,KAAK,yWAAY;4BACjB,KAAI;4BACJ,WAAU;;;;;;;;;;;kCAId,iNAAC;wBAAI,WAAU;;0CACb,iNAAC;gCAAK,WAAU;0CAAwD;;;;;;4BACvE,0BACC,iNAAC;gCAAE,MAAM,UAAU,QAAQ,IAAI;gCAAK,QAAO;gCAAS,KAAI;gCAAsB,WAAU;0CACtF,cAAA,iNAAC;oCAAI,KAAK,UAAU,SAAS;oCAAE,KAAK,UAAU,QAAQ,IAAI,UAAU,IAAI;oCAAE,WAAU;;;;;;;;;;qDAGtF,iNAAC;gCAAI,WAAU;0CACb,cAAA,iNAAC;oCAAK,WAAU;8CAAgC;;;;;;;;;;;;;;;;;kCAKtD,iNAAC,2LAAgB;;;;;;;;;;;;;;;;;;;;;AAK3B;KA/BgB","debugId":null}},
    {"offset": {"line": 704, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/NavLink.tsx"],"sourcesContent":["'use client';\n\nimport { forwardRef } from \"react\";\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport { cn } from \"@/lib/utils\";\n\ninterface NavLinkProps extends Omit<React.ComponentPropsWithoutRef<typeof Link>, 'href'> {\n  className?: string;\n  activeClassName?: string;\n  href?: string;\n  to?: string; // Legacy React Router prop\n}\n\nconst NavLink = forwardRef<HTMLAnchorElement, NavLinkProps>(\n  ({ className, activeClassName, href, to, ...props }, ref) => {\n    const pathname = usePathname();\n    const linkHref = href || to || '/'; // Use href or to, fallback to '/'\n    const isActive = pathname === linkHref || pathname?.startsWith(linkHref + '/');\n    \n    return (\n      <Link\n        ref={ref}\n        href={linkHref}\n        className={cn(className, isActive && activeClassName)}\n        {...props}\n      />\n    );\n  },\n);\n\nNavLink.displayName = \"NavLink\";\n\nexport { NavLink };"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAcA,MAAM,wBAAU,GAAA,IAAA,+LAAU,UACxB,QAAqD;QAApD,EAAE,SAAS,EAAE,eAAe,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,OAAO;;IACjD,MAAM,WAAW,IAAA,wKAAW;IAC5B,MAAM,WAAW,QAAQ,MAAM,KAAK,kCAAkC;IACtE,MAAM,WAAW,aAAa,aAAY,qBAAA,+BAAA,SAAU,UAAU,CAAC,WAAW;IAE1E,qBACE,iNAAC,8LAAI;QACH,KAAK;QACL,MAAM;QACN,WAAW,IAAA,gJAAE,EAAC,WAAW,YAAY;QACpC,GAAG,KAAK;;;;;;AAGf;;QAZmB,wKAAW;;;;QAAX,wKAAW;;;;AAehC,QAAQ,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 758, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/header/NavBar.tsx"],"sourcesContent":["'use client';\r\n\r\nimport Link from 'next/link';\r\nimport { usePathname } from 'next/navigation';\r\nimport { Heart, ChevronRight } from \"lucide-react\";\r\nimport { NavLink } from \"@/components/NavLink\";\r\nimport { useFavourites } from \"@/hooks/useFavourites\";\r\nimport { ReactNode } from \"react\";\r\n\r\nconst navItems = [\r\n  { label: \"HOME\", to: \"/\" },\r\n  { label: \"CATEGORIES\", to: \"/categories\" },\r\n];\r\n\r\nexport interface BreadcrumbItem {\r\n  label: string;\r\n  to?: string;\r\n}\r\n\r\ninterface NavBarProps {\r\n  breadcrumbs?: BreadcrumbItem[];\r\n  rightContent?: ReactNode;\r\n  customNavContent?: ReactNode;\r\n}\r\n\r\nexport function NavBar({ breadcrumbs, rightContent, customNavContent }: NavBarProps) {\r\n  const { count: favouritesCount } = useFavourites();\r\n\r\n  const showBreadcrumbs = breadcrumbs && breadcrumbs.length > 0;\r\n  const showCustomNav = !!customNavContent;\r\n\r\n  return (\r\n    <nav className=\"hidden md:block bg-secondary/50\">\r\n      <div className=\"container\">\r\n        <div className=\"flex items-center justify-between py-2\">\r\n          <div className=\"flex items-center justify-between w-full\">\r\n            {showCustomNav ? (\r\n              <div className=\"flex items-center gap-1.5 text-xs lg:text-sm min-w-0 overflow-hidden\">\r\n                {customNavContent}\r\n              </div>\r\n            ) : showBreadcrumbs ? (\r\n              <div className=\"flex items-center gap-1 lg:gap-1.5 text-xs lg:text-sm text-muted-foreground min-w-0 overflow-hidden\">\r\n                {breadcrumbs.map((crumb, index) => {\r\n                  const isFirst = index === 0;\r\n                  const isLast = index === breadcrumbs.length - 1;\r\n                  const isSecondLast = index === breadcrumbs.length - 2;\r\n                  const totalItems = breadcrumbs.length;\r\n\r\n                  const isMiddleItem = !isFirst && !isLast && !isSecondLast;\r\n                  const shouldHideOnMobile = isMiddleItem && totalItems > 3;\r\n                  const showEllipsis = isSecondLast && totalItems > 3;\r\n\r\n                  return (\r\n                    <div\r\n                      key={index}\r\n                      className={`flex items-center gap-1 lg:gap-1.5 min-w-0 ${shouldHideOnMobile ? \"hidden lg:flex\" : \"\"}`}\r\n                    >\r\n                      {index > 0 && (\r\n                        <ChevronRight\r\n                          className={`h-3 w-3 lg:h-4 lg:w-4 flex-shrink-0 ${shouldHideOnMobile ? \"hidden lg:block\" : \"\"}`}\r\n                        />\r\n                      )}\r\n                      {showEllipsis && (\r\n                        <span className=\"lg:hidden flex items-center gap-1\">\r\n                          <span>...</span>\r\n                          <ChevronRight className=\"h-3 w-3 flex-shrink-0\" />\r\n                        </span>\r\n                      )}\r\n                      {crumb.to ? (\r\n                        <Link\r\n                          href={crumb.to}\r\n                          className=\"hover:text-primary transition-colors whitespace-nowrap max-w-[120px] lg:max-w-[200px] truncate\"\r\n                        >\r\n                          {crumb.label}\r\n                        </Link>\r\n                      ) : (\r\n                        <span className=\"text-foreground truncate max-w-[150px] lg:max-w-[250px]\">{crumb.label}</span>\r\n                      )}\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            ) : (\r\n              <div className=\"flex items-center\">\r\n                {navItems.map((item, index) => (\r\n                  <div key={item.to} className=\"flex items-center\">\r\n                    <NavLink\r\n                      to={item.to}\r\n                      className=\"text-xs lg:text-sm font-medium text-muted-foreground hover:text-primary transition-colors px-2 lg:px-3 py-1 whitespace-nowrap\"\r\n                      activeClassName=\"text-primary\"\r\n                    >\r\n                      {item.label}\r\n                    </NavLink>\r\n                    {index < navItems.length - 1 && <span className=\"text-border\">|</span>}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n\r\n            {/* Right side: optional content + Favourites */}\r\n            <div className=\"flex items-center gap-2 lg:gap-3\">\r\n              {rightContent}\r\n              <NavLink\r\n                to=\"/favourites\"\r\n                className=\"text-xs lg:text-sm font-medium text-muted-foreground hover:text-primary transition-colors px-2 lg:px-3 py-1 flex items-center gap-1 lg:gap-1.5 whitespace-nowrap\"\r\n                activeClassName=\"text-primary\"\r\n              >\r\n                <Heart className=\"h-4 w-4\" />\r\n                FAVOURITES\r\n                {favouritesCount > 0 && (\r\n                  <span className=\"bg-primary text-primary-foreground text-xs px-1.5 py-0.5 rounded-full\">\r\n                    {favouritesCount}\r\n                  </span>\r\n                )}\r\n              </NavLink>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AAEA;AAAA;AACA;AACA;;;AANA;;;;;AASA,MAAM,WAAW;IACf;QAAE,OAAO;QAAQ,IAAI;IAAI;IACzB;QAAE,OAAO;QAAc,IAAI;IAAc;CAC1C;AAaM,SAAS,OAAO,KAA4D;QAA5D,EAAE,WAAW,EAAE,YAAY,EAAE,gBAAgB,EAAe,GAA5D;;IACrB,MAAM,EAAE,OAAO,eAAe,EAAE,GAAG,IAAA,qKAAa;IAEhD,MAAM,kBAAkB,eAAe,YAAY,MAAM,GAAG;IAC5D,MAAM,gBAAgB,CAAC,CAAC;IAExB,qBACE,iNAAC;QAAI,WAAU;kBACb,cAAA,iNAAC;YAAI,WAAU;sBACb,cAAA,iNAAC;gBAAI,WAAU;0BACb,cAAA,iNAAC;oBAAI,WAAU;;wBACZ,8BACC,iNAAC;4BAAI,WAAU;sCACZ;;;;;mCAED,gCACF,iNAAC;4BAAI,WAAU;sCACZ,YAAY,GAAG,CAAC,CAAC,OAAO;gCACvB,MAAM,UAAU,UAAU;gCAC1B,MAAM,SAAS,UAAU,YAAY,MAAM,GAAG;gCAC9C,MAAM,eAAe,UAAU,YAAY,MAAM,GAAG;gCACpD,MAAM,aAAa,YAAY,MAAM;gCAErC,MAAM,eAAe,CAAC,WAAW,CAAC,UAAU,CAAC;gCAC7C,MAAM,qBAAqB,gBAAgB,aAAa;gCACxD,MAAM,eAAe,gBAAgB,aAAa;gCAElD,qBACE,iNAAC;oCAEC,WAAW,AAAC,8CAAwF,OAA3C,qBAAqB,mBAAmB;;wCAEhG,QAAQ,mBACP,iNAAC,6PAAY;4CACX,WAAW,AAAC,uCAAkF,OAA5C,qBAAqB,oBAAoB;;;;;;wCAG9F,8BACC,iNAAC;4CAAK,WAAU;;8DACd,iNAAC;8DAAK;;;;;;8DACN,iNAAC,6PAAY;oDAAC,WAAU;;;;;;;;;;;;wCAG3B,MAAM,EAAE,iBACP,iNAAC,8LAAI;4CACH,MAAM,MAAM,EAAE;4CACd,WAAU;sDAET,MAAM,KAAK;;;;;iEAGd,iNAAC;4CAAK,WAAU;sDAA2D,MAAM,KAAK;;;;;;;mCAtBnF;;;;;4BA0BX;;;;;iDAGF,iNAAC;4BAAI,WAAU;sCACZ,SAAS,GAAG,CAAC,CAAC,MAAM,sBACnB,iNAAC;oCAAkB,WAAU;;sDAC3B,iNAAC,+JAAO;4CACN,IAAI,KAAK,EAAE;4CACX,WAAU;4CACV,iBAAgB;sDAEf,KAAK,KAAK;;;;;;wCAEZ,QAAQ,SAAS,MAAM,GAAG,mBAAK,iNAAC;4CAAK,WAAU;sDAAc;;;;;;;mCARtD,KAAK,EAAE;;;;;;;;;;sCAevB,iNAAC;4BAAI,WAAU;;gCACZ;8CACD,iNAAC,+JAAO;oCACN,IAAG;oCACH,WAAU;oCACV,iBAAgB;;sDAEhB,iNAAC,oOAAK;4CAAC,WAAU;;;;;;wCAAY;wCAE5B,kBAAkB,mBACjB,iNAAC;4CAAK,WAAU;sDACb;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUrB;GAhGgB;;QACqB,qKAAa;;;KADlC","debugId":null}},
    {"offset": {"line": 985, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/integrations/supabase/client.ts"],"sourcesContent":["// This file is automatically generated. Do not edit it directly.\r\n'use client';\r\nimport { createClient } from \"@supabase/supabase-js\";\r\nimport type { Database } from \"./types\";\r\n\r\nconst SUPABASE_URL = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst SUPABASE_PUBLISHABLE_KEY = process.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY;\r\n\r\n// Import the supabase client like this:\r\n// import { supabase } from \"@/integrations/supabase/client\";\r\n\r\nexport const supabase = createClient<Database>(SUPABASE_URL, SUPABASE_PUBLISHABLE_KEY, {\r\n  auth: {\r\n    storage: typeof window !== 'undefined' ? window.localStorage : undefined,\r\n    persistSession: true,\r\n    autoRefreshToken: true,\r\n    detectSessionInUrl: true,\r\n    flowType: 'pkce',\r\n  },\r\n});\r\n"],"names":[],"mappings":"AAAA,iEAAiE;;;;;AAK5C;AAHrB;AADA;;AAIA,MAAM;AACN,MAAM;AAKC,MAAM,WAAW,IAAA,8MAAY,EAAW,cAAc,0BAA0B;IACrF,MAAM;QACJ,SAAS,uCAAgC,OAAO,YAAY,GAAG;QAC/D,gBAAgB;QAChB,kBAAkB;QAClB,oBAAoB;QACpB,UAAU;IACZ;AACF","debugId":null}},
    {"offset": {"line": 1012, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/hooks/useAds.ts"],"sourcesContent":["'use client';\n\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { supabase } from '@/integrations/supabase/client';\r\n\r\nexport interface Ad {\r\n  id: string;\r\n  name: string;\r\n  position: 'sponsor-logo' | 'featured';\r\n  image_url: string;\r\n  link_url: string | null;\r\n  alt_text: string | null;\r\n  is_active: boolean;\r\n  start_date: string | null;\r\n  end_date: string | null;\r\n  target_category_ids: string[];\r\n  target_countries: string[];\r\n  target_pages: string[];\r\n  rotation_interval: number | null;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport const useAds = () => {\r\n  return useQuery({\r\n    queryKey: ['ads'],\r\n    queryFn: async () => {\r\n      const { data, error } = await supabase\r\n        .from('ads')\r\n        .select('*')\r\n        .order('created_at', { ascending: false });\r\n      \r\n      if (error) throw error;\r\n      return data as Ad[];\r\n    },\r\n  });\r\n};\r\n\r\nexport const useActiveAdsByPosition = (\r\n  position: string, \r\n  categoryId?: string | null, \r\n  country?: string | null\r\n) => {\r\n  return useQuery({\r\n    queryKey: ['active-ads', position, categoryId, country],\r\n    queryFn: async () => {\r\n      const now = new Date().toISOString();\r\n      \r\n      // Build query with targeting priority\r\n      let query = supabase\r\n        .from('ads')\r\n        .select('*')\r\n        .eq('position', position)\r\n        .eq('is_active', true)\r\n        .or(`start_date.is.null,start_date.lte.${now}`)\r\n        .or(`end_date.is.null,end_date.gte.${now}`);\r\n      \r\n      const { data, error } = await query;\r\n      if (error) throw error;\r\n      \r\n      const ads = data as Ad[];\r\n      \r\n      // Helper functions\r\n      const hasTargetCategories = (ad: Ad) => ad.target_category_ids && ad.target_category_ids.length > 0;\r\n      const hasTargetCountries = (ad: Ad) => ad.target_countries && ad.target_countries.length > 0;\r\n      const categoryMatches = (ad: Ad) => categoryId && ad.target_category_ids?.includes(categoryId);\r\n      const countryMatches = (ad: Ad) => country && ad.target_countries?.includes(country);\r\n      \r\n      // Prioritize: exact match > category only > country only > site-wide\r\n      const exactMatch = ads.find(ad => \r\n        categoryMatches(ad) && countryMatches(ad)\r\n      );\r\n      if (exactMatch) return exactMatch;\r\n      \r\n      const categoryMatch = ads.find(ad => \r\n        categoryMatches(ad) && !hasTargetCountries(ad)\r\n      );\r\n      if (categoryMatch) return categoryMatch;\r\n      \r\n      const countryMatch = ads.find(ad => \r\n        !hasTargetCategories(ad) && countryMatches(ad)\r\n      );\r\n      if (countryMatch) return countryMatch;\r\n      \r\n      // Fall back to site-wide ad\r\n      return ads.find(ad => !hasTargetCategories(ad) && !hasTargetCountries(ad));\r\n    },\r\n  });\r\n};\r\n\r\n// New hook for rotating banners - fetches ALL active ads for a position with targeting\r\nexport const useRotatingAds = (\r\n  position: string,\r\n  categoryId?: string | null,\r\n  country?: string | null\r\n) => {\r\n  return useQuery({\r\n    queryKey: ['rotating-ads', position, categoryId, country],\r\n    queryFn: async () => {\r\n      const now = new Date().toISOString();\r\n      \r\n      const { data, error } = await supabase\r\n        .from('ads')\r\n        .select('*')\r\n        .eq('position', position)\r\n        .eq('is_active', true)\r\n        .or(`start_date.is.null,start_date.lte.${now}`)\r\n        .or(`end_date.is.null,end_date.gte.${now}`)\r\n        .order('created_at', { ascending: false });\r\n      \r\n      if (error) throw error;\r\n      \r\n      const ads = data as Ad[];\r\n      \r\n      // Filter ads by targeting with AND logic:\r\n      // - If ad has both categories AND countries: at least one category must match AND country must match\r\n      // - If ad has only categories: at least one category must match (any country)\r\n      // - If ad has only countries: country must match (any category)\r\n      // - If ad has neither: site-wide (always show)\r\n      return ads.filter(ad => {\r\n        const hasCategories = ad.target_category_ids && ad.target_category_ids.length > 0;\r\n        const hasTargetCountries = ad.target_countries && ad.target_countries.length > 0;\r\n        const categoryMatches = categoryId && ad.target_category_ids?.includes(categoryId);\r\n        const countryMatches = country && ad.target_countries?.includes(country);\r\n\r\n        // Site-wide ad (no targeting)\r\n        if (!hasCategories && !hasTargetCountries) return true;\r\n        \r\n        // Both categories and country specified: both must match\r\n        if (hasCategories && hasTargetCountries) {\r\n          return categoryMatches && countryMatches;\r\n        }\r\n        \r\n        // Only categories specified\r\n        if (hasCategories && !hasTargetCountries) {\r\n          return categoryMatches;\r\n        }\r\n        \r\n        // Only countries specified\r\n        if (!hasCategories && hasTargetCountries) {\r\n          return countryMatches;\r\n        }\r\n        \r\n        return false;\r\n      });\r\n    },\r\n  });\r\n};\r\n\r\n// New hook for featured ads with category, page, parent category priority and country filtering\r\nexport const useFeaturedAds = (categoryId?: string, pageId?: string, parentCategoryId?: string, country?: string) => {\r\n  return useQuery({\r\n    queryKey: ['featured-ads', categoryId, pageId, parentCategoryId, country],\r\n    queryFn: async () => {\r\n      const now = new Date().toISOString();\r\n      \r\n      // Fetch all featured ads\r\n      const { data, error } = await supabase\r\n        .from('ads')\r\n        .select('*')\r\n        .eq('position', 'featured')\r\n        .eq('is_active', true)\r\n        .or(`start_date.is.null,start_date.lte.${now}`)\r\n        .or(`end_date.is.null,end_date.gte.${now}`);\r\n      \r\n      if (error) throw error;\r\n      \r\n      const ads = data as Ad[];\r\n      \r\n      // Filter by country if ad has country targeting\r\n      const filterByCountry = (adsToFilter: Ad[]) => {\r\n        return adsToFilter.filter(ad => {\r\n          // If ad has no country targeting, it shows everywhere\r\n          if (!ad.target_countries || ad.target_countries.length === 0) return true;\r\n          // If ad has country targeting, only show if current country matches\r\n          return country && ad.target_countries.includes(country);\r\n        });\r\n      };\r\n      \r\n      // Site-wide ads (no category, no page targeting)\r\n      const siteWideAds = ads.filter(ad => \r\n        (!ad.target_category_ids || ad.target_category_ids.length === 0) &&\r\n        (!ad.target_pages || ad.target_pages.length === 0)\r\n      );\r\n      \r\n      // Page-specific ads\r\n      const pageAds = pageId \r\n        ? ads.filter(ad => ad.target_pages?.includes(pageId))\r\n        : [];\r\n      \r\n      // Exact match ads: category AND country both specified and matching\r\n      const exactMatchAds = categoryId && country\r\n        ? ads.filter(ad => \r\n            ad.target_category_ids?.includes(categoryId) && \r\n            ad.target_countries?.includes(country)\r\n          )\r\n        : [];\r\n      \r\n      // Category-only ads: category matches but NO country targeting\r\n      const categoryOnlyAds = categoryId \r\n        ? ads.filter(ad => \r\n            ad.target_category_ids?.includes(categoryId) &&\r\n            (!ad.target_countries || ad.target_countries.length === 0)\r\n          )\r\n        : [];\r\n      \r\n      // Child category ads (for parent pages) - fetch child category IDs\r\n      let childCategoryAds: Ad[] = [];\r\n      if (parentCategoryId) {\r\n        const { data: childCategories } = await supabase\r\n          .from('categories')\r\n          .select('id')\r\n          .eq('parent_id', parentCategoryId);\r\n        \r\n        const childIds = childCategories?.map(c => c.id) || [];\r\n        childCategoryAds = ads.filter(ad => \r\n          ad.target_category_ids?.some(catId => childIds.includes(catId))\r\n        );\r\n      }\r\n      \r\n      // Apply country filter to page, child, and site-wide ads\r\n      return {\r\n        exactMatchAds,  // Already filtered by category + country\r\n        categoryOnlyAds, // No country targeting, so no filter needed\r\n        pageAds: filterByCountry(pageAds),\r\n        childCategoryAds: filterByCountry(childCategoryAds),\r\n        siteWideAds: filterByCountry(siteWideAds),\r\n      };\r\n    },\r\n  });\r\n};\r\n\r\nexport const useCreateAd = () => {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async (ad: Omit<Ad, 'id' | 'created_at' | 'updated_at'>) => {\r\n      const { data, error } = await supabase\r\n        .from('ads')\r\n        .insert(ad)\r\n        .select()\r\n        .single();\r\n      \r\n      if (error) throw error;\r\n      return data;\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['ads'] });\r\n    },\r\n  });\r\n};\r\n\r\nexport const useUpdateAd = () => {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async ({ id, ...ad }: Partial<Ad> & { id: string }) => {\r\n      const { data, error } = await supabase\r\n        .from('ads')\r\n        .update(ad)\r\n        .eq('id', id)\r\n        .select()\r\n        .single();\r\n      \r\n      if (error) throw error;\r\n      return data;\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['ads'] });\r\n      queryClient.invalidateQueries({ queryKey: ['active-ads'] });\r\n      queryClient.invalidateQueries({ queryKey: ['rotating-ads'] });\r\n      queryClient.invalidateQueries({ queryKey: ['featured-ads'] });\r\n    },\r\n  });\r\n};\r\n\r\nexport const useDeleteAd = () => {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async (id: string) => {\r\n      const { error } = await supabase\r\n        .from('ads')\r\n        .delete()\r\n        .eq('id', id);\r\n      \r\n      if (error) throw error;\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['ads'] });\r\n      queryClient.invalidateQueries({ queryKey: ['active-ads'] });\r\n      queryClient.invalidateQueries({ queryKey: ['rotating-ads'] });\r\n      queryClient.invalidateQueries({ queryKey: ['featured-ads'] });\r\n    },\r\n  });\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1384, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/Header.tsx"],"sourcesContent":["'use client';\n\nimport { TopBar } from './header/TopBar';\nimport { NavBar, BreadcrumbItem } from './header/NavBar';\nimport { useActiveAdsByPosition } from '@/hooks/useAds';\nimport { ReactNode } from 'react';\n\ninterface HeaderProps {\n  breadcrumbs?: BreadcrumbItem[];\n  rightContent?: ReactNode;\n  customNavContent?: ReactNode;\n}\n\nexport function Header({ breadcrumbs, rightContent, customNavContent }: HeaderProps) {\n  const { data: sponsorAd } = useActiveAdsByPosition(\"sponsor-logo\");\n\n  return (\n    <header className=\"sticky top-0 z-50 w-full bg-background/95 backdrop-blur-sm border-b border-border\">\n      <TopBar sponsorAd={sponsorAd || null} />\n      <NavBar breadcrumbs={breadcrumbs} rightContent={rightContent} customNavContent={customNavContent} />\n    </header>\n  );\n}\n\nexport type { BreadcrumbItem };"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAaO,SAAS,OAAO,KAA4D;QAA5D,EAAE,WAAW,EAAE,YAAY,EAAE,gBAAgB,EAAe,GAA5D;;IACrB,MAAM,EAAE,MAAM,SAAS,EAAE,GAAG,IAAA,uKAAsB,EAAC;IAEnD,qBACE,iNAAC;QAAO,WAAU;;0BAChB,iNAAC,uKAAM;gBAAC,WAAW,aAAa;;;;;;0BAChC,iNAAC,uKAAM;gBAAC,aAAa;gBAAa,cAAc;gBAAc,kBAAkB;;;;;;;;;;;;AAGtF;GATgB;;QACc,uKAAsB;;;KADpC","debugId":null}},
    {"offset": {"line": 1443, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/Footer.tsx"],"sourcesContent":["import Link from 'next/link';\n\nconst categories = [\n  { name: \"Live Event Services\", slug: \"/live-event-services\" },\n  { name: \"The Business\", slug: \"/the-business\" },\n  { name: \"Venues\", slug: \"/venues\" },\n  { name: \"Equipment\", slug: \"/equipment\" },\n  { name: \"Studios\", slug: \"/studios\" },\n  { name: \"UK Recording Services\", slug: \"/uk-recording-services\" },\n];\n\nconst quickLinks = [\n  { name: \"Home\", slug: \"/\" },\n  { name: \"Categories\", slug: \"/categories\" },\n  { name: \"About Us\", slug: \"/about\" },\n  { name: \"Promote\", slug: \"/promote\" },\n  { name: \"Get Listed\", slug: \"/get-listed\" },\n  { name: \"Contact\", slug: \"/contact\" },\n];\n\nexport function Footer() {\n  return (\n    <footer className=\"bg-card mt-auto\">\n      {/* Gradient accent line at top */}\n      <div className=\"h-px gradient-brand\" />\n      {/* Main Footer */}\n      <div className=\"container pt-8 pb-5\">\n        {/* Desktop: 3 columns in one row (xl and up) */}\n        <div className=\"hidden xl:grid xl:grid-cols-3 gap-6\">\n          {/* Categories */}\n          <div>\n            <h3 className=\"font-semibold mb-2 text-foreground text-sm\">Categories</h3>\n            <ul className=\"space-y-1 text-xs text-muted-foreground\">\n              {categories.map((category) => (\n                <li key={category.slug}>\n                  <Link href={category.slug} className=\"hover:text-primary transition-colors\">\n                    {category.name}\n                  </Link>\n                </li>\n              ))}\n            </ul>\n          </div>\n\n          {/* Quick Links */}\n          <div>\n            <h3 className=\"font-semibold mb-2 text-foreground text-sm\">Quick Links</h3>\n            <ul className=\"space-y-1 text-xs text-muted-foreground\">\n              {quickLinks.map((link) => (\n                <li key={link.slug}>\n                  <Link href={link.slug} className=\"hover:text-primary transition-colors\">\n                    {link.name}\n                  </Link>\n                </li>\n              ))}\n            </ul>\n          </div>\n\n          {/* Contact */}\n          <div>\n            <h3 className=\"font-semibold mb-2 text-foreground text-sm\">Contact</h3>\n            <ul className=\"space-y-1 text-xs text-muted-foreground\">\n              <li>info@entourage-pro.com</li>\n              <li>United Kingdom</li>\n            </ul>\n          </div>\n        </div>\n\n        {/* Tablet/Mobile: 3 columns (below xl) */}\n        <div className=\"xl:hidden\">\n          <div className=\"grid grid-cols-3 gap-4\">\n            {/* Categories */}\n            <div>\n              <h3 className=\"font-semibold mb-1.5 text-foreground text-xs sm:text-sm\">Categories</h3>\n              <ul className=\"space-y-1 text-xs text-muted-foreground\">\n                {categories.map((category) => (\n                  <li key={category.slug}>\n                    <Link href={category.slug} className=\"hover:text-primary transition-colors\">\n                      {category.name}\n                    </Link>\n                  </li>\n                ))}\n              </ul>\n            </div>\n\n            {/* Quick Links */}\n            <div>\n              <h3 className=\"font-semibold mb-1.5 text-foreground text-xs sm:text-sm\">Quick Links</h3>\n              <ul className=\"space-y-1 text-xs text-muted-foreground\">\n                {quickLinks.map((link) => (\n                  <li key={link.slug}>\n                    <Link href={link.slug} className=\"hover:text-primary transition-colors\">\n                      {link.name}\n                    </Link>\n                  </li>\n                ))}\n              </ul>\n            </div>\n\n            {/* Contact */}\n            <div>\n              <h3 className=\"font-semibold mb-1.5 text-foreground text-xs sm:text-sm\">Contact</h3>\n              <ul className=\"space-y-1 text-xs text-muted-foreground\">\n                <li>info@entourage-pro.com</li>\n                <li>United Kingdom</li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n      {/* Copyright Bar */}\n      <div className=\"border-t border-border bg-background/50\">\n        <div className=\"container py-3\">\n          <p className=\"text-xs text-muted-foreground mb-1\">\n             2025 Showcase Music. All rights reserved.\n          </p>\n          <p className=\"text-[10px] text-muted-foreground/50 max-w-5xl leading-relaxed\">\n            No part of this website may be reproduced in any material form, by any means, whether graphic, electronic, mechanical or other, including information storage and retrieval systems, without the written permission of the publisher and where necessary any relevant other copyright owner. This website in whole or in part may not be used to prepare or compile other directories or mailing lists without written permission from the publisher. Measures have been adopted during preparation of this publication which will assist the publisher to protect its copyright. Any unauthorised use of this data will result in immediate legal proceedings. The greatest care has been taken to ensure accuracy but the publisher can accept no responsibility for errors or omissions nor for any liability occasioned by relying on its content.\n          </p>\n        </div>\n      </div>\n    </footer>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;;AAEA,MAAM,aAAa;IACjB;QAAE,MAAM;QAAuB,MAAM;IAAuB;IAC5D;QAAE,MAAM;QAAgB,MAAM;IAAgB;IAC9C;QAAE,MAAM;QAAU,MAAM;IAAU;IAClC;QAAE,MAAM;QAAa,MAAM;IAAa;IACxC;QAAE,MAAM;QAAW,MAAM;IAAW;IACpC;QAAE,MAAM;QAAyB,MAAM;IAAyB;CACjE;AAED,MAAM,aAAa;IACjB;QAAE,MAAM;QAAQ,MAAM;IAAI;IAC1B;QAAE,MAAM;QAAc,MAAM;IAAc;IAC1C;QAAE,MAAM;QAAY,MAAM;IAAS;IACnC;QAAE,MAAM;QAAW,MAAM;IAAW;IACpC;QAAE,MAAM;QAAc,MAAM;IAAc;IAC1C;QAAE,MAAM;QAAW,MAAM;IAAW;CACrC;AAEM,SAAS;IACd,qBACE,iNAAC;QAAO,WAAU;;0BAEhB,iNAAC;gBAAI,WAAU;;;;;;0BAEf,iNAAC;gBAAI,WAAU;;kCAEb,iNAAC;wBAAI,WAAU;;0CAEb,iNAAC;;kDACC,iNAAC;wCAAG,WAAU;kDAA6C;;;;;;kDAC3D,iNAAC;wCAAG,WAAU;kDACX,WAAW,GAAG,CAAC,CAAC,yBACf,iNAAC;0DACC,cAAA,iNAAC,8LAAI;oDAAC,MAAM,SAAS,IAAI;oDAAE,WAAU;8DAClC,SAAS,IAAI;;;;;;+CAFT,SAAS,IAAI;;;;;;;;;;;;;;;;0CAU5B,iNAAC;;kDACC,iNAAC;wCAAG,WAAU;kDAA6C;;;;;;kDAC3D,iNAAC;wCAAG,WAAU;kDACX,WAAW,GAAG,CAAC,CAAC,qBACf,iNAAC;0DACC,cAAA,iNAAC,8LAAI;oDAAC,MAAM,KAAK,IAAI;oDAAE,WAAU;8DAC9B,KAAK,IAAI;;;;;;+CAFL,KAAK,IAAI;;;;;;;;;;;;;;;;0CAUxB,iNAAC;;kDACC,iNAAC;wCAAG,WAAU;kDAA6C;;;;;;kDAC3D,iNAAC;wCAAG,WAAU;;0DACZ,iNAAC;0DAAG;;;;;;0DACJ,iNAAC;0DAAG;;;;;;;;;;;;;;;;;;;;;;;;kCAMV,iNAAC;wBAAI,WAAU;kCACb,cAAA,iNAAC;4BAAI,WAAU;;8CAEb,iNAAC;;sDACC,iNAAC;4CAAG,WAAU;sDAA0D;;;;;;sDACxE,iNAAC;4CAAG,WAAU;sDACX,WAAW,GAAG,CAAC,CAAC,yBACf,iNAAC;8DACC,cAAA,iNAAC,8LAAI;wDAAC,MAAM,SAAS,IAAI;wDAAE,WAAU;kEAClC,SAAS,IAAI;;;;;;mDAFT,SAAS,IAAI;;;;;;;;;;;;;;;;8CAU5B,iNAAC;;sDACC,iNAAC;4CAAG,WAAU;sDAA0D;;;;;;sDACxE,iNAAC;4CAAG,WAAU;sDACX,WAAW,GAAG,CAAC,CAAC,qBACf,iNAAC;8DACC,cAAA,iNAAC,8LAAI;wDAAC,MAAM,KAAK,IAAI;wDAAE,WAAU;kEAC9B,KAAK,IAAI;;;;;;mDAFL,KAAK,IAAI;;;;;;;;;;;;;;;;8CAUxB,iNAAC;;sDACC,iNAAC;4CAAG,WAAU;sDAA0D;;;;;;sDACxE,iNAAC;4CAAG,WAAU;;8DACZ,iNAAC;8DAAG;;;;;;8DACJ,iNAAC;8DAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAOd,iNAAC;gBAAI,WAAU;0BACb,cAAA,iNAAC;oBAAI,WAAU;;sCACb,iNAAC;4BAAE,WAAU;sCAAqC;;;;;;sCAGlD,iNAAC;4BAAE,WAAU;sCAAiE;;;;;;;;;;;;;;;;;;;;;;;AAOxF;KAtGgB","debugId":null}},
    {"offset": {"line": 1827, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/hooks/useAnalytics.ts"],"sourcesContent":["'use client';\n\nimport { usePathname, useSearchParams } from 'next/navigation';\nimport { useQuery } from '@tanstack/react-query';\nimport { supabase } from '@/integrations/supabase/client';\nimport { useEffect, useRef } from 'react';\n\nconst SUPABASE_URL = process.env.NEXT_PUBLIC_SUPABASE_URL;\n\n// Helper to track events directly to database\nasync function trackEvent(eventType: string, data: Record<string, unknown>) {\n  try {\n    // Map event types to their respective tables\n    const tableMap: Record<string, string> = {\n      'page_view': 'page_views',\n      'category_view': 'category_page_views',\n      'ad_view': 'ad_views',\n      'ad_click': 'ad_clicks',\n      'listing_view': 'listing_views',\n      'link_click': 'listing_link_clicks',\n    };\n\n    const tableName = tableMap[eventType];\n    if (!tableName) {\n      console.warn(`Unknown event type: ${eventType}`);\n      return;\n    }\n\n    console.log('Attempting to insert:', { tableName, data });\n    const { data: result, error } = await supabase.from(tableName).insert(data);\n    \n    if (error) {\n      console.error(`Failed to track ${eventType}:`, {\n        message: error.message,\n        code: error.code,\n        details: error.details,\n        hint: error.hint,\n        tableName: tableName,\n        eventType: eventType\n      });\n    } else {\n      console.log('Successfully tracked:', eventType);\n    }\n  } catch (error) {\n    console.error(`Failed to track ${eventType}:`, {\n      message: error instanceof Error ? error.message : String(error),\n      stack: error instanceof Error ? error.stack : undefined,\n      eventType: eventType\n    });\n  }\n}\n\n// Track page view\nexport const usePageViewTracking = () => {\n  const pathname = usePathname();\n  const trackedRef = useRef<string | null>(null);\n\n  useEffect(() => {\n    // Don't track admin pages or dashboard-login\n    if (pathname.startsWith('/admin') || pathname.startsWith('/dashboard-login')) {\n      return;\n    }\n\n    // Only track once per page\n    if (trackedRef.current === pathname) {\n      return;\n    }\n\n    trackedRef.current = pathname;\n\n    trackEvent('page_view', {\n      page_url: pathname,\n      referrer: document.referrer || null,\n      user_agent: navigator.userAgent,\n    });\n  }, [pathname]);\n};\n\n// Track category page views\nexport const useCategoryViewTracking = (categoryId: string | null, categoryName: string | null) => {\n  const trackedRef = useRef<string | null>(null);\n\n  useEffect(() => {\n    if (!categoryId || trackedRef.current === categoryId) {\n      return;\n    }\n\n    trackedRef.current = categoryId;\n\n    trackEvent('category_view', {\n      category_id: categoryId,\n      category_name: categoryName,\n    });\n  }, [categoryId, categoryName]);\n};\n\n// Direct tracking function for category page views with location\nexport const trackCategoryPageView = (\n  categoryId: string,\n  categoryName: string,\n  country: string | null = null,\n  city: string | null = null\n) => {\n  trackEvent('category_view', {\n    category_id: categoryId,\n    category_name: categoryName,\n    country: country,\n    city: city,\n  });\n};\n\n// Track ad view\nexport const trackAdView = (adId: string) => {\n  trackEvent('ad_view', { ad_id: adId });\n};\n\n// Track ad click\nexport const trackAdClick = (adId: string, targetUrl: string) => {\n  trackEvent('ad_click', { ad_id: adId, target_url: targetUrl });\n};\n\n// Track listing view\nexport const trackListingView = (listingId: string) => {\n  trackEvent('listing_view', { listing_id: listingId });\n};\n\n// Track link clicks from listing pages\nexport const trackLinkClick = (listingId: string, linkType: string, linkUrl?: string) => {\n  trackEvent('link_click', {\n    listing_id: listingId,\n    link_type: linkType,\n    link_url: linkUrl || null,\n  });\n};\n\n// Fetch analytics data - Page Views (with count)\nexport function usePageViews(startDate?: string, endDate?: string) {\n  return useQuery({\n    queryKey: ['analytics', 'page-views', startDate, endDate],\n    queryFn: async () => {\n      let query = supabase\n        .from('page_views')\n        .select('*', { count: 'exact', head: false })\n        .order('viewed_at', { ascending: false })\n        .limit(1000);\n\n      if (startDate) {\n        query = query.gte('viewed_at', startDate);\n      }\n      if (endDate) {\n        query = query.lte('viewed_at', endDate);\n      }\n\n      const { data, count, error } = await query;\n      if (error) throw error;\n      return { data: data || [], count: count || 0 };\n    },\n  });\n}\n\n// Fetch analytics data - Category Views (with count)\nexport function useCategoryViews(startDate?: string, endDate?: string) {\n  return useQuery({\n    queryKey: ['analytics', 'category-views', startDate, endDate],\n    queryFn: async () => {\n      let query = supabase\n        .from('category_page_views')\n        .select('*', { count: 'exact', head: false })\n        .order('viewed_at', { ascending: false })\n        .limit(1000);\n\n      if (startDate) {\n        query = query.gte('viewed_at', startDate);\n      }\n      if (endDate) {\n        query = query.lte('viewed_at', endDate);\n      }\n\n      const { data, count, error } = await query;\n      if (error) throw error;\n      return { data: data || [], count: count || 0 };\n    },\n  });\n}\n\n// Fetch analytics data - Ad Views (with count)\nexport function useAdViews(startDate?: string, endDate?: string) {\n  return useQuery({\n    queryKey: ['analytics', 'ad-views', startDate, endDate],\n    queryFn: async () => {\n      let query = supabase\n        .from('ad_views')\n        .select('*', { count: 'exact', head: false })\n        .order('viewed_at', { ascending: false })\n        .limit(1000);\n\n      if (startDate) {\n        query = query.gte('viewed_at', startDate);\n      }\n      if (endDate) {\n        query = query.lte('viewed_at', endDate);\n      }\n\n      const { data, count, error } = await query;\n      if (error) throw error;\n      return { data: data || [], count: count || 0 };\n    },\n  });\n}\n\n// Fetch analytics data - Ad Clicks (with count)\nexport function useAdClicks(startDate?: string, endDate?: string) {\n  return useQuery({\n    queryKey: ['analytics', 'ad-clicks', startDate, endDate],\n    queryFn: async () => {\n      let query = supabase\n        .from('ad_clicks')\n        .select('*', { count: 'exact', head: false })\n        .order('clicked_at', { ascending: false })\n        .limit(1000);\n\n      if (startDate) {\n        query = query.gte('clicked_at', startDate);\n      }\n      if (endDate) {\n        query = query.lte('clicked_at', endDate);\n      }\n\n      const { data, count, error } = await query;\n      if (error) throw error;\n      return { data: data || [], count: count || 0 };\n    },\n  });\n}\n\n// Fetch analytics data - Listing Views (with count)\nexport function useListingViews(startDate?: string, endDate?: string) {\n  return useQuery({\n    queryKey: ['analytics', 'listing-views', startDate, endDate],\n    queryFn: async () => {\n      let query = supabase\n        .from('listing_views')\n        .select('*', { count: 'exact', head: false })\n        .order('viewed_at', { ascending: false })\n        .limit(1000);\n\n      if (startDate) {\n        query = query.gte('viewed_at', startDate);\n      }\n      if (endDate) {\n        query = query.lte('viewed_at', endDate);\n      }\n\n      const { data, count, error } = await query;\n      if (error) throw error;\n      return { data: data || [], count: count || 0 };\n    },\n  });\n}\n\n// Fetch analytics data - Link Clicks (with count)\nexport function useLinkClicks(startDate?: string, endDate?: string) {\n  return useQuery({\n    queryKey: ['analytics', 'link-clicks', startDate, endDate],\n    queryFn: async () => {\n      let query = supabase\n        .from('listing_link_clicks')\n        .select('*', { count: 'exact', head: false })\n        .order('clicked_at', { ascending: false })\n        .limit(1000);\n\n      if (startDate) {\n        query = query.gte('clicked_at', startDate);\n      }\n      if (endDate) {\n        query = query.lte('clicked_at', endDate);\n      }\n\n      const { data, count, error } = await query;\n      if (error) throw error;\n      return { data: data || [], count: count || 0 };\n    },\n  });\n}\n\n// Aggregated analytics for dashboard\nexport function useAnalyticsSummary(startDate?: string, endDate?: string) {\n  const { data: pageViews } = usePageViews(startDate, endDate);\n  const { data: categoryViews } = useCategoryViews(startDate, endDate);\n  const { data: adViews } = useAdViews(startDate, endDate);\n  const { data: adClicks } = useAdClicks(startDate, endDate);\n  const { data: listingViews } = useListingViews(startDate, endDate);\n  const { data: linkClicks } = useLinkClicks(startDate, endDate);\n\n  return {\n    pageViews: pageViews?.count || 0,\n    categoryViews: categoryViews?.count || 0,\n    adViews: adViews?.count || 0,\n    adClicks: adClicks?.count || 0,\n    listingViews: listingViews?.count || 0,\n    linkClicks: linkClicks?.count || 0,\n  };\n}\n\n// Top performing listings by views\nexport function useTopListings(limit: number = 10, startDate?: string, endDate?: string) {\n  return useQuery({\n    queryKey: ['analytics', 'top-listings', limit, startDate, endDate],\n    queryFn: async () => {\n      let query = supabase\n        .from('listing_views')\n        .select('listing_id');\n\n      if (startDate) {\n        query = query.gte('viewed_at', startDate);\n      }\n      if (endDate) {\n        query = query.lte('viewed_at', endDate);\n      }\n\n      const { data, error } = await query;\n      if (error) throw error;\n\n      // Count views per listing\n      const viewCounts = data.reduce((acc: Record<string, number>, view) => {\n        acc[view.listing_id] = (acc[view.listing_id] || 0) + 1;\n        return acc;\n      }, {});\n\n      // Sort and limit\n      const sorted = Object.entries(viewCounts)\n        .sort(([, a], [, b]) => b - a)\n        .slice(0, limit)\n        .map(([listing_id, views]) => ({ listing_id, views }));\n\n      return sorted;\n    },\n  });\n}\n\n// Top performing categories by views\nexport function useTopCategories(limit: number = 10, startDate?: string, endDate?: string) {\n  return useQuery({\n    queryKey: ['analytics', 'top-categories', limit, startDate, endDate],\n    queryFn: async () => {\n      let query = supabase\n        .from('category_page_views')\n        .select('category_id, category_name');\n\n      if (startDate) {\n        query = query.gte('viewed_at', startDate);\n      }\n      if (endDate) {\n        query = query.lte('viewed_at', endDate);\n      }\n\n      const { data, error } = await query;\n      if (error) throw error;\n\n      // Count views per category\n      const viewCounts = data.reduce((acc: Record<string, { name: string; views: number }>, view) => {\n        if (!acc[view.category_id]) {\n          acc[view.category_id] = { name: view.category_name || 'Unknown', views: 0 };\n        }\n        acc[view.category_id].views++;\n        return acc;\n      }, {});\n\n      // Sort and limit\n      const sorted = Object.entries(viewCounts)\n        .sort(([, a], [, b]) => b.views - a.views)\n        .slice(0, limit)\n        .map(([category_id, data]) => ({ category_id, ...data }));\n\n      return sorted;\n    },\n  });\n}\n\n// Analytics Overview\nexport function useAnalyticsOverview(startDate?: string, endDate?: string) {\n  const { data: pageViews, isLoading: pageViewsLoading } = usePageViews(startDate, endDate);\n  const { data: categoryViews, isLoading: categoryViewsLoading } = useCategoryViews(startDate, endDate);\n  const { data: adViews, isLoading: adViewsLoading } = useAdViews(startDate, endDate);\n  const { data: adClicks, isLoading: adClicksLoading } = useAdClicks(startDate, endDate);\n  const { data: listingViews, isLoading: listingViewsLoading } = useListingViews(startDate, endDate);\n  const { data: linkClicks, isLoading: linkClicksLoading } = useLinkClicks(startDate, endDate);\n\n  const isLoading = pageViewsLoading || categoryViewsLoading || adViewsLoading || \n                    adClicksLoading || listingViewsLoading || linkClicksLoading;\n\n  const totalAdViews = adViews?.count || 0;\n  const totalAdClicks = adClicks?.count || 0;\n  const ctr = totalAdViews > 0 ? ((totalAdClicks / totalAdViews) * 100).toFixed(2) : '0.00';\n\n  return {\n    data: {\n      pageViews: pageViews?.count || 0,\n      categoryViews: categoryViews?.count || 0,\n      adViews: totalAdViews,\n      adClicks: totalAdClicks,\n      ctr: ctr,\n      listingViews: listingViews?.count || 0,\n      linkClicks: linkClicks?.count || 0,\n    },\n    isLoading,\n    error: null\n  };\n}\n\n// Ad Analytics - aggregated by ad\nexport function useAdAnalytics() {\n  return useQuery({\n    queryKey: ['ad-analytics'],\n    queryFn: async () => {\n      // Get all ads\n      const { data: ads, error: adsError } = await supabase\n        .from('ads')\n        .select('id, name, position')\n        .order('name');\n\n      if (adsError) throw adsError;\n\n      // Get views and clicks for each ad\n      const results = await Promise.all(\n        ads.map(async (ad) => {\n          const [viewsRes, clicksRes] = await Promise.all([\n            supabase.from('ad_views').select('id', { count: 'exact', head: true }).eq('ad_id', ad.id),\n            supabase.from('ad_clicks').select('id', { count: 'exact', head: true }).eq('ad_id', ad.id)\n          ]);\n\n          const views = viewsRes.count || 0;\n          const clicks = clicksRes.count || 0;\n          const ctr = views > 0 ? ((clicks / views) * 100).toFixed(2) : '0.00';\n\n          return {\n            id: ad.id,\n            name: ad.name,\n            position: ad.position,\n            views,\n            clicks,\n            ctr\n          };\n        })\n      );\n\n      return results;\n    },\n  });\n}\n\n// Time series analytics\nexport function useAnalyticsTimeSeries(startDate?: string, endDate?: string) {\n  return useQuery({\n    queryKey: ['analytics-timeseries', startDate, endDate],\n    queryFn: async () => {\n      const start = startDate || new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString();\n      const end = endDate || new Date().toISOString();\n\n      // Get page views\n      const { data: pageViews } = await supabase\n        .from('page_views')\n        .select('viewed_at')\n        .gte('viewed_at', start)\n        .lte('viewed_at', end);\n\n      // Get ad views\n      const { data: adViews } = await supabase\n        .from('ad_views')\n        .select('viewed_at')\n        .gte('viewed_at', start)\n        .lte('viewed_at', end);\n\n      // Get ad clicks\n      const { data: adClicks } = await supabase\n        .from('ad_clicks')\n        .select('clicked_at')\n        .gte('clicked_at', start)\n        .lte('clicked_at', end);\n\n      // Group by date\n      const dateMap: Record<string, { pageViews: number; adViews: number; adClicks: number }> = {};\n\n      pageViews?.forEach((view) => {\n        const date = view.viewed_at.split('T')[0];\n        if (!dateMap[date]) dateMap[date] = { pageViews: 0, adViews: 0, adClicks: 0 };\n        dateMap[date].pageViews++;\n      });\n\n      adViews?.forEach((view) => {\n        const date = view.viewed_at.split('T')[0];\n        if (!dateMap[date]) dateMap[date] = { pageViews: 0, adViews: 0, adClicks: 0 };\n        dateMap[date].adViews++;\n      });\n\n      adClicks?.forEach((click) => {\n        const date = click.clicked_at.split('T')[0];\n        if (!dateMap[date]) dateMap[date] = { pageViews: 0, adViews: 0, adClicks: 0 };\n        dateMap[date].adClicks++;\n      });\n\n      // Convert to array and sort\n      return Object.entries(dateMap)\n        .map(([date, counts]) => ({ date, ...counts }))\n        .sort((a, b) => a.date.localeCompare(b.date));\n    },\n  });\n}\n\n// Category views analytics with search\nexport function useCategoryViewsAnalytics(search?: string) {\n  return useQuery({\n    queryKey: ['category-views-analytics', search],\n    queryFn: async () => {\n      let query = supabase\n        .from('category_page_views')\n        .select('category_name, country, city');\n\n      const { data, error } = await query;\n      if (error) throw error;\n\n      // Group by category + location\n      const grouped: Record<string, { category: string; country: string | null; city: string | null; views: number }> = {};\n      \n      data?.forEach((view) => {\n        const key = `${view.category_name}-${view.country}-${view.city}`;\n        if (!grouped[key]) {\n          grouped[key] = {\n            category: view.category_name,\n            country: view.country,\n            city: view.city,\n            views: 0\n          };\n        }\n        grouped[key].views++;\n      });\n\n      let results = Object.values(grouped);\n\n      // Filter by search\n      if (search) {\n        const searchLower = search.toLowerCase();\n        results = results.filter(item => \n          item.category.toLowerCase().includes(searchLower) ||\n          item.country?.toLowerCase().includes(searchLower) ||\n          item.city?.toLowerCase().includes(searchLower)\n        );\n      }\n\n      // Sort by views descending\n      return results.sort((a, b) => b.views - a.views);\n    },\n  });\n}\n\n// Company views analytics with search\nexport function useCompanyViewsAnalytics(search?: string) {\n  return useQuery({\n    queryKey: ['company-views-analytics', search],\n    queryFn: async () => {\n      const { data: views, error: viewsError } = await supabase\n        .from('listing_views')\n        .select('listing_id');\n\n      if (viewsError) throw viewsError;\n\n      // Count views per listing\n      const viewCounts: Record<string, number> = {};\n      views?.forEach((view) => {\n        viewCounts[view.listing_id] = (viewCounts[view.listing_id] || 0) + 1;\n      });\n\n      // Get listing details\n      const listingIds = Object.keys(viewCounts);\n      if (listingIds.length === 0) return [];\n\n      let query = supabase\n        .from('listings')\n        .select('id, name, slug')\n        .in('id', listingIds);\n\n      if (search) {\n        query = query.ilike('name', `%${search}%`);\n      }\n\n      const { data: listings, error: listingsError } = await query;\n      if (listingsError) throw listingsError;\n\n      // Combine data\n      const results = listings?.map((listing) => ({\n        id: listing.id,\n        name: listing.name,\n        slug: listing.slug,\n        views: viewCounts[listing.id] || 0\n      })) || [];\n\n      // Sort by views descending\n      return results.sort((a, b) => b.views - a.views);\n    },\n  });\n}\n\n// Link clicks analytics with search\nexport function useLinkClicksAnalytics(search?: string) {\n  return useQuery({\n    queryKey: ['link-clicks-analytics', search],\n    queryFn: async () => {\n      const { data: clicks, error: clicksError } = await supabase\n        .from('listing_link_clicks')\n        .select('listing_id, link_type');\n\n      if (clicksError) throw clicksError;\n\n      // Group by listing + link type\n      const grouped: Record<string, { listingId: string; linkType: string; clicks: number }> = {};\n      \n      clicks?.forEach((click) => {\n        const key = `${click.listing_id}-${click.link_type}`;\n        if (!grouped[key]) {\n          grouped[key] = {\n            listingId: click.listing_id,\n            linkType: click.link_type,\n            clicks: 0\n          };\n        }\n        grouped[key].clicks++;\n      });\n\n      // Get listing details\n      const listingIds = [...new Set(Object.values(grouped).map(g => g.listingId))];\n      if (listingIds.length === 0) return [];\n\n      let query = supabase\n        .from('listings')\n        .select('id, name, slug')\n        .in('id', listingIds);\n\n      if (search) {\n        query = query.ilike('name', `%${search}%`);\n      }\n\n      const { data: listings, error: listingsError } = await query;\n      if (listingsError) throw listingsError;\n\n      const listingMap = new Map(listings?.map(l => [l.id, l]) || []);\n\n      // Combine data\n      const results = Object.values(grouped)\n        .map((item) => {\n          const listing = listingMap.get(item.listingId);\n          return listing ? {\n            listingId: item.listingId,\n            companyName: listing.name,\n            slug: listing.slug,\n            linkType: item.linkType,\n            clicks: item.clicks\n          } : null;\n        })\n        .filter(Boolean) as Array<{\n          listingId: string;\n          companyName: string;\n          slug: string;\n          linkType: string;\n          clicks: number;\n        }>;\n\n      // Sort by clicks descending\n      return results.sort((a, b) => b.clicks - a.clicks);\n    },\n  });\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2714, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/PageViewTracker.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { usePageViewTracking } from '@/hooks/useAnalytics';\r\n\r\nexport function PageViewTracker() {\r\n  usePageViewTracking();\r\n  return null;\r\n}"],"names":[],"mappings":";;;;AAEA;;AAFA;;AAIO,SAAS;;IACd,IAAA,0KAAmB;IACnB,OAAO;AACT;GAHgB;;QACd,0KAAmB;;;KADL","debugId":null}},
    {"offset": {"line": 2742, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/Layout.tsx"],"sourcesContent":["import { Header, BreadcrumbItem } from \"./Header\";\nimport { Footer } from \"./Footer\";\nimport { PageViewTracker } from \"./PageViewTracker\";\nimport { cn } from \"@/lib/utils\";\nimport { ReactNode } from \"react\";\n\ninterface LayoutProps {\n  children: React.ReactNode;\n  hideFooter?: boolean;\n  breadcrumbs?: BreadcrumbItem[];\n  headerRightContent?: ReactNode;\n  customNavContent?: ReactNode;\n}\n\nexport function Layout({ children, hideFooter, breadcrumbs, headerRightContent, customNavContent }: LayoutProps) {\n  return (\n    <>\n      <PageViewTracker />\n      <div className={cn(\n        \"flex flex-col\",\n        hideFooter ? \"h-screen overflow-hidden\" : \"min-h-screen\"\n      )}>\n        <Header \n          breadcrumbs={breadcrumbs} \n          rightContent={headerRightContent} \n          customNavContent={customNavContent} \n        />\n        <main className={cn(\n          \"flex-1 flex flex-col\",\n          hideFooter && \"overflow-hidden\"\n        )}>{children}</main>\n        {!hideFooter && <Footer />}\n      </div>\n    </>\n  );\n}\n\nexport type { BreadcrumbItem };"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;;;;;AAWO,SAAS,OAAO,KAAwF;QAAxF,EAAE,QAAQ,EAAE,UAAU,EAAE,WAAW,EAAE,kBAAkB,EAAE,gBAAgB,EAAe,GAAxF;IACrB,qBACE;;0BACE,iNAAC,+KAAe;;;;;0BAChB,iNAAC;gBAAI,WAAW,IAAA,gJAAE,EAChB,iBACA,aAAa,6BAA6B;;kCAE1C,iNAAC,6JAAM;wBACL,aAAa;wBACb,cAAc;wBACd,kBAAkB;;;;;;kCAEpB,iNAAC;wBAAK,WAAW,IAAA,gJAAE,EACjB,wBACA,cAAc;kCACZ;;;;;;oBACH,CAAC,4BAAc,iNAAC,6JAAM;;;;;;;;;;;;;AAI/B;KArBgB","debugId":null}},
    {"offset": {"line": 2809, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-border bg-secondary px-3 py-2 text-base text-foreground ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:border-primary disabled:cursor-not-allowed disabled:opacity-50 md:text-sm transition-colors duration-200\",\n          className,\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  },\n);\nInput.displayName = \"Input\";\n\nexport { Input };"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,+LAAgB,MAC5B,QAAgC;QAA/B,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO;IAC5B,qBACE,iNAAC;QACC,MAAM;QACN,WAAW,IAAA,gJAAE,EACX,idACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 2845, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/lib/searchUtils.ts"],"sourcesContent":["'use client';\n\n/**\r\n * Known location terms to strip from search queries.\r\n * These are countries, regions, states, and major cities that users might append to searches.\r\n * Organized by type for maintainability.\r\n */\r\n\r\n// Countries (including common variations and abbreviations)\r\nconst COUNTRIES = [\r\n  // UK variations\r\n  \"uk\",\r\n  \"united kingdom\",\r\n  \"great britain\",\r\n  \"britain\",\r\n  \"england\",\r\n  \"scotland\",\r\n  \"wales\",\r\n  \"northern ireland\",\r\n  // US variations\r\n  \"usa\",\r\n  \"united states\",\r\n  \"united states of america\",\r\n  \"us\",\r\n  \"america\",\r\n  // Europe\r\n  \"germany\",\r\n  \"france\",\r\n  \"spain\",\r\n  \"italy\",\r\n  \"netherlands\",\r\n  \"holland\",\r\n  \"belgium\",\r\n  \"austria\",\r\n  \"switzerland\",\r\n  \"portugal\",\r\n  \"poland\",\r\n  \"ireland\",\r\n  \"republic of ireland\",\r\n  \"eire\",\r\n  \"sweden\",\r\n  \"norway\",\r\n  \"denmark\",\r\n  \"finland\",\r\n  \"greece\",\r\n  \"czech republic\",\r\n  \"czechia\",\r\n  \"hungary\",\r\n  \"romania\",\r\n  \"bulgaria\",\r\n  \"croatia\",\r\n  \"slovenia\",\r\n  \"slovakia\",\r\n  \"serbia\",\r\n  \"ukraine\",\r\n  \"russia\",\r\n  \"turkey\",\r\n  \"cyprus\",\r\n  \"malta\",\r\n  \"luxembourg\",\r\n  \"iceland\",\r\n  \"estonia\",\r\n  \"latvia\",\r\n  \"lithuania\",\r\n  \"belarus\",\r\n  // Americas\r\n  \"canada\",\r\n  \"mexico\",\r\n  \"brazil\",\r\n  \"argentina\",\r\n  \"chile\",\r\n  \"colombia\",\r\n  \"peru\",\r\n  \"venezuela\",\r\n  // Asia Pacific\r\n  \"australia\",\r\n  \"new zealand\",\r\n  \"japan\",\r\n  \"china\",\r\n  \"south korea\",\r\n  \"korea\",\r\n  \"india\",\r\n  \"singapore\",\r\n  \"hong kong\",\r\n  \"taiwan\",\r\n  \"thailand\",\r\n  \"malaysia\",\r\n  \"indonesia\",\r\n  \"philippines\",\r\n  \"vietnam\",\r\n  // Middle East & Africa\r\n  \"uae\",\r\n  \"united arab emirates\",\r\n  \"dubai\",\r\n  \"saudi arabia\",\r\n  \"israel\",\r\n  \"south africa\",\r\n  \"egypt\",\r\n  \"morocco\",\r\n  \"nigeria\",\r\n  \"kenya\",\r\n];\r\n\r\n// UK Regions (your 11 regions)\r\nconst UK_REGIONS = [\r\n  \"london\",\r\n  \"south east\",\r\n  \"south west\",\r\n  \"east of england\",\r\n  \"east anglia\",\r\n  \"midlands\",\r\n  \"east midlands\",\r\n  \"west midlands\",\r\n  \"north west\",\r\n  \"north east\",\r\n  \"yorkshire\",\r\n  \"yorkshire and the humber\",\r\n  \"wales\",\r\n  \"scotland\",\r\n  \"northern ireland\",\r\n];\r\n\r\n// US States (all 50 + DC)\r\nconst US_STATES = [\r\n  \"alabama\",\r\n  \"alaska\",\r\n  \"arizona\",\r\n  \"arkansas\",\r\n  \"california\",\r\n  \"colorado\",\r\n  \"connecticut\",\r\n  \"delaware\",\r\n  \"florida\",\r\n  \"georgia\",\r\n  \"hawaii\",\r\n  \"idaho\",\r\n  \"illinois\",\r\n  \"indiana\",\r\n  \"iowa\",\r\n  \"kansas\",\r\n  \"kentucky\",\r\n  \"louisiana\",\r\n  \"maine\",\r\n  \"maryland\",\r\n  \"massachusetts\",\r\n  \"michigan\",\r\n  \"minnesota\",\r\n  \"mississippi\",\r\n  \"missouri\",\r\n  \"montana\",\r\n  \"nebraska\",\r\n  \"nevada\",\r\n  \"new hampshire\",\r\n  \"new jersey\",\r\n  \"new mexico\",\r\n  \"new york\",\r\n  \"north carolina\",\r\n  \"north dakota\",\r\n  \"ohio\",\r\n  \"oklahoma\",\r\n  \"oregon\",\r\n  \"pennsylvania\",\r\n  \"rhode island\",\r\n  \"south carolina\",\r\n  \"south dakota\",\r\n  \"tennessee\",\r\n  \"texas\",\r\n  \"utah\",\r\n  \"vermont\",\r\n  \"virginia\",\r\n  \"washington\",\r\n  \"west virginia\",\r\n  \"wisconsin\",\r\n  \"wyoming\",\r\n  \"district of columbia\",\r\n  \"dc\",\r\n];\r\n\r\n// US State Abbreviations\r\nconst US_STATE_ABBREVS = [\r\n  \"al\",\r\n  \"ak\",\r\n  \"az\",\r\n  \"ar\",\r\n  \"ca\",\r\n  \"co\",\r\n  \"ct\",\r\n  \"de\",\r\n  \"fl\",\r\n  \"ga\",\r\n  \"hi\",\r\n  \"id\",\r\n  \"il\",\r\n  \"in\",\r\n  \"ia\",\r\n  \"ks\",\r\n  \"ky\",\r\n  \"la\",\r\n  \"me\",\r\n  \"md\",\r\n  \"ma\",\r\n  \"mi\",\r\n  \"mn\",\r\n  \"ms\",\r\n  \"mo\",\r\n  \"mt\",\r\n  \"ne\",\r\n  \"nv\",\r\n  \"nh\",\r\n  \"nj\",\r\n  \"nm\",\r\n  \"ny\",\r\n  \"nc\",\r\n  \"nd\",\r\n  \"oh\",\r\n  \"ok\",\r\n  \"or\",\r\n  \"pa\",\r\n  \"ri\",\r\n  \"sc\",\r\n  \"sd\",\r\n  \"tn\",\r\n  \"tx\",\r\n  \"ut\",\r\n  \"vt\",\r\n  \"va\",\r\n  \"wa\",\r\n  \"wv\",\r\n  \"wi\",\r\n  \"wy\",\r\n];\r\n\r\n// Major UK Cities & Towns\r\nconst UK_CITIES = [\r\n  // Major cities\r\n  \"london\",\r\n  \"birmingham\",\r\n  \"manchester\",\r\n  \"leeds\",\r\n  \"liverpool\",\r\n  \"newcastle\",\r\n  \"sheffield\",\r\n  \"bristol\",\r\n  \"nottingham\",\r\n  \"leicester\",\r\n  \"coventry\",\r\n  \"bradford\",\r\n  \"cardiff\",\r\n  \"belfast\",\r\n  \"edinburgh\",\r\n  \"glasgow\",\r\n  // Music industry hubs & significant towns\r\n  \"brighton\",\r\n  \"bournemouth\",\r\n  \"southampton\",\r\n  \"portsmouth\",\r\n  \"reading\",\r\n  \"oxford\",\r\n  \"cambridge\",\r\n  \"norwich\",\r\n  \"hull\",\r\n  \"middlesbrough\",\r\n  \"sunderland\",\r\n  \"wolverhampton\",\r\n  \"derby\",\r\n  \"stoke\",\r\n  \"plymouth\",\r\n  \"exeter\",\r\n  \"bath\",\r\n  \"york\",\r\n  \"chester\",\r\n  \"lancaster\",\r\n  \"blackpool\",\r\n  \"preston\",\r\n  \"bolton\",\r\n  \"wigan\",\r\n  \"stockport\",\r\n  \"rochdale\",\r\n  \"oldham\",\r\n  \"salford\",\r\n  \"warrington\",\r\n  \"crewe\",\r\n  \"shrewsbury\",\r\n  \"telford\",\r\n  \"worcester\",\r\n  \"gloucester\",\r\n  \"cheltenham\",\r\n  \"swindon\",\r\n  \"milton keynes\",\r\n  \"luton\",\r\n  \"watford\",\r\n  \"st albans\",\r\n  \"guildford\",\r\n  \"crawley\",\r\n  \"worthing\",\r\n  \"hastings\",\r\n  \"eastbourne\",\r\n  \"folkestone\",\r\n  \"canterbury\",\r\n  \"maidstone\",\r\n  \"tunbridge wells\",\r\n  \"margate\",\r\n  \"ramsgate\",\r\n  \"dover\",\r\n  \"ashford\",\r\n  \"colchester\",\r\n  \"ipswich\",\r\n  \"peterborough\",\r\n  \"northampton\",\r\n  \"bedford\",\r\n  \"stevenage\",\r\n  \"hemel hempstead\",\r\n  \"harlow\",\r\n  \"basildon\",\r\n  \"southend\",\r\n  \"chelmsford\",\r\n  // Scotland\r\n  \"aberdeen\",\r\n  \"dundee\",\r\n  \"inverness\",\r\n  \"stirling\",\r\n  \"perth\",\r\n  \"falkirk\",\r\n  \"ayr\",\r\n  \"kilmarnock\",\r\n  \"greenock\",\r\n  \"paisley\",\r\n  \"cumbernauld\",\r\n  \"livingston\",\r\n  \"dunfermline\",\r\n  \"kirkcaldy\",\r\n  // Wales\r\n  \"swansea\",\r\n  \"newport\",\r\n  \"wrexham\",\r\n  \"barry\",\r\n  \"neath\",\r\n  \"bridgend\",\r\n  \"llanelli\",\r\n  \"cwmbran\",\r\n  // Northern Ireland\r\n  \"derry\",\r\n  \"londonderry\",\r\n  \"lisburn\",\r\n  \"newtownabbey\",\r\n  \"bangor\",\r\n  \"newry\",\r\n  \"armagh\",\r\n  \"omagh\",\r\n];\r\n\r\n// Major European Cities\r\nconst EUROPEAN_CITIES = [\r\n  // Germany\r\n  \"berlin\",\r\n  \"munich\",\r\n  \"hamburg\",\r\n  \"cologne\",\r\n  \"frankfurt\",\r\n  \"dusseldorf\",\r\n  \"stuttgart\",\r\n  \"dortmund\",\r\n  \"essen\",\r\n  \"leipzig\",\r\n  \"bremen\",\r\n  \"dresden\",\r\n  \"hanover\",\r\n  \"nuremberg\",\r\n  \"duisburg\",\r\n  // France\r\n  \"paris\",\r\n  \"lyon\",\r\n  \"marseille\",\r\n  \"toulouse\",\r\n  \"nice\",\r\n  \"nantes\",\r\n  \"strasbourg\",\r\n  \"montpellier\",\r\n  \"bordeaux\",\r\n  \"lille\",\r\n  \"rennes\",\r\n  // Spain\r\n  \"madrid\",\r\n  \"barcelona\",\r\n  \"valencia\",\r\n  \"seville\",\r\n  \"zaragoza\",\r\n  \"malaga\",\r\n  \"bilbao\",\r\n  \"murcia\",\r\n  // Italy\r\n  \"rome\",\r\n  \"milan\",\r\n  \"naples\",\r\n  \"turin\",\r\n  \"palermo\",\r\n  \"genoa\",\r\n  \"bologna\",\r\n  \"florence\",\r\n  \"venice\",\r\n  // Netherlands\r\n  \"amsterdam\",\r\n  \"rotterdam\",\r\n  \"the hague\",\r\n  \"utrecht\",\r\n  \"eindhoven\",\r\n  \"tilburg\",\r\n  \"groningen\",\r\n  // Belgium\r\n  \"brussels\",\r\n  \"antwerp\",\r\n  \"ghent\",\r\n  \"bruges\",\r\n  \"liege\",\r\n  \"charleroi\",\r\n  // Austria & Switzerland\r\n  \"vienna\",\r\n  \"salzburg\",\r\n  \"innsbruck\",\r\n  \"zurich\",\r\n  \"geneva\",\r\n  \"basel\",\r\n  \"bern\",\r\n  // Scandinavia\r\n  \"stockholm\",\r\n  \"gothenburg\",\r\n  \"malmo\",\r\n  \"oslo\",\r\n  \"bergen\",\r\n  \"copenhagen\",\r\n  \"aarhus\",\r\n  \"helsinki\",\r\n  \"tampere\",\r\n  \"turku\",\r\n  // Eastern Europe\r\n  \"prague\",\r\n  \"budapest\",\r\n  \"warsaw\",\r\n  \"krakow\",\r\n  \"bucharest\",\r\n  \"sofia\",\r\n  \"zagreb\",\r\n  \"belgrade\",\r\n  \"bratislava\",\r\n  \"ljubljana\",\r\n  // Other\r\n  \"dublin\",\r\n  \"cork\",\r\n  \"galway\",\r\n  \"limerick\",\r\n  \"lisbon\",\r\n  \"porto\",\r\n  \"athens\",\r\n  \"thessaloniki\",\r\n  \"reykjavik\",\r\n  \"tallinn\",\r\n  \"riga\",\r\n  \"vilnius\",\r\n  \"minsk\",\r\n  \"kyiv\",\r\n];\r\n\r\n// North American Cities\r\nconst NORTH_AMERICAN_CITIES = [\r\n  // Major US cities\r\n  \"new york\",\r\n  \"los angeles\",\r\n  \"chicago\",\r\n  \"houston\",\r\n  \"phoenix\",\r\n  \"philadelphia\",\r\n  \"san antonio\",\r\n  \"san diego\",\r\n  \"dallas\",\r\n  \"san jose\",\r\n  \"austin\",\r\n  \"jacksonville\",\r\n  \"fort worth\",\r\n  \"columbus\",\r\n  \"charlotte\",\r\n  \"san francisco\",\r\n  \"indianapolis\",\r\n  \"seattle\",\r\n  \"denver\",\r\n  \"washington\",\r\n  \"boston\",\r\n  \"nashville\",\r\n  \"baltimore\",\r\n  \"oklahoma city\",\r\n  \"louisville\",\r\n  \"portland\",\r\n  \"las vegas\",\r\n  \"milwaukee\",\r\n  \"albuquerque\",\r\n  \"tucson\",\r\n  \"fresno\",\r\n  \"sacramento\",\r\n  \"mesa\",\r\n  \"kansas city\",\r\n  \"atlanta\",\r\n  \"miami\",\r\n  \"oakland\",\r\n  \"minneapolis\",\r\n  \"tulsa\",\r\n  \"cleveland\",\r\n  \"new orleans\",\r\n  \"tampa\",\r\n  \"st louis\",\r\n  \"pittsburgh\",\r\n  \"cincinnati\",\r\n  \"orlando\",\r\n  \"detroit\",\r\n  \"memphis\",\r\n  // Canada\r\n  \"toronto\",\r\n  \"montreal\",\r\n  \"vancouver\",\r\n  \"calgary\",\r\n  \"edmonton\",\r\n  \"ottawa\",\r\n  \"winnipeg\",\r\n  \"quebec city\",\r\n  \"hamilton\",\r\n  \"victoria\",\r\n];\r\n\r\n// Other Major World Cities\r\nconst OTHER_CITIES = [\r\n  // Australia & NZ\r\n  \"sydney\",\r\n  \"melbourne\",\r\n  \"brisbane\",\r\n  \"perth\",\r\n  \"adelaide\",\r\n  \"gold coast\",\r\n  \"canberra\",\r\n  \"auckland\",\r\n  \"wellington\",\r\n  \"christchurch\",\r\n  // Asia\r\n  \"tokyo\",\r\n  \"osaka\",\r\n  \"kyoto\",\r\n  \"yokohama\",\r\n  \"seoul\",\r\n  \"busan\",\r\n  \"beijing\",\r\n  \"shanghai\",\r\n  \"hong kong\",\r\n  \"taipei\",\r\n  \"singapore\",\r\n  \"bangkok\",\r\n  \"kuala lumpur\",\r\n  \"jakarta\",\r\n  \"manila\",\r\n  \"mumbai\",\r\n  \"delhi\",\r\n  \"bangalore\",\r\n  \"chennai\",\r\n  \"hyderabad\",\r\n  // Middle East\r\n  \"dubai\",\r\n  \"abu dhabi\",\r\n  \"tel aviv\",\r\n  \"jerusalem\",\r\n  \"riyadh\",\r\n  \"doha\",\r\n  \"kuwait city\",\r\n  // Africa\r\n  \"johannesburg\",\r\n  \"cape town\",\r\n  \"durban\",\r\n  \"cairo\",\r\n  \"lagos\",\r\n  \"nairobi\",\r\n  \"casablanca\",\r\n  // South America\r\n  \"sao paulo\",\r\n  \"rio de janeiro\",\r\n  \"buenos aires\",\r\n  \"bogota\",\r\n  \"lima\",\r\n  \"santiago\",\r\n  \"caracas\",\r\n  \"medellin\",\r\n  \"mexico city\",\r\n  \"guadalajara\",\r\n  \"monterrey\",\r\n];\r\n\r\n// Common Abbreviations & Nicknames\r\nconst ABBREVIATIONS = [\"nyc\", \"la\", \"sf\", \"dc\", \"philly\", \"vegas\", \"nola\", \"chi\", \"atl\", \"brum\", \"manc\"];\r\n\r\n// Combine all into single array\r\nconst KNOWN_LOCATIONS = [\r\n  ...COUNTRIES,\r\n  ...UK_REGIONS,\r\n  ...US_STATES,\r\n  ...US_STATE_ABBREVS,\r\n  ...UK_CITIES,\r\n  ...EUROPEAN_CITIES,\r\n  ...NORTH_AMERICAN_CITIES,\r\n  ...OTHER_CITIES,\r\n  ...ABBREVIATIONS,\r\n];\r\n\r\n// Pre-sort by length (longest first) for efficient matching - only done once at module load\r\nconst SORTED_LOCATIONS = [...new Set(KNOWN_LOCATIONS)].sort((a, b) => b.length - a.length);\r\n\r\n/**\r\n * Strips known location terms from a search query.\r\n * Returns the cleaned search term for better matching.\r\n *\r\n * Example: \"backline london\" -> \"backline\"\r\n * Example: \"studio equipment germany\" -> \"studio equipment\"\r\n * Example: \"PA hire california\" -> \"PA hire\"\r\n */\r\nexport function stripLocationFromQuery(query: string): string {\r\n  if (!query) return \"\";\r\n\r\n  let cleanedQuery = query.toLowerCase().trim();\r\n\r\n  for (const location of SORTED_LOCATIONS) {\r\n    // Check if query ends with the location (most common case)\r\n    if (cleanedQuery.endsWith(` ${location}`)) {\r\n      cleanedQuery = cleanedQuery.slice(0, -(location.length + 1)).trim();\r\n      break; // Only strip one location\r\n    }\r\n    // Also check if it starts with location (less common but handle it)\r\n    if (cleanedQuery.startsWith(`${location} `)) {\r\n      cleanedQuery = cleanedQuery.slice(location.length + 1).trim();\r\n      break;\r\n    }\r\n  }\r\n\r\n  return cleanedQuery;\r\n}\r\n\r\n/**\r\n * Check if a query contains only a location term (no actual search term)\r\n */\r\nexport function isOnlyLocation(query: string): boolean {\r\n  if (!query) return false;\r\n  const normalized = query.toLowerCase().trim();\r\n  return SORTED_LOCATIONS.includes(normalized);\r\n}\r\n\r\n/**\r\n * Extract location from query if present (for potential future use in filtering)\r\n */\r\nexport function extractLocation(query: string): string | null {\r\n  if (!query) return null;\r\n\r\n  const normalized = query.toLowerCase().trim();\r\n\r\n  for (const location of SORTED_LOCATIONS) {\r\n    if (normalized.endsWith(` ${location}`)) {\r\n      return location;\r\n    }\r\n    if (normalized.startsWith(`${location} `)) {\r\n      return location;\r\n    }\r\n    if (normalized === location) {\r\n      return location;\r\n    }\r\n  }\r\n\r\n  return null;\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AAEA;;;;CAIC,GAED,4DAA4D;AAC5D,MAAM,YAAY;IAChB,gBAAgB;IAChB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,gBAAgB;IAChB;IACA;IACA;IACA;IACA;IACA,SAAS;IACT;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,WAAW;IACX;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,eAAe;IACf;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,uBAAuB;IACvB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,+BAA+B;AAC/B,MAAM,aAAa;IACjB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,0BAA0B;AAC1B,MAAM,YAAY;IAChB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,yBAAyB;AACzB,MAAM,mBAAmB;IACvB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,0BAA0B;AAC1B,MAAM,YAAY;IAChB,eAAe;IACf;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,0CAA0C;IAC1C;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,WAAW;IACX;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,QAAQ;IACR;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,mBAAmB;IACnB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,wBAAwB;AACxB,MAAM,kBAAkB;IACtB,UAAU;IACV;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,SAAS;IACT;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,QAAQ;IACR;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,QAAQ;IACR;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,cAAc;IACd;IACA;IACA;IACA;IACA;IACA;IACA;IACA,UAAU;IACV;IACA;IACA;IACA;IACA;IACA;IACA,wBAAwB;IACxB;IACA;IACA;IACA;IACA;IACA;IACA;IACA,cAAc;IACd;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,iBAAiB;IACjB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,QAAQ;IACR;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,wBAAwB;AACxB,MAAM,wBAAwB;IAC5B,kBAAkB;IAClB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,SAAS;IACT;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,2BAA2B;AAC3B,MAAM,eAAe;IACnB,iBAAiB;IACjB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,OAAO;IACP;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,cAAc;IACd;IACA;IACA;IACA;IACA;IACA;IACA;IACA,SAAS;IACT;IACA;IACA;IACA;IACA;IACA;IACA;IACA,gBAAgB;IAChB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,mCAAmC;AACnC,MAAM,gBAAgB;IAAC;IAAO;IAAM;IAAM;IAAM;IAAU;IAAS;IAAQ;IAAO;IAAO;IAAQ;CAAO;AAExG,gCAAgC;AAChC,MAAM,kBAAkB;OACnB;OACA;OACA;OACA;OACA;OACA;OACA;OACA;OACA;CACJ;AAED,4FAA4F;AAC5F,MAAM,mBAAmB;OAAI,IAAI,IAAI;CAAiB,CAAC,IAAI,MAAC,CAAC,GAAG,IAAM,EAAE,MAAM,GAAG,EAAE,MAAM;;AAUlF,SAAS,uBAAuB,KAAa;IAClD,IAAI,CAAC,OAAO,OAAO;IAEnB,IAAI,eAAe,MAAM,WAAW,GAAG,IAAI;IAE3C,KAAK,MAAM,YAAY,iBAAkB;QACvC,2DAA2D;QAC3D,IAAI,aAAa,QAAQ,CAAC,AAAC,IAAY,OAAT,YAAa;YACzC,eAAe,aAAa,KAAK,CAAC,GAAG,CAAC,CAAC,SAAS,MAAM,GAAG,CAAC,GAAG,IAAI;YACjE,OAAO,0BAA0B;QACnC;QACA,oEAAoE;QACpE,IAAI,aAAa,UAAU,CAAC,AAAC,GAAW,OAAT,UAAS,OAAK;YAC3C,eAAe,aAAa,KAAK,CAAC,SAAS,MAAM,GAAG,GAAG,IAAI;YAC3D;QACF;IACF;IAEA,OAAO;AACT;AAKO,SAAS,eAAe,KAAa;IAC1C,IAAI,CAAC,OAAO,OAAO;IACnB,MAAM,aAAa,MAAM,WAAW,GAAG,IAAI;IAC3C,OAAO,iBAAiB,QAAQ,CAAC;AACnC;AAKO,SAAS,gBAAgB,KAAa;IAC3C,IAAI,CAAC,OAAO,OAAO;IAEnB,MAAM,aAAa,MAAM,WAAW,GAAG,IAAI;IAE3C,KAAK,MAAM,YAAY,iBAAkB;QACvC,IAAI,WAAW,QAAQ,CAAC,AAAC,IAAY,OAAT,YAAa;YACvC,OAAO;QACT;QACA,IAAI,WAAW,UAAU,CAAC,AAAC,GAAW,OAAT,UAAS,OAAK;YACzC,OAAO;QACT;QACA,IAAI,eAAe,UAAU;YAC3B,OAAO;QACT;IACF;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 3511, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/hooks/useSearchAutocomplete.ts"],"sourcesContent":["'use client';\n\nimport { useQuery } from \"@tanstack/react-query\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport { Category } from \"@/types/database\";\nimport { stripLocationFromQuery, isOnlyLocation } from \"@/lib/searchUtils\";\n\n// =============================================================================\n// SECURITY NOTE: Uses listings_public view (no contact data)\n// =============================================================================\n\n// Extended listing type with venue fields for URL building\nexport interface SearchListing {\n  id: string;\n  name: string;\n  slug: string;\n  country: string | null;\n  town_city: string | null;\n  venue_type: string | null;\n  region_slug: string | null;\n}\n\ninterface SearchAutocompleteResult {\n  categories: Category[];\n  listings: SearchListing[];\n}\n\nexport function useSearchAutocomplete(query: string) {\n  return useQuery({\n    queryKey: [\"search-autocomplete\", query],\n    queryFn: async (): Promise<SearchAutocompleteResult> => {\n      if (!query || query.length < 2) {\n        return { categories: [], listings: [] };\n      }\n\n      // Strip location terms from the query for better matching\n      const strippedQuery = stripLocationFromQuery(query);\n\n      // If query is only a location with no search term, use empty results\n      if (!strippedQuery || isOnlyLocation(query)) {\n        return { categories: [], listings: [] };\n      }\n\n      const searchTerm = strippedQuery.toLowerCase();\n\n      // Search categories by name AND search_terms - fetch all and filter in JS\n      const { data: allCategories, error: catError } = await supabase\n        .from(\"categories\")\n        .select(\"*\");\n\n      if (catError) throw catError;\n\n      // Filter categories that match name OR any search_term contains the search term\n      // Only include child categories (those with a parent_id)\n      // Exception: Include \"Venues\" parent category if search_terms match (for arena, concert hall, etc.)\n      const categories = (allCategories || [])\n        .filter((cat) => {\n          const nameMatch = cat.name.toLowerCase().includes(searchTerm);\n          \n          // Parse search_terms if it's a string\n          let searchTermsArray: string[] = [];\n          if (typeof cat.search_terms === 'string') {\n            try {\n              searchTermsArray = JSON.parse(cat.search_terms);\n            } catch {\n              searchTermsArray = [];\n            }\n          } else if (Array.isArray(cat.search_terms)) {\n            searchTermsArray = cat.search_terms;\n          }\n          \n          const searchTermsMatch = searchTermsArray.some((term: string) => {\n            const lowerTerm = term.toLowerCase().trim();\n            return lowerTerm.includes(searchTerm) || searchTerm.includes(lowerTerm);\n          });\n\n          // For parent categories, only include Venues and only if search_terms match\n          if (!cat.parent_id) {\n            const isVenues = cat.slug === \"venues\" || cat.url_slug === \"venues\";\n            return isVenues && searchTermsMatch;\n          }\n\n          // For child categories, include if name OR search_terms match\n          return nameMatch || searchTermsMatch;\n        })\n        // Sort by relevance: name matches first, then alphabetically\n        .sort((a, b) => {\n          const aNameMatch = a.name.toLowerCase().includes(searchTerm);\n          const bNameMatch = b.name.toLowerCase().includes(searchTerm);\n\n          // Name matches come first\n          if (aNameMatch && !bNameMatch) return -1;\n          if (!aNameMatch && bNameMatch) return 1;\n\n          // Within same match type, sort alphabetically\n          return a.name.localeCompare(b.name);\n        });\n\n      // Search listings using listings_public view\n      const { data: listings, error: listError } = await supabase\n        .from(\"listings_public\")\n        .select(\n          `\n          id,\n          name,\n          slug,\n          country,\n          town_city,\n          venue_type,\n          region_id\n        `,\n        )\n        .ilike(\"name\", `%${searchTerm}%`);\n\n      if (listError) throw listError;\n\n      // Get region slugs for listings that have region_id\n      const regionIds = [...new Set((listings || []).filter((l) => l.region_id).map((l) => l.region_id))] as number[];\n      let regionMap: Record<number, string> = {};\n\n      if (regionIds.length > 0) {\n        const { data: regions } = await supabase.from(\"regions\").select(\"id, region_slug\").in(\"id\", regionIds);\n\n        if (regions) {\n          regionMap = Object.fromEntries(regions.map((r) => [r.id, r.region_slug]));\n        }\n      }\n\n      // Add region_slug to listings\n      const flattenedListings = (listings || []).map((l) => ({\n        id: l.id,\n        name: l.name,\n        slug: l.slug,\n        country: l.country,\n        town_city: l.town_city,\n        venue_type: l.venue_type,\n        region_slug: l.region_id ? regionMap[l.region_id] || null : null,\n      })) as SearchListing[];\n\n      return {\n        categories: categories as Category[],\n        listings: flattenedListings,\n      };\n    },\n    enabled: query.length >= 2,\n    staleTime: 1000 * 60, // 1 minute\n  });\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3651, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/hooks/useDebounce.ts"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from \"react\";\r\n\r\nexport function useDebounce<T>(value: T, delay: number): T {\r\n  const [debouncedValue, setDebouncedValue] = useState<T>(value);\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setDebouncedValue(value);\r\n    }, delay);\r\n\r\n    return () => {\r\n      clearTimeout(timer);\r\n    };\r\n  }, [value, delay]);\r\n\r\n  return debouncedValue;\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;;AAFA;;AAIO,SAAS,YAAe,KAAQ,EAAE,KAAa;;IACpD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,6LAAQ,EAAI;IAExD,IAAA,8LAAS;iCAAC;YACR,MAAM,QAAQ;+CAAW;oBACvB,kBAAkB;gBACpB;8CAAG;YAEH;yCAAO;oBACL,aAAa;gBACf;;QACF;gCAAG;QAAC;QAAO;KAAM;IAEjB,OAAO;AACT;GAdgB","debugId":null}},
    {"offset": {"line": 3689, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/lib/countryAliases.ts"],"sourcesContent":["// Canonical slug  display name mapping\nexport const COUNTRY_ALIASES: Record<string, string> = {\n  'uk': 'United Kingdom',\n  'usa': 'United States',\n  'us': 'United States',\n};\n\n// Display name  preferred slug mapping\nexport const COUNTRY_PREFERRED_SLUGS: Record<string, string> = {\n  'United Kingdom': 'uk',\n  'United States': 'usa',\n  'USA': 'usa',\n};\n\n// Convert country name to URL slug (using preferred short form if available)\nexport function countryToSlug(country: string): string {\n  if (COUNTRY_PREFERRED_SLUGS[country]) {\n    return COUNTRY_PREFERRED_SLUGS[country];\n  }\n  return country\n    .toLowerCase()\n    .replace(/[^a-z0-9]+/g, '-')\n    .replace(/^-|-$/g, '');\n}\n\n// Convert URL slug to country name (handling aliases)\nexport function slugToCountry(slug: string, knownCountries: string[]): string | null {\n  // Check aliases first\n  const normalizedSlug = slug.toLowerCase();\n  if (COUNTRY_ALIASES[normalizedSlug]) {\n    return COUNTRY_ALIASES[normalizedSlug];\n  }\n  \n  // Fall back to matching against known countries\n  return knownCountries.find(c => \n    c.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-|-$/g, '') === normalizedSlug\n  ) || null;\n}\n"],"names":[],"mappings":"AAAA,wCAAwC;;;;;;;;;;;AACjC,MAAM,kBAA0C;IACrD,MAAM;IACN,OAAO;IACP,MAAM;AACR;AAGO,MAAM,0BAAkD;IAC7D,kBAAkB;IAClB,iBAAiB;IACjB,OAAO;AACT;AAGO,SAAS,cAAc,OAAe;IAC3C,IAAI,uBAAuB,CAAC,QAAQ,EAAE;QACpC,OAAO,uBAAuB,CAAC,QAAQ;IACzC;IACA,OAAO,QACJ,WAAW,GACX,OAAO,CAAC,eAAe,KACvB,OAAO,CAAC,UAAU;AACvB;AAGO,SAAS,cAAc,IAAY,EAAE,cAAwB;IAClE,sBAAsB;IACtB,MAAM,iBAAiB,KAAK,WAAW;IACvC,IAAI,eAAe,CAAC,eAAe,EAAE;QACnC,OAAO,eAAe,CAAC,eAAe;IACxC;IAEA,gDAAgD;IAChD,OAAO,eAAe,IAAI,CAAC,CAAA,IACzB,EAAE,WAAW,GAAG,OAAO,CAAC,eAAe,KAAK,OAAO,CAAC,UAAU,QAAQ,mBACnE;AACP","debugId":null}},
    {"offset": {"line": 3732, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/lib/continents.ts"],"sourcesContent":["// Continent configuration and country mappings\n\nexport const CONTINENT_COUNTRIES: Record<string, string[]> = {\n  Europe: [\n    // Western Europe\n    \"United Kingdom\",\n    \"Germany\",\n    \"France\",\n    \"Spain\",\n    \"Italy\",\n    \"The Netherlands\",\n    \"Belgium\",\n    \"Austria\",\n    \"Switzerland\",\n    \"Ireland\",\n    \"Portugal\",\n    \"Luxembourg\",\n    \"Gibraltar\",\n    // Northern Europe\n    \"Sweden\",\n    \"Norway\",\n    \"Denmark\",\n    \"Finland\",\n    \"Iceland\",\n    // Eastern Europe\n    \"Poland\",\n    \"Czech Republic\",\n    \"Slovak Republic\",\n    \"Slovakia\",\n    \"Hungary\",\n    \"Romania\",\n    \"Bulgaria\",\n    \"Russia\",\n    \"Ukraine\",\n    \"Belarus\",\n    \"Moldova\",\n    // Southern Europe\n    \"Greece\",\n    \"Croatia\",\n    \"Slovenia\",\n    \"Serbia\",\n    \"Bosnia and Herzegovina\",\n    \"Bosnia\",\n    \"Albania\",\n    \"North Macedonia\",\n    \"Macedonia\",\n    \"Montenegro\",\n    \"Kosovo\",\n    // Baltic States\n    \"Estonia\",\n    \"Latvia\",\n    \"Lithuania\",\n    // Other\n    \"Malta\",\n    \"Cyprus\",\n    \"Georgia\",\n    \"Armenia\",\n    \"Azerbaijan\",\n    \"Turkey\",\n    \"Andorra\",\n    \"Monaco\",\n    \"San Marino\",\n    \"Vatican City\",\n    \"Liechtenstein\",\n  ],\n  \"North America\": [\n    \"United States\",\n    \"Canada\",\n    \"Mexico\",\n    \"USA\",\n    \"US\",\n    \"Bahamas\",\n    \"Jamaica\",\n    \"Trinidad and Tobago\",\n    \"Barbados\",\n    \"Dominican Republic\",\n    \"Cuba\",\n    \"Haiti\",\n    \"Costa Rica\",\n    \"Panama\",\n    \"Guatemala\",\n    \"Honduras\",\n    \"El Salvador\",\n    \"Nicaragua\",\n    \"Belize\",\n    \"Puerto Rico\",\n    \"Cayman Islands\",\n    \"Bermuda\",\n  ],\n  Asia: [\n    // East Asia\n    \"Japan\",\n    \"South Korea\",\n    \"China\",\n    \"Taiwan\",\n    \"Hong Kong\",\n    \"Macau\",\n    \"Mongolia\",\n    // Southeast Asia\n    \"Singapore\",\n    \"Thailand\",\n    \"Malaysia\",\n    \"Indonesia\",\n    \"Philippines\",\n    \"Vietnam\",\n    \"Cambodia\",\n    \"Laos\",\n    \"Myanmar\",\n    \"Brunei\",\n    // South Asia\n    \"India\",\n    \"Pakistan\",\n    \"Bangladesh\",\n    \"Sri Lanka\",\n    \"Nepal\",\n    \"Bhutan\",\n    \"Maldives\",\n    // Central Asia\n    \"Kazakhstan\",\n    \"Uzbekistan\",\n    \"Turkmenistan\",\n    \"Kyrgyzstan\",\n    \"Tajikistan\",\n    // Middle East\n    \"United Arab Emirates\",\n    \"UAE\",\n    \"Israel\",\n    \"Saudi Arabia\",\n    \"Qatar\",\n    \"Kuwait\",\n    \"Bahrain\",\n    \"Oman\",\n    \"Jordan\",\n    \"Lebanon\",\n    \"Iraq\",\n    \"Iran\",\n    \"Yemen\",\n    \"Syria\",\n  ],\n  \"South America\": [\n    \"Brazil\",\n    \"Argentina\",\n    \"Chile\",\n    \"Colombia\",\n    \"Peru\",\n    \"Venezuela\",\n    \"Ecuador\",\n    \"Uruguay\",\n    \"Paraguay\",\n    \"Bolivia\",\n    \"Guyana\",\n    \"Suriname\",\n    \"French Guiana\",\n  ],\n  Oceania: [\n    \"Australia\",\n    \"New Zealand\",\n    \"Fiji\",\n    \"Papua New Guinea\",\n    \"Solomon Islands\",\n    \"Vanuatu\",\n    \"Samoa\",\n    \"Tonga\",\n    \"Micronesia\",\n    \"Palau\",\n    \"Marshall Islands\",\n    \"Kiribati\",\n    \"Nauru\",\n    \"Tuvalu\",\n  ],\n  Africa: [\n    // Northern Africa\n    \"Egypt\",\n    \"Morocco\",\n    \"Tunisia\",\n    \"Algeria\",\n    \"Libya\",\n    \"Sudan\",\n    // Western Africa\n    \"Nigeria\",\n    \"Ghana\",\n    \"Senegal\",\n    \"Ivory Coast\",\n    \"Mali\",\n    \"Burkina Faso\",\n    \"Guinea\",\n    \"Benin\",\n    \"Togo\",\n    \"Sierra Leone\",\n    \"Liberia\",\n    \"Mauritania\",\n    \"Niger\",\n    \"Gambia\",\n    \"Guinea-Bissau\",\n    \"Cape Verde\",\n    // Eastern Africa\n    \"Kenya\",\n    \"Ethiopia\",\n    \"Tanzania\",\n    \"Uganda\",\n    \"Rwanda\",\n    \"Burundi\",\n    \"Somalia\",\n    \"Djibouti\",\n    \"Eritrea\",\n    \"South Sudan\",\n    \"Seychelles\",\n    \"Mauritius\",\n    // Southern Africa\n    \"South Africa\",\n    \"Namibia\",\n    \"Botswana\",\n    \"Zimbabwe\",\n    \"Zambia\",\n    \"Mozambique\",\n    \"Angola\",\n    \"Malawi\",\n    \"Lesotho\",\n    \"Eswatini\",\n    \"Madagascar\",\n    \"Comoros\",\n    // Central Africa\n    \"Democratic Republic of the Congo\",\n    \"Republic of the Congo\",\n    \"Cameroon\",\n    \"Central African Republic\",\n    \"Chad\",\n    \"Gabon\",\n    \"Equatorial Guinea\",\n    \"Sao Tome and Principe\",\n  ],\n};\n\nexport const CONTINENT_COLORS: Record<string, string> = {\n  Europe: \"#ef4444\", // Red\n  \"North America\": \"#f97316\", // Orange\n  \"South America\": \"#eab308\", // Gold\n  Asia: \"#22c55e\", // Green\n  Africa: \"#14b8a6\", // Teal\n  Oceania: \"#0ea5e9\", // Sky blue\n};\n\nexport const CONTINENT_ORDER = [\"Europe\", \"North America\", \"Asia\", \"South America\", \"Oceania\", \"Africa\"];\n\nexport function getContinent(country: string): string | undefined {\n  for (const [continent, countries] of Object.entries(CONTINENT_COUNTRIES)) {\n    if (countries.includes(country)) return continent;\n  }\n  return undefined;\n}\n\nexport function getContinentCountries(continent: string): string[] {\n  return CONTINENT_COUNTRIES[continent] || [];\n}\n\nexport function getContinentSlug(continent: string): string {\n  return continent.toLowerCase().replace(/\\s+/g, \"-\");\n}\n\nexport function getContinentFromSlug(slug: string): string | undefined {\n  const normalized = slug.toLowerCase();\n  return CONTINENT_ORDER.find((c) => getContinentSlug(c) === normalized);\n}\n"],"names":[],"mappings":"AAAA,+CAA+C;;;;;;;;;;;;;;;;;AAExC,MAAM,sBAAgD;IAC3D,QAAQ;QACN,iBAAiB;QACjB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,kBAAkB;QAClB;QACA;QACA;QACA;QACA;QACA,iBAAiB;QACjB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,kBAAkB;QAClB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,gBAAgB;QAChB;QACA;QACA;QACA,QAAQ;QACR;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,iBAAiB;QACf;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,MAAM;QACJ,YAAY;QACZ;QACA;QACA;QACA;QACA;QACA;QACA;QACA,iBAAiB;QACjB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,aAAa;QACb;QACA;QACA;QACA;QACA;QACA;QACA;QACA,eAAe;QACf;QACA;QACA;QACA;QACA;QACA,cAAc;QACd;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,iBAAiB;QACf;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,SAAS;QACP;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,QAAQ;QACN,kBAAkB;QAClB;QACA;QACA;QACA;QACA;QACA;QACA,iBAAiB;QACjB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,iBAAiB;QACjB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,kBAAkB;QAClB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,iBAAiB;QACjB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;AACH;AAEO,MAAM,mBAA2C;IACtD,QAAQ;IACR,iBAAiB;IACjB,iBAAiB;IACjB,MAAM;IACN,QAAQ;IACR,SAAS;AACX;AAEO,MAAM,kBAAkB;IAAC;IAAU;IAAiB;IAAQ;IAAiB;IAAW;CAAS;AAEjG,SAAS,aAAa,OAAe;IAC1C,KAAK,MAAM,CAAC,WAAW,UAAU,IAAI,OAAO,OAAO,CAAC,qBAAsB;QACxE,IAAI,UAAU,QAAQ,CAAC,UAAU,OAAO;IAC1C;IACA,OAAO;AACT;AAEO,SAAS,sBAAsB,SAAiB;IACrD,OAAO,mBAAmB,CAAC,UAAU,IAAI,EAAE;AAC7C;AAEO,SAAS,iBAAiB,SAAiB;IAChD,OAAO,UAAU,WAAW,GAAG,OAAO,CAAC,QAAQ;AACjD;AAEO,SAAS,qBAAqB,IAAY;IAC/C,MAAM,aAAa,KAAK,WAAW;IACnC,OAAO,gBAAgB,IAAI,CAAC,CAAC,IAAM,iBAAiB,OAAO;AAC7D","debugId":null}},
    {"offset": {"line": 4018, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/lib/cityRegions.ts"],"sourcesContent":["/**\n * City-Regions: Regions that contain only one city with the same name.\n * These are treated as cities, not regions, to avoid redundant URLs like /london/london.\n *\n * For these regions:\n * - /uk/london is the city page (not region page)\n * - /uk/london/london redirects to /uk/london\n * - Breadcrumbs show: UK > London (not UK > London > London)\n *\n * Proximity Configuration:\n * - City-regions use larger proximity radius (metropolitan areas)\n * - Regular cities use smaller default radius\n * - Proximity shows venues within radius, not just exact city match\n */\n\n// Default proximity radii (in kilometers)\nexport const DEFAULT_CITY_PROXIMITY_KM = 25; // Regular cities (Manchester, Birmingham)\nexport const DEFAULT_CITY_REGION_PROXIMITY_KM = 40; // City-regions (London, NYC)\n\ninterface CityRegionConfig {\n  country: string;\n  countryAliases: string[];\n  region: string;\n  regionSlug: string;\n  proximityRadiusKm?: number; // Optional override - uses DEFAULT_CITY_REGION_PROXIMITY_KM if not set\n}\n\nconst CITY_REGIONS: CityRegionConfig[] = [\n  {\n    country: \"United Kingdom\",\n    countryAliases: [\"uk\", \"united kingdom\"],\n    region: \"London\",\n    regionSlug: \"london\",\n  },\n  {\n    country: \"United States\",\n    countryAliases: [\"usa\", \"united states\", \"us\"],\n    region: \"New York\",\n    regionSlug: \"new-york\",\n    proximityRadiusKm: 50, // Large metro area - includes Newark, Jersey City, parts of Long Island\n  },\n];\n\n/**\n * Check if a region is a \"city-region\" - a region that should be treated as a city\n * because it only contains one city with the same name.\n *\n * @param country - Country name or slug (e.g., \"United Kingdom\", \"uk\")\n * @param region - Region name or slug (e.g., \"London\", \"london\")\n * @returns true if this region should be treated as a city\n */\nexport function isCityRegion(country: string | null, region: string | null): boolean {\n  if (!country || !region) return false;\n\n  const normalizedCountry = country.toLowerCase();\n  const normalizedRegion = region.toLowerCase();\n\n  return CITY_REGIONS.some((config) => {\n    const countryMatches =\n      config.country.toLowerCase() === normalizedCountry || config.countryAliases.includes(normalizedCountry);\n\n    const regionMatches = config.region.toLowerCase() === normalizedRegion || config.regionSlug === normalizedRegion;\n\n    return countryMatches && regionMatches;\n  });\n}\n\n/**\n * Get the city-region configuration for a given country/region combination\n */\nexport function getCityRegionConfig(country: string | null, region: string | null): CityRegionConfig | null {\n  if (!country || !region) return null;\n\n  const normalizedCountry = country.toLowerCase();\n  const normalizedRegion = region.toLowerCase();\n\n  return (\n    CITY_REGIONS.find((config) => {\n      const countryMatches =\n        config.country.toLowerCase() === normalizedCountry || config.countryAliases.includes(normalizedCountry);\n\n      const regionMatches = config.region.toLowerCase() === normalizedRegion || config.regionSlug === normalizedRegion;\n\n      return countryMatches && regionMatches;\n    }) || null\n  );\n}\n\n/**\n * Get the display name for a city-region (always returns the city name)\n */\nexport function getCityRegionDisplayName(country: string | null, region: string | null): string | null {\n  const config = getCityRegionConfig(country, region);\n  return config?.region || null;\n}\n\n/**\n * Get the proximity radius for a city-region\n * Returns the configured radius or default if not specified\n */\nexport function getCityRegionProximityRadius(country: string | null, region: string | null): number {\n  const config = getCityRegionConfig(country, region);\n  return config?.proximityRadiusKm || DEFAULT_CITY_REGION_PROXIMITY_KM;\n}\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;CAaC,GAED,0CAA0C;;;;;;;;;;;;;;;AACnC,MAAM,4BAA4B,IAAI,0CAA0C;AAChF,MAAM,mCAAmC,IAAI,6BAA6B;AAUjF,MAAM,eAAmC;IACvC;QACE,SAAS;QACT,gBAAgB;YAAC;YAAM;SAAiB;QACxC,QAAQ;QACR,YAAY;IACd;IACA;QACE,SAAS;QACT,gBAAgB;YAAC;YAAO;YAAiB;SAAK;QAC9C,QAAQ;QACR,YAAY;QACZ,mBAAmB;IACrB;CACD;AAUM,SAAS,aAAa,OAAsB,EAAE,MAAqB;IACxE,IAAI,CAAC,WAAW,CAAC,QAAQ,OAAO;IAEhC,MAAM,oBAAoB,QAAQ,WAAW;IAC7C,MAAM,mBAAmB,OAAO,WAAW;IAE3C,OAAO,aAAa,IAAI,CAAC,CAAC;QACxB,MAAM,iBACJ,OAAO,OAAO,CAAC,WAAW,OAAO,qBAAqB,OAAO,cAAc,CAAC,QAAQ,CAAC;QAEvF,MAAM,gBAAgB,OAAO,MAAM,CAAC,WAAW,OAAO,oBAAoB,OAAO,UAAU,KAAK;QAEhG,OAAO,kBAAkB;IAC3B;AACF;AAKO,SAAS,oBAAoB,OAAsB,EAAE,MAAqB;IAC/E,IAAI,CAAC,WAAW,CAAC,QAAQ,OAAO;IAEhC,MAAM,oBAAoB,QAAQ,WAAW;IAC7C,MAAM,mBAAmB,OAAO,WAAW;IAE3C,OACE,aAAa,IAAI,CAAC,CAAC;QACjB,MAAM,iBACJ,OAAO,OAAO,CAAC,WAAW,OAAO,qBAAqB,OAAO,cAAc,CAAC,QAAQ,CAAC;QAEvF,MAAM,gBAAgB,OAAO,MAAM,CAAC,WAAW,OAAO,oBAAoB,OAAO,UAAU,KAAK;QAEhG,OAAO,kBAAkB;IAC3B,MAAM;AAEV;AAKO,SAAS,yBAAyB,OAAsB,EAAE,MAAqB;IACpF,MAAM,SAAS,oBAAoB,SAAS;IAC5C,OAAO,CAAA,mBAAA,6BAAA,OAAQ,MAAM,KAAI;AAC3B;AAMO,SAAS,6BAA6B,OAAsB,EAAE,MAAqB;IACxF,MAAM,SAAS,oBAAoB,SAAS;IAC5C,OAAO,CAAA,mBAAA,6BAAA,OAAQ,iBAAiB,KAAI;AACtC","debugId":null}},
    {"offset": {"line": 4105, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/lib/venueUrlUtils.ts"],"sourcesContent":["'use client';\n\nimport { CONTINENT_COUNTRIES, getContinentSlug } from './continents';\r\nimport { countryToSlug, slugToCountry } from './countryAliases';\r\nimport { isCityRegion } from './cityRegions';\r\n\r\n// Convert display name to URL slug\r\nexport function toSlug(name: string): string {\r\n  return name\r\n    .toLowerCase()\r\n    .replace(/[^a-z0-9]+/g, '-')\r\n    .replace(/^-|-$/g, '');\r\n}\r\n\r\n// Convert slug back to display name by matching against known values\r\nexport function fromSlug(slug: string, knownValues: string[]): string | null {\r\n  const normalized = slug.toLowerCase();\r\n  return knownValues.find(v => toSlug(v) === normalized) || null;\r\n}\r\n\r\n// Convert country slug back to display name (with alias support)\r\nexport function fromCountrySlug(slug: string, knownCountries: string[]): string | null {\r\n  return slugToCountry(slug, knownCountries);\r\n}\r\n\r\n// Get continent from country\r\nexport function getContinentForCountry(country: string): string | null {\r\n  for (const [continent, countries] of Object.entries(CONTINENT_COUNTRIES)) {\r\n    if (countries.includes(country)) {\r\n      return continent;\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\n// Countries that have regions configured (normalized names)\r\nexport const COUNTRIES_WITH_REGIONS = ['UK', 'United Kingdom', 'USA', 'United States'];\r\n\r\nexport function countryHasRegions(country: string): boolean {\r\n  return COUNTRIES_WITH_REGIONS.some(c => \r\n    c.toLowerCase() === country.toLowerCase()\r\n  );\r\n}\r\n\r\n// Build venue URL from location parameters\r\n// For city-regions (London, New York), the region IS the city - don't add city segment\r\nexport function buildVenueUrl(params: {\r\n  continent?: string | null;\r\n  country?: string | null;\r\n  regionSlug?: string | null;\r\n  city?: string | null;\r\n}): string {\r\n  const parts = ['/venues'];\r\n  \r\n  if (params.continent) {\r\n    parts.push(getContinentSlug(params.continent));\r\n    \r\n    if (params.country) {\r\n      parts.push(countryToSlug(params.country));\r\n      \r\n      if (params.regionSlug) {\r\n        parts.push(params.regionSlug);\r\n        \r\n        // For city-regions, skip the city segment (region IS the city)\r\n        if (!isCityRegion(params.country, params.regionSlug) && params.city) {\r\n          parts.push(toSlug(params.city));\r\n        }\r\n      } else if (params.city) {\r\n        parts.push(toSlug(params.city));\r\n      }\r\n    }\r\n  }\r\n  \r\n  return parts.join('/');\r\n}\r\n\r\n// Re-export for convenience\r\nexport { isCityRegion } from './cityRegions';\r\nexport { countryToSlug } from './countryAliases';\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAJA;;;;AAOO,SAAS,OAAO,IAAY;IACjC,OAAO,KACJ,WAAW,GACX,OAAO,CAAC,eAAe,KACvB,OAAO,CAAC,UAAU;AACvB;AAGO,SAAS,SAAS,IAAY,EAAE,WAAqB;IAC1D,MAAM,aAAa,KAAK,WAAW;IACnC,OAAO,YAAY,IAAI,CAAC,CAAA,IAAK,OAAO,OAAO,eAAe;AAC5D;AAGO,SAAS,gBAAgB,IAAY,EAAE,cAAwB;IACpE,OAAO,IAAA,oKAAa,EAAC,MAAM;AAC7B;AAGO,SAAS,uBAAuB,OAAe;IACpD,KAAK,MAAM,CAAC,WAAW,UAAU,IAAI,OAAO,OAAO,CAAC,sKAAmB,EAAG;QACxE,IAAI,UAAU,QAAQ,CAAC,UAAU;YAC/B,OAAO;QACT;IACF;IACA,OAAO;AACT;AAGO,MAAM,yBAAyB;IAAC;IAAM;IAAkB;IAAO;CAAgB;AAE/E,SAAS,kBAAkB,OAAe;IAC/C,OAAO,uBAAuB,IAAI,CAAC,CAAA,IACjC,EAAE,WAAW,OAAO,QAAQ,WAAW;AAE3C;AAIO,SAAS,cAAc,MAK7B;IACC,MAAM,QAAQ;QAAC;KAAU;IAEzB,IAAI,OAAO,SAAS,EAAE;QACpB,MAAM,IAAI,CAAC,IAAA,mKAAgB,EAAC,OAAO,SAAS;QAE5C,IAAI,OAAO,OAAO,EAAE;YAClB,MAAM,IAAI,CAAC,IAAA,oKAAa,EAAC,OAAO,OAAO;YAEvC,IAAI,OAAO,UAAU,EAAE;gBACrB,MAAM,IAAI,CAAC,OAAO,UAAU;gBAE5B,+DAA+D;gBAC/D,IAAI,CAAC,IAAA,gKAAY,EAAC,OAAO,OAAO,EAAE,OAAO,UAAU,KAAK,OAAO,IAAI,EAAE;oBACnE,MAAM,IAAI,CAAC,OAAO,OAAO,IAAI;gBAC/B;YACF,OAAO,IAAI,OAAO,IAAI,EAAE;gBACtB,MAAM,IAAI,CAAC,OAAO,OAAO,IAAI;YAC/B;QACF;IACF;IAEA,OAAO,MAAM,IAAI,CAAC;AACpB","debugId":null}},
    {"offset": {"line": 4185, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/lib/buildVenueUrl.ts"],"sourcesContent":["'use client';\n\nimport { countryToSlug } from \"./countryAliases\";\r\nimport { getContinentSlug } from \"./continents\";\r\nimport { getContinentForCountry, toSlug } from \"./venueUrlUtils\";\r\nimport { isCityRegion } from \"./cityRegions\";\r\n\r\ninterface VenueUrlParams {\r\n  slug: string;\r\n  country: string | null;\r\n  regionSlug: string | null;\r\n  city: string | null;\r\n}\r\n\r\n/**\r\n * Builds the full SEO-friendly URL path for a venue\r\n * Example output: /venues/europe/uk/south-east/london/o2-arena\r\n *\r\n * For city-regions (London, New York), skip the redundant city segment:\r\n * /venues/europe/uk/london/o2-arena (not /venues/europe/uk/london/london/o2-arena)\r\n */\r\nexport function buildVenueProfileUrl(venue: VenueUrlParams): string {\r\n  const { slug, country, regionSlug, city } = venue;\r\n\r\n  // Fallback to basic listing URL if we don't have location data\r\n  if (!country) {\r\n    return `/listing/${slug}`;\r\n  }\r\n\r\n  let continent = getContinentForCountry(country);\r\n\r\n  // Fallback: If country not in mapping, try to infer continent from country name patterns\r\n  if (!continent) {\r\n    console.warn(`Country \"${country}\" not found in continent mapping, using fallback`);\r\n\r\n    // Try to infer from common patterns or default to listing URL\r\n    const countryLower = country.toLowerCase();\r\n    if (countryLower.includes(\"island\") || countryLower.includes(\"pacific\")) {\r\n      continent = \"Oceania\";\r\n    } else if (\r\n      countryLower.includes(\"africa\") ||\r\n      [\"nigeria\", \"ghana\", \"kenya\", \"egypt\"].some((c) => countryLower.includes(c))\r\n    ) {\r\n      continent = \"Africa\";\r\n    } else if (\r\n      [\"arab\", \"dubai\", \"saudi\", \"qatar\", \"israel\", \"jordan\", \"lebanon\"].some((c) => countryLower.includes(c))\r\n    ) {\r\n      continent = \"Asia\";\r\n    } else {\r\n      // If we really can't determine, fall back to listing URL\r\n      return `/listing/${slug}`;\r\n    }\r\n  }\r\n\r\n  const parts = [\"/venues\", getContinentSlug(continent), countryToSlug(country)];\r\n\r\n  // Add region if present\r\n  if (regionSlug) {\r\n    parts.push(regionSlug);\r\n\r\n    // For city-regions (London, New York), the region IS the city - don't add city segment\r\n    // This prevents URLs like /uk/london/london/venue-name\r\n    if (!isCityRegion(country, regionSlug)) {\r\n      // Only add city if it's not a city-region\r\n      if (city) {\r\n        parts.push(toSlug(city));\r\n      }\r\n    }\r\n  } else if (city) {\r\n    // No region, just add city\r\n    parts.push(toSlug(city));\r\n  }\r\n\r\n  // Add venue slug\r\n  parts.push(slug);\r\n\r\n  return parts.join(\"/\");\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AALA;;;;;AAqBO,SAAS,qBAAqB,KAAqB;IACxD,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,UAAU,EAAE,IAAI,EAAE,GAAG;IAE5C,+DAA+D;IAC/D,IAAI,CAAC,SAAS;QACZ,OAAO,AAAC,YAAgB,OAAL;IACrB;IAEA,IAAI,YAAY,IAAA,4LAAsB,EAAC;IAEvC,yFAAyF;IACzF,IAAI,CAAC,WAAW;QACd,QAAQ,IAAI,CAAC,AAAC,YAAmB,OAAR,SAAQ;QAEjC,8DAA8D;QAC9D,MAAM,eAAe,QAAQ,WAAW;QACxC,IAAI,aAAa,QAAQ,CAAC,aAAa,aAAa,QAAQ,CAAC,YAAY;YACvE,YAAY;QACd,OAAO,IACL,aAAa,QAAQ,CAAC,aACtB;YAAC;YAAW;YAAS;YAAS;SAAQ,CAAC,IAAI,CAAC,CAAC,IAAM,aAAa,QAAQ,CAAC,KACzE;YACA,YAAY;QACd,OAAO,IACL;YAAC;YAAQ;YAAS;YAAS;YAAS;YAAU;YAAU;SAAU,CAAC,IAAI,CAAC,CAAC,IAAM,aAAa,QAAQ,CAAC,KACrG;YACA,YAAY;QACd,OAAO;YACL,yDAAyD;YACzD,OAAO,AAAC,YAAgB,OAAL;QACrB;IACF;IAEA,MAAM,QAAQ;QAAC;QAAW,IAAA,mKAAgB,EAAC;QAAY,IAAA,oKAAa,EAAC;KAAS;IAE9E,wBAAwB;IACxB,IAAI,YAAY;QACd,MAAM,IAAI,CAAC;QAEX,uFAAuF;QACvF,uDAAuD;QACvD,IAAI,CAAC,IAAA,gKAAY,EAAC,SAAS,aAAa;YACtC,0CAA0C;YAC1C,IAAI,MAAM;gBACR,MAAM,IAAI,CAAC,IAAA,4KAAM,EAAC;YACpB;QACF;IACF,OAAO,IAAI,MAAM;QACf,2BAA2B;QAC3B,MAAM,IAAI,CAAC,IAAA,4KAAM,EAAC;IACpB;IAEA,iBAAiB;IACjB,MAAM,IAAI,CAAC;IAEX,OAAO,MAAM,IAAI,CAAC;AACpB","debugId":null}},
    {"offset": {"line": 4265, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/SearchAutocomplete.tsx"],"sourcesContent":["'use client';\n\nimport { useRouter } from 'next/navigation';\nimport { useState, useRef, useEffect } from \"react\";\nimport { Search, Building2, FolderOpen, Loader2 } from \"lucide-react\";\nimport { Input } from \"@/components/ui/input\";\nimport { useSearchAutocomplete } from \"@/hooks/useSearchAutocomplete\";\nimport { useDebounce } from \"@/hooks/useDebounce\";\nimport { cn } from \"@/lib/utils\";\nimport { buildVenueProfileUrl } from \"@/lib/buildVenueUrl\";\n\ninterface SearchAutocompleteProps {\n  placeholder?: string;\n}\n\nexport function SearchAutocomplete({ placeholder = \"Search...\" }: SearchAutocompleteProps) {\n  const [query, setQuery] = useState(\"\");\n  const [isOpen, setIsOpen] = useState(false);\n  const [selectedIndex, setSelectedIndex] = useState(-1);\n  const debouncedQuery = useDebounce(query, 300);\n  const { data, isLoading } = useSearchAutocomplete(debouncedQuery);\n  const router = useRouter();\n  const inputRef = useRef<HTMLInputElement>(null);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n\n  const categories = data?.categories || [];\n  const listings = data?.listings || [];\n  const hasResults = categories.length > 0 || listings.length > 0;\n  const totalItems = categories.length + listings.length;\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      if (\n        dropdownRef.current &&\n        !dropdownRef.current.contains(e.target as Node) &&\n        inputRef.current &&\n        !inputRef.current.contains(e.target as Node)\n      ) {\n        setIsOpen(false);\n      }\n    };\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\n  }, []);\n\n  // Reset selection when results change\n  useEffect(() => {\n    setSelectedIndex(-1);\n  }, [debouncedQuery]);\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (!isOpen || !hasResults) {\n      if (e.key === \"Enter\" && query.trim()) {\n        if (isLoading) {\n          return;\n        }\n        // Single result = go directly to it\n        if (categories.length === 1 && listings.length === 0) {\n          // Single category, no listings\n          router.push(`/${categories[0].url_slug || categories[0].slug}`);\n        } else if (listings.length === 1 && categories.length === 0) {\n          // Single listing, no categories\n          router.push(getListingUrl(listings[0]));\n        } else {\n          // Multiple results or no results = go to search results page\n          router.push(`/search?q=${encodeURIComponent(query.trim())}`);\n        }\n        setIsOpen(false);\n        setQuery(\"\");\n      }\n      return;\n    }\n\n    switch (e.key) {\n      case \"ArrowDown\":\n        e.preventDefault();\n        setSelectedIndex((prev) => (prev < totalItems - 1 ? prev + 1 : 0));\n        break;\n      case \"ArrowUp\":\n        e.preventDefault();\n        setSelectedIndex((prev) => (prev > 0 ? prev - 1 : totalItems - 1));\n        break;\n      case \"Enter\":\n        e.preventDefault();\n        if (selectedIndex >= 0) {\n          handleSelect(selectedIndex);\n        } else if (query.trim()) {\n          if (isLoading) {\n            return;\n          }\n          // Single result = go directly to it\n          if (categories.length === 1 && listings.length === 0) {\n            // Single category, no listings\n            router.push(`/${categories[0].url_slug || categories[0].slug}`);\n          } else if (listings.length === 1 && categories.length === 0) {\n            // Single listing, no categories\n            router.push(getListingUrl(listings[0]));\n          } else {\n            // Multiple results or no results = go to search results page\n            router.push(`/search?q=${encodeURIComponent(query.trim())}`);\n          }\n          setIsOpen(false);\n          setQuery(\"\");\n        }\n        break;\n      case \"Escape\":\n        setIsOpen(false);\n        break;\n    }\n  };\n\n  // Build URL for a listing - use venue URL for venues, /listing/ for others\n  const getListingUrl = (listing: (typeof listings)[0]): string => {\n    if (listing.venue_type) {\n      // It's a venue - use SEO-friendly venue URL\n      return buildVenueProfileUrl({\n        slug: listing.slug,\n        country: listing.country,\n        regionSlug: listing.region_slug,\n        city: listing.town_city,\n      });\n    }\n    // Regular listing\n    return `/listing/${listing.slug}`;\n  };\n\n  const handleSelect = (index: number) => {\n    if (index < categories.length) {\n      // Category selected\n      const category = categories[index];\n      router.push(`/${category.url_slug || category.slug}`);\n    } else {\n      // Listing selected\n      const listing = listings[index - categories.length];\n      router.push(getListingUrl(listing));\n    }\n    setIsOpen(false);\n    setQuery(\"\");\n  };\n\n  const highlightMatch = (text: string) => {\n    if (!query) return text;\n    const regex = new RegExp(`(${query})`, \"gi\");\n    const parts = text.split(regex);\n    return parts.map((part, i) =>\n      part.toLowerCase() === query.toLowerCase() ? (\n        <span key={i} className=\"text-primary font-semibold\">\n          {part}\n        </span>\n      ) : (\n        part\n      ),\n    );\n  };\n\n  return (\n    <div className=\"relative w-full\">\n      <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-primary\" />\n      <Input\n        ref={inputRef}\n        type=\"search\"\n        placeholder={placeholder}\n        className=\"w-full pl-9 pr-9 bg-secondary/50 border-border focus-visible:border-primary focus-visible:ring-primary\"\n        value={query}\n        onChange={(e) => {\n          setQuery(e.target.value);\n          setIsOpen(true);\n        }}\n        onFocus={() => setIsOpen(true)}\n        onKeyDown={handleKeyDown}\n      />\n      {isLoading && <Loader2 className=\"absolute right-3 top-1/2 h-4 w-4 -translate-y-1/2 animate-spin text-primary\" />}\n      {/* Dropdown */}\n      {isOpen && query.length >= 2 && (\n        <div\n          ref={dropdownRef}\n          className=\"absolute top-full left-0 right-0 mt-1 bg-card border border-border rounded-md shadow-lg z-50 max-h-[400px] overflow-y-auto\"\n          onMouseLeave={() => setSelectedIndex(-1)}\n        >\n          {!hasResults && !isLoading && (\n            <div className=\"p-4 text-sm text-muted-foreground text-center\">No results found for \"{query}\"</div>\n          )}\n\n          {categories.length > 0 && (\n            <div>\n              <div className=\"px-3 py-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider bg-secondary/50\">\n                Categories\n              </div>\n              {categories.map((category, index) => (\n                <button\n                  key={category.id}\n                  className={cn(\n                    \"w-full flex items-center gap-3 px-3 py-2 text-left text-foreground hover:bg-primary/10 hover:text-primary transition-colors\",\n                    selectedIndex === index && \"bg-primary/10 text-primary\",\n                  )}\n                  onClick={() => handleSelect(index)}\n                  onMouseEnter={() => setSelectedIndex(index)}\n                >\n                  <FolderOpen className=\"h-4 w-4 text-primary shrink-0\" />\n                  <span className=\"truncate\">{highlightMatch(category.name)}</span>\n                </button>\n              ))}\n            </div>\n          )}\n\n          {listings.length > 0 && (\n            <div>\n              <div className=\"px-3 py-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider bg-secondary/50\">\n                Companies\n              </div>\n              {listings.map((listing, index) => {\n                const itemIndex = categories.length + index;\n                return (\n                  <button\n                    key={listing.id}\n                    className={cn(\n                      \"w-full flex items-center gap-3 px-3 py-2 text-left text-foreground hover:bg-primary/10 hover:text-primary transition-colors\",\n                      selectedIndex === itemIndex && \"bg-primary/10 text-primary\",\n                    )}\n                    onClick={() => handleSelect(itemIndex)}\n                    onMouseEnter={() => setSelectedIndex(itemIndex)}\n                  >\n                    <Building2 className=\"h-4 w-4 text-muted-foreground shrink-0\" />\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"truncate\">{highlightMatch(listing.name)}</div>\n                      {listing.town_city && (\n                        <div className=\"text-xs text-muted-foreground truncate\">\n                          {listing.town_city}\n                          {listing.country && `, ${listing.country}`}\n                        </div>\n                      )}\n                    </div>\n                  </button>\n                );\n              })}\n            </div>\n          )}\n\n          {hasResults && (\n            <button\n              className=\"w-full px-3 py-2 text-sm text-primary hover:bg-primary/10 transition-colors border-t border-border flex items-center justify-center gap-2\"\n              onClick={() => {\n                if (categories.length === 1 && listings.length === 0) {\n                  router.push(`/${categories[0].url_slug || categories[0].slug}`);\n                } else {\n                  router.push(`/search?q=${encodeURIComponent(query.trim())}`);\n                }\n                setIsOpen(false);\n              }}\n            >\n              <Search className=\"h-4 w-4\" />\n              {categories.length === 1 && listings.length === 0\n                ? `Go to ${categories[0].name}`\n                : `View all results for \"${query}\"`}\n            </button>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4643, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default: \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive: \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n);\n\nexport interface BadgeProps extends React.HTMLAttributes<HTMLSpanElement>, VariantProps<typeof badgeVariants> {}\n\nconst Badge = React.forwardRef<HTMLSpanElement, BadgeProps>(\n  ({ className, variant, ...props }, ref) => {\n    return <span ref={ref} className={cn(badgeVariants({ variant }), className)} {...props} />;\n  }\n);\nBadge.displayName = \"Badge\";\n\nexport { Badge, badgeVariants };\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,8LAAG,EACvB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,WAAW;YACX,aAAa;YACb,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAKF,MAAM,sBAAQ,+LAAgB,MAC5B,QAAmC;QAAlC,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAO;IAC/B,qBAAO,iNAAC;QAAK,KAAK;QAAK,WAAW,IAAA,gJAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AACxF;;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 4697, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/CategoryFilter.tsx"],"sourcesContent":["import Link from 'next/link';\nimport { Category } from \"@/types/database\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Folder } from \"lucide-react\";\n\ninterface CategoryFilterProps {\n  searchTerm: string;\n  categories: Category[];\n}\n\nexport function CategoryFilter({ searchTerm, categories }: CategoryFilterProps) {\n  if (categories.length === 0) return null;\n\n  return (\n    <div className=\"bg-card border rounded-lg p-4 space-y-3\">\n      <div className=\"flex items-center gap-2\">\n        <Folder className=\"h-5 w-5 text-primary\" />\n        <h2 className=\"font-semibold text-lg\">\n          Categories matching \"{searchTerm}\"\n        </h2>\n      </div>\n      <div className=\"flex flex-wrap gap-2\">\n        {categories.map((category) => (\n          <Link\n            key={category.id}\n            href={`/${category.url_slug || category.slug}`}\n          >\n            <Badge \n              variant=\"secondary\" \n              className=\"text-sm py-1.5 px-3 hover:bg-primary hover:text-primary-foreground transition-colors cursor-pointer\"\n            >\n              {category.name}\n            </Badge>\n          </Link>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AAEA;AACA;;;;;AAOO,SAAS,eAAe,KAA+C;QAA/C,EAAE,UAAU,EAAE,UAAU,EAAuB,GAA/C;IAC7B,IAAI,WAAW,MAAM,KAAK,GAAG,OAAO;IAEpC,qBACE,iNAAC;QAAI,WAAU;;0BACb,iNAAC;gBAAI,WAAU;;kCACb,iNAAC,uOAAM;wBAAC,WAAU;;;;;;kCAClB,iNAAC;wBAAG,WAAU;;4BAAwB;4BACd;4BAAW;;;;;;;;;;;;;0BAGrC,iNAAC;gBAAI,WAAU;0BACZ,WAAW,GAAG,CAAC,CAAC,yBACf,iNAAC,8LAAI;wBAEH,MAAM,AAAC,IAAsC,OAAnC,SAAS,QAAQ,IAAI,SAAS,IAAI;kCAE5C,cAAA,iNAAC,iKAAK;4BACJ,SAAQ;4BACR,WAAU;sCAET,SAAS,IAAI;;;;;;uBAPX,SAAS,EAAE;;;;;;;;;;;;;;;;AAc5B;KA5BgB","debugId":null}},
    {"offset": {"line": 4783, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/TierBadge.tsx"],"sourcesContent":["import { Star } from \"lucide-react\";\nimport { ListingTier } from \"@/types/database\";\nimport { cn } from \"@/lib/utils\";\n\ninterface TierBadgeProps {\n  tier: ListingTier;\n  showLabel?: boolean;\n  className?: string;\n}\n\nconst tierConfig = {\n  premier: {\n    label: \"Premier\",\n    colorClass: \"text-tier-premier\",\n    bgClass: \"bg-tier-premier/20 border-tier-premier/40\",\n    glowClass: \"shadow-glow-pink\",\n  },\n  enhanced: {\n    label: \"Enhanced\",\n    colorClass: \"text-tier-enhanced\",\n    bgClass: \"bg-tier-enhanced/20 border-tier-enhanced/40\",\n    glowClass: \"shadow-glow-cyan\",\n  },\n  free: {\n    label: \"Free\",\n    colorClass: \"text-tier-free\",\n    bgClass: \"bg-tier-free/20 border-tier-free/40\",\n    glowClass: \"\",\n  },\n};\n\nexport function TierBadge({ tier, showLabel = false, className }: TierBadgeProps) {\n  const config = tierConfig[tier];\n\n  return (\n    <div\n      className={cn(\n        \"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium border\",\n        config.bgClass,\n        config.colorClass,\n        tier !== 'free' && config.glowClass,\n        className\n      )}\n    >\n      <Star className=\"h-3 w-3 fill-current\" />\n      {showLabel && <span>{config.label}</span>}\n    </div>\n  );\n}\n\nexport function TierStar({ tier, className }: { tier: ListingTier; className?: string }) {\n  const config = tierConfig[tier];\n  \n  return (\n    <Star className={cn(\"h-4 w-4 fill-current\", config.colorClass, className)} />\n  );\n}"],"names":[],"mappings":";;;;;;;AAAA;AAEA;;;;AAQA,MAAM,aAAa;IACjB,SAAS;QACP,OAAO;QACP,YAAY;QACZ,SAAS;QACT,WAAW;IACb;IACA,UAAU;QACR,OAAO;QACP,YAAY;QACZ,SAAS;QACT,WAAW;IACb;IACA,MAAM;QACJ,OAAO;QACP,YAAY;QACZ,SAAS;QACT,WAAW;IACb;AACF;AAEO,SAAS,UAAU,KAAsD;QAAtD,EAAE,IAAI,EAAE,YAAY,KAAK,EAAE,SAAS,EAAkB,GAAtD;IACxB,MAAM,SAAS,UAAU,CAAC,KAAK;IAE/B,qBACE,iNAAC;QACC,WAAW,IAAA,gJAAE,EACX,sFACA,OAAO,OAAO,EACd,OAAO,UAAU,EACjB,SAAS,UAAU,OAAO,SAAS,EACnC;;0BAGF,iNAAC,iOAAI;gBAAC,WAAU;;;;;;YACf,2BAAa,iNAAC;0BAAM,OAAO,KAAK;;;;;;;;;;;;AAGvC;KAjBgB;AAmBT,SAAS,SAAS,KAA8D;QAA9D,EAAE,IAAI,EAAE,SAAS,EAA6C,GAA9D;IACvB,MAAM,SAAS,UAAU,CAAC,KAAK;IAE/B,qBACE,iNAAC,iOAAI;QAAC,WAAW,IAAA,gJAAE,EAAC,wBAAwB,OAAO,UAAU,EAAE;;;;;;AAEnE;MANgB","debugId":null}},
    {"offset": {"line": 4865, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/FavouriteButton.tsx"],"sourcesContent":["'use client';\n\nimport { Heart } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { useIsFavourite } from \"@/hooks/useFavourites\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { memo } from \"react\";\r\n\r\ninterface FavouriteButtonProps {\r\n  listingId: string;\r\n  size?: \"sm\" | \"md\" | \"default\";\r\n  variant?: \"ghost\" | \"outline\" | \"default\";\r\n  className?: string;\r\n}\r\n\r\nfunction FavouriteButtonComponent({ listingId, size = \"md\", variant = \"ghost\", className }: FavouriteButtonProps) {\r\n  const { isFavourite, toggle } = useIsFavourite(listingId);\r\n\r\n  const sizeClasses = size === \"sm\" ? \"h-8 w-8\" : size === \"default\" ? \"h-10 w-10\" : \"h-10 w-10\";\r\n  const iconSizeClasses = size === \"sm\" ? \"h-4 w-4\" : size === \"default\" ? \"h-5 w-5\" : \"h-5 w-5\";\r\n\r\n  return (\r\n    <Button\r\n      variant={variant}\r\n      size=\"icon\"\r\n      className={cn(sizeClasses, isFavourite && \"text-red-500 hover:text-red-600\", className)}\r\n      onClick={(e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        toggle();\r\n      }}\r\n    >\r\n      <Heart className={cn(iconSizeClasses, isFavourite && \"fill-current\")} />\r\n    </Button>\r\n  );\r\n}\r\n\r\nexport const FavouriteButton = memo(FavouriteButtonComponent);\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;;;AANA;;;;;;AAeA,SAAS,yBAAyB,KAA8E;QAA9E,EAAE,SAAS,EAAE,OAAO,IAAI,EAAE,UAAU,OAAO,EAAE,SAAS,EAAwB,GAA9E;;IAChC,MAAM,EAAE,WAAW,EAAE,MAAM,EAAE,GAAG,IAAA,sKAAc,EAAC;IAE/C,MAAM,cAAc,SAAS,OAAO,YAAY,SAAS,YAAY,cAAc;IACnF,MAAM,kBAAkB,SAAS,OAAO,YAAY,SAAS,YAAY,YAAY;IAErF,qBACE,iNAAC,mKAAM;QACL,SAAS;QACT,MAAK;QACL,WAAW,IAAA,gJAAE,EAAC,aAAa,eAAe,mCAAmC;QAC7E,SAAS,CAAC;YACR,EAAE,cAAc;YAChB,EAAE,eAAe;YACjB;QACF;kBAEA,cAAA,iNAAC,oOAAK;YAAC,WAAW,IAAA,gJAAE,EAAC,iBAAiB,eAAe;;;;;;;;;;;AAG3D;GApBS;;QACyB,sKAAc;;;KADvC;AAsBF,MAAM,gCAAkB,IAAA,yLAAI,EAAC","debugId":null}},
    {"offset": {"line": 4929, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/ListingRow.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\nimport { Listing, ListingPublic } from \"@/types/database\";\nimport { TierStar } from \"@/components/TierBadge\";\nimport { cn } from \"@/lib/utils\";\nimport { FavouriteButton } from \"@/components/FavouriteButton\";\n\ninterface ListingRowProps {\n  listing: Listing | ListingPublic;\n  locationMode: \"country\" | \"city\";\n  expandedId?: string | null;\n  onToggleExpand?: (id: string) => void;\n  index?: number;\n}\n\nexport function ListingRow({ listing, locationMode }: ListingRowProps) {\n  const router = useRouter();\n  const isPremier = listing.tier === \"premier\";\n  const isEnhanced = listing.tier === \"enhanced\";\n  const isFree = listing.tier === \"free\";\n\n  const location = locationMode === \"country\" ? listing.country : listing.town_city;\n\n  const handleClick = () => {\n    // All listings now have their own pages - navigate directly\n    router.push(`/listing/${listing.slug}`);\n  };\n\n  const NameContent = () => (\n    <span className=\"font-medium text-sm sm:text-base transition-colors duration-200\">{listing.name}</span>\n  );\n\n  // Tier-based styling\n  const rowStyles = cn(\n    // Base styles - transparent left border at rest, CSS handles hover color via data-tier\n    \"border-b border-border last:border-b-0 transition-all duration-200 border-l-[3px] border-l-transparent\",\n    // Background tint based on tier\n    isPremier && \"bg-primary/[0.03]\",\n    isEnhanced && \"bg-accent/[0.03]\",\n  );\n\n  // Tier-based hover styles\n  const hoverStyles = cn(\n    \"flex items-center justify-between px-3 py-2.5 sm:px-4 sm:py-3 gap-2 sm:gap-4 cursor-pointer transition-all duration-200 group\",\n    // Hover states based on tier\n    isPremier && \"hover:bg-primary/[0.08] hover:shadow-[0_0_20px_hsl(330_80%_55%/0.15)]\",\n    isEnhanced && \"hover:bg-accent/[0.08] hover:shadow-[0_0_20px_hsl(185_100%_50%/0.15)]\",\n    isFree && \"hover:bg-muted/50\",\n  );\n\n  return (\n    <div className={rowStyles} data-tier={listing.tier}>\n      {/* Main Row */}\n      <div className={hoverStyles} onClick={handleClick}>\n        {/* Mobile: Stack name and location */}\n        <div className=\"flex items-start sm:items-center gap-2 sm:gap-3 min-w-0 flex-1\">\n          <TierStar tier={listing.tier} className=\"flex-shrink-0 mt-0.5 sm:mt-0\" />\n\n          <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between min-w-0 flex-1 gap-0.5 sm:gap-4\">\n            {/* Name - all listings link to their profile page */}\n            <Link\n              href={`/listing/${listing.slug}`}\n              className=\"text-foreground group-hover:text-primary transition-colors duration-200\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <NameContent />\n            </Link>\n\n            {/* Location - below name on mobile, inline on desktop */}\n            {location && <span className=\"text-xs sm:text-sm text-muted-foreground flex-shrink-0\">{location}</span>}\n          </div>\n        </div>\n\n        {/* Favourite Button */}\n        <FavouriteButton listingId={listing.id} size=\"sm\" />\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AACA;AACA;;;AAPA;;;;;;AAiBO,SAAS,WAAW,KAA0C;QAA1C,EAAE,OAAO,EAAE,YAAY,EAAmB,GAA1C;;IACzB,MAAM,SAAS,IAAA,sKAAS;IACxB,MAAM,YAAY,QAAQ,IAAI,KAAK;IACnC,MAAM,aAAa,QAAQ,IAAI,KAAK;IACpC,MAAM,SAAS,QAAQ,IAAI,KAAK;IAEhC,MAAM,WAAW,iBAAiB,YAAY,QAAQ,OAAO,GAAG,QAAQ,SAAS;IAEjF,MAAM,cAAc;QAClB,4DAA4D;QAC5D,OAAO,IAAI,CAAC,AAAC,YAAwB,OAAb,QAAQ,IAAI;IACtC;IAEA,MAAM,cAAc,kBAClB,iNAAC;YAAK,WAAU;sBAAmE,QAAQ,IAAI;;;;;;IAGjG,qBAAqB;IACrB,MAAM,YAAY,IAAA,gJAAE,EAClB,uFAAuF;IACvF,0GACA,gCAAgC;IAChC,aAAa,qBACb,cAAc;IAGhB,0BAA0B;IAC1B,MAAM,cAAc,IAAA,gJAAE,EACpB,iIACA,6BAA6B;IAC7B,aAAa,yEACb,cAAc,yEACd,UAAU;IAGZ,qBACE,iNAAC;QAAI,WAAW;QAAW,aAAW,QAAQ,IAAI;kBAEhD,cAAA,iNAAC;YAAI,WAAW;YAAa,SAAS;;8BAEpC,iNAAC;oBAAI,WAAU;;sCACb,iNAAC,kKAAQ;4BAAC,MAAM,QAAQ,IAAI;4BAAE,WAAU;;;;;;sCAExC,iNAAC;4BAAI,WAAU;;8CAEb,iNAAC,8LAAI;oCACH,MAAM,AAAC,YAAwB,OAAb,QAAQ,IAAI;oCAC9B,WAAU;oCACV,SAAS,CAAC,IAAM,EAAE,eAAe;8CAEjC,cAAA,iNAAC;;;;;;;;;;gCAIF,0BAAY,iNAAC;oCAAK,WAAU;8CAA0D;;;;;;;;;;;;;;;;;;8BAK3F,iNAAC,+KAAe;oBAAC,WAAW,QAAQ,EAAE;oBAAE,MAAK;;;;;;;;;;;;;;;;;AAIrD;GA/DgB;;QACC,sKAAS;;;KADV","debugId":null}},
    {"offset": {"line": 5064, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/lib/supabasePagination.ts"],"sourcesContent":["const PAGE_SIZE = 1000;\r\n\r\n/**\r\n * Fetches all rows from a Supabase query by paginating through results.\r\n * Bypasses the server-side 1000 row limit by fetching in batches.\r\n * \r\n * @param baseQuery - A function that returns a fresh Supabase query builder\r\n * @param pageSize - Number of rows per page (default: 1000)\r\n * @returns Promise<T[]> - All rows combined from all pages\r\n */\r\nexport async function fetchAllRows<T>(\r\n  baseQuery: () => { range: (start: number, end: number) => PromiseLike<{ data: T[] | null; error: unknown }> },\r\n  pageSize = PAGE_SIZE\r\n): Promise<T[]> {\r\n  let allData: T[] = [];\r\n  let page = 0;\r\n  let hasMore = true;\r\n\r\n  while (hasMore) {\r\n    const start = page * pageSize;\r\n    const end = start + pageSize - 1;\r\n\r\n    // Create a fresh query for each page to avoid mutation issues\r\n    const result = await baseQuery().range(start, end);\r\n    \r\n    if (result.error) throw result.error;\r\n\r\n    const rows = result.data || [];\r\n    allData = [...allData, ...rows];\r\n    \r\n    // If we got fewer rows than requested, we've reached the end\r\n    hasMore = rows.length === pageSize;\r\n    page++;\r\n    \r\n    // Safety limit to prevent infinite loops (max 50 pages = 50,000 rows)\r\n    if (page >= 50) break;\r\n  }\r\n\r\n  return allData;\r\n}\r\n"],"names":[],"mappings":";;;;AAAA,MAAM,YAAY;AAUX,eAAe,aACpB,SAA6G;QAC7G,WAAA,iEAAW;IAEX,IAAI,UAAe,EAAE;IACrB,IAAI,OAAO;IACX,IAAI,UAAU;IAEd,MAAO,QAAS;QACd,MAAM,QAAQ,OAAO;QACrB,MAAM,MAAM,QAAQ,WAAW;QAE/B,8DAA8D;QAC9D,MAAM,SAAS,MAAM,YAAY,KAAK,CAAC,OAAO;QAE9C,IAAI,OAAO,KAAK,EAAE,MAAM,OAAO,KAAK;QAEpC,MAAM,OAAO,OAAO,IAAI,IAAI,EAAE;QAC9B,UAAU;eAAI;eAAY;SAAK;QAE/B,6DAA6D;QAC7D,UAAU,KAAK,MAAM,KAAK;QAC1B;QAEA,sEAAsE;QACtE,IAAI,QAAQ,IAAI;IAClB;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 5100, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/lib/geoUtils.ts"],"sourcesContent":["/**\n * Geographic utility functions for distance calculations and proximity filtering\n */\n\nexport interface Coordinates {\n  latitude: number;\n  longitude: number;\n}\n\n/**\n * Calculate distance between two points using Haversine formula\n * Returns distance in kilometers\n * \n * @param lat1 - Latitude of first point\n * @param lon1 - Longitude of first point\n * @param lat2 - Latitude of second point\n * @param lon2 - Longitude of second point\n * @returns Distance in kilometers\n */\nexport function haversineDistance(\n  lat1: number,\n  lon1: number,\n  lat2: number,\n  lon2: number\n): number {\n  const R = 6371; // Earth's radius in kilometers\n  \n  const dLat = toRadians(lat2 - lat1);\n  const dLon = toRadians(lon2 - lon1);\n  \n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(toRadians(lat1)) *\n      Math.cos(toRadians(lat2)) *\n      Math.sin(dLon / 2) *\n      Math.sin(dLon / 2);\n  \n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  \n  return R * c;\n}\n\n/**\n * Convert degrees to radians\n */\nfunction toRadians(degrees: number): number {\n  return (degrees * Math.PI) / 180;\n}\n\n/**\n * Check if a point is within a given radius of a center point\n * \n * @param centerLat - Latitude of center point\n * @param centerLon - Longitude of center point\n * @param pointLat - Latitude of point to check\n * @param pointLon - Longitude of point to check\n * @param radiusKm - Radius in kilometers\n * @returns true if point is within radius\n */\nexport function isWithinRadius(\n  centerLat: number,\n  centerLon: number,\n  pointLat: number,\n  pointLon: number,\n  radiusKm: number\n): boolean {\n  const distance = haversineDistance(centerLat, centerLon, pointLat, pointLon);\n  return distance <= radiusKm;\n}\n\n/**\n * Find the center point (mean latitude/longitude) of a collection of coordinates\n * Useful for finding city center from venues in that city\n * \n * @param coordinates - Array of coordinate objects\n * @returns Center point or null if no valid coordinates\n */\nexport function findCenterPoint(coordinates: Coordinates[]): Coordinates | null {\n  const validCoords = coordinates.filter(\n    (c) => c.latitude !== null && c.longitude !== null\n  );\n  \n  if (validCoords.length === 0) return null;\n  \n  const sumLat = validCoords.reduce((sum, c) => sum + c.latitude, 0);\n  const sumLon = validCoords.reduce((sum, c) => sum + c.longitude, 0);\n  \n  return {\n    latitude: sumLat / validCoords.length,\n    longitude: sumLon / validCoords.length,\n  };\n}\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;AAiBM,SAAS,kBACd,IAAY,EACZ,IAAY,EACZ,IAAY,EACZ,IAAY;IAEZ,MAAM,IAAI,MAAM,+BAA+B;IAE/C,MAAM,OAAO,UAAU,OAAO;IAC9B,MAAM,OAAO,UAAU,OAAO;IAE9B,MAAM,IACJ,KAAK,GAAG,CAAC,OAAO,KAAK,KAAK,GAAG,CAAC,OAAO,KACrC,KAAK,GAAG,CAAC,UAAU,SACjB,KAAK,GAAG,CAAC,UAAU,SACnB,KAAK,GAAG,CAAC,OAAO,KAChB,KAAK,GAAG,CAAC,OAAO;IAEpB,MAAM,IAAI,IAAI,KAAK,KAAK,CAAC,KAAK,IAAI,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI;IAErD,OAAO,IAAI;AACb;AAEA;;CAEC,GACD,SAAS,UAAU,OAAe;IAChC,OAAO,AAAC,UAAU,KAAK,EAAE,GAAI;AAC/B;AAYO,SAAS,eACd,SAAiB,EACjB,SAAiB,EACjB,QAAgB,EAChB,QAAgB,EAChB,QAAgB;IAEhB,MAAM,WAAW,kBAAkB,WAAW,WAAW,UAAU;IACnE,OAAO,YAAY;AACrB;AASO,SAAS,gBAAgB,WAA0B;IACxD,MAAM,cAAc,YAAY,MAAM,CACpC,CAAC,IAAM,EAAE,QAAQ,KAAK,QAAQ,EAAE,SAAS,KAAK;IAGhD,IAAI,YAAY,MAAM,KAAK,GAAG,OAAO;IAErC,MAAM,SAAS,YAAY,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,QAAQ,EAAE;IAChE,MAAM,SAAS,YAAY,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,SAAS,EAAE;IAEjE,OAAO;QACL,UAAU,SAAS,YAAY,MAAM;QACrC,WAAW,SAAS,YAAY,MAAM;IACxC;AACF","debugId":null}},
    {"offset": {"line": 5144, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/hooks/useListings.ts"],"sourcesContent":["'use client';\n\nimport { useQuery } from \"@tanstack/react-query\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport { Listing, ListingPublic, ListingTier } from \"@/types/database\";\nimport { stripLocationFromQuery, isOnlyLocation } from \"@/lib/searchUtils\";\nimport { fetchAllRows } from \"@/lib/supabasePagination\";\nimport { CONTINENT_COUNTRIES } from \"@/lib/continents\";\nimport { haversineDistance, findCenterPoint } from \"@/lib/geoUtils\";\nimport { isCityRegion, getCityRegionProximityRadius, DEFAULT_CITY_PROXIMITY_KM } from \"@/lib/cityRegions\";\n\ninterface UseListingsOptions {\n  categoryId?: string;\n  continent?: string;\n  country?: string;\n  regionId?: number;\n  city?: string;\n  letter?: string;\n  searchQuery?: string;\n}\n\nconst TIER_ORDER: Record<ListingTier, number> = {\n  premier: 0,\n  enhanced: 1,\n  free: 2,\n};\n\n// =============================================================================\n// SECURITY NOTE: All bulk queries use listings_public view (no contact data)\n// Single-listing queries use get_listing_by_slug RPC (includes contact data)\n// =============================================================================\n\nexport function useListings(options: UseListingsOptions = {}) {\n  const { categoryId, continent, country, regionId, city, letter, searchQuery } = options;\n\n  return useQuery({\n    queryKey: [\"listings\", options],\n    queryFn: async () => {\n      // Determine if we need proximity filtering\n      const needsCityProximityFilter = !!city && city !== \"all\" && !!country;\n      const needsRegionProximityFilter = !!regionId && !!country && !city;\n\n      // Use RPC for category-based queries to avoid URI length issues with large IN clauses\n      if (categoryId) {\n        // For proximity filtering, we need to fetch broader and filter client-side\n        // Otherwise, let RPC do the filtering (more efficient)\n        const { data, error } = await supabase.rpc(\"get_listings_by_category\", {\n          p_category_id: categoryId,\n          p_limit: 100000,\n          p_offset: 0,\n          p_country: country && country !== \"all\" ? country : null,\n          p_region_id: needsRegionProximityFilter ? null : regionId || null, // Don't filter by region if doing proximity\n          p_city: needsCityProximityFilter ? null : city && city !== \"all\" ? city : null, // Don't filter by city if doing proximity\n        });\n\n        if (error) throw error;\n\n        let listings = (data || []) as ListingPublic[];\n\n        // Apply continent filter client-side (RPC doesn't support it yet)\n        if (continent && !country) {\n          const continentCountries = CONTINENT_COUNTRIES[continent] || [];\n          listings = listings.filter((l) => l.country && continentCountries.includes(l.country));\n        }\n\n        // CITY PROXIMITY FILTERING (for category searches)\n        if (needsCityProximityFilter && city && country) {\n          const cityListings = listings.filter((l) => l.town_city === city && l.latitude && l.longitude);\n\n          if (cityListings.length > 0) {\n            const cityCenter = findCenterPoint(\n              cityListings.map((l) => ({ latitude: l.latitude!, longitude: l.longitude! })),\n            );\n\n            if (cityCenter) {\n              const radiusKm = DEFAULT_CITY_PROXIMITY_KM;\n\n              listings = listings.filter((listing) => {\n                // Always include exact city matches\n                if (listing.town_city === city) return true;\n\n                // Filter others by proximity\n                if (!listing.latitude || !listing.longitude) return false;\n\n                const distance = haversineDistance(\n                  cityCenter.latitude,\n                  cityCenter.longitude,\n                  listing.latitude,\n                  listing.longitude,\n                );\n\n                return distance <= radiusKm;\n              });\n            } else {\n              // Fallback to exact match\n              listings = listings.filter((l) => l.town_city === city);\n            }\n          } else {\n            // No listings with coordinates - exact match\n            listings = listings.filter((l) => l.town_city === city);\n          }\n        }\n\n        // REGION PROXIMITY FILTERING (for city-regions like London, NYC)\n        if (needsRegionProximityFilter && regionId && country) {\n          const { data: regionData } = await supabase\n            .from(\"regions\")\n            .select(\"region_slug, latitude, longitude\")\n            .eq(\"id\", regionId)\n            .single();\n\n          if (regionData && isCityRegion(country, regionData.region_slug)) {\n            if (regionData.latitude && regionData.longitude) {\n              const radiusKm = getCityRegionProximityRadius(country, regionData.region_slug);\n\n              listings = listings.filter((listing) => {\n                // Always include listings explicitly in this region\n                if (listing.region_id === regionId) return true;\n\n                // Filter others by proximity\n                if (!listing.latitude || !listing.longitude) return false;\n\n                const distance = haversineDistance(\n                  regionData.latitude,\n                  regionData.longitude,\n                  listing.latitude,\n                  listing.longitude,\n                );\n\n                return distance <= radiusKm;\n              });\n            } else {\n              // Region doesn't have coordinates - exact match\n              listings = listings.filter((l) => l.region_id === regionId);\n            }\n          } else {\n            // Not a city-region - exact region match\n            listings = listings.filter((l) => l.region_id === regionId);\n          }\n        }\n\n        // Apply letter filter client-side (RPC doesn't support it)\n        if (letter) {\n          listings = listings.filter((l) => l.name.toLowerCase().startsWith(letter.toLowerCase()));\n        }\n\n        // Apply search filter client-side\n        if (searchQuery) {\n          const strippedQuery = stripLocationFromQuery(searchQuery);\n          if (strippedQuery && !isOnlyLocation(searchQuery)) {\n            const lowerQuery = strippedQuery.toLowerCase();\n            listings = listings.filter((l) => l.name.toLowerCase().includes(lowerQuery));\n          }\n        }\n\n        return listings;\n      }\n\n      // Non-category queries use listings_public view (no sensitive data)\n      const data = await fetchAllRows<ListingPublic>(() => {\n        let query = supabase.from(\"listings_public\").select(\"*\");\n\n        if (country && country !== \"all\") {\n          query = query.eq(\"country\", country);\n        }\n\n        // For proximity filtering, we fetch broader and filter client-side\n        if (regionId && !needsRegionProximityFilter) {\n          query = query.eq(\"region_id\", regionId);\n        }\n\n        if (city && city !== \"all\" && !needsCityProximityFilter) {\n          query = query.eq(\"town_city\", city);\n        }\n\n        if (letter) {\n          query = query.ilike(\"name\", `${letter}%`);\n        }\n\n        if (searchQuery) {\n          const strippedQuery = stripLocationFromQuery(searchQuery);\n          if (strippedQuery && !isOnlyLocation(searchQuery)) {\n            query = query.ilike(\"name\", `%${strippedQuery}%`);\n          }\n        }\n\n        return query.order(\"name\");\n      });\n\n      let listings = data;\n\n      // CITY PROXIMITY FILTERING (for non-category searches)\n      if (needsCityProximityFilter && city && country) {\n        const cityListings = listings.filter((l) => l.town_city === city && l.latitude && l.longitude);\n\n        if (cityListings.length > 0) {\n          const cityCenter = findCenterPoint(\n            cityListings.map((l) => ({ latitude: l.latitude!, longitude: l.longitude! })),\n          );\n\n          if (cityCenter) {\n            const radiusKm = DEFAULT_CITY_PROXIMITY_KM;\n\n            listings = listings.filter((listing) => {\n              // Always include exact city matches\n              if (listing.town_city === city) return true;\n\n              // Filter others by proximity\n              if (!listing.latitude || !listing.longitude) return false;\n\n              const distance = haversineDistance(\n                cityCenter.latitude,\n                cityCenter.longitude,\n                listing.latitude,\n                listing.longitude,\n              );\n\n              return distance <= radiusKm;\n            });\n          } else {\n            // Fallback to exact match\n            listings = listings.filter((l) => l.town_city === city);\n          }\n        } else {\n          // No listings with coordinates - exact match\n          listings = listings.filter((l) => l.town_city === city);\n        }\n      }\n\n      // REGION PROXIMITY FILTERING (for city-regions like London, NYC)\n      if (needsRegionProximityFilter && regionId && country) {\n        const { data: regionData } = await supabase\n          .from(\"regions\")\n          .select(\"region_slug, latitude, longitude\")\n          .eq(\"id\", regionId)\n          .single();\n\n        if (regionData && isCityRegion(country, regionData.region_slug)) {\n          if (regionData.latitude && regionData.longitude) {\n            const radiusKm = getCityRegionProximityRadius(country, regionData.region_slug);\n\n            listings = listings.filter((listing) => {\n              // Always include listings explicitly in this region\n              if (listing.region_id === regionId) return true;\n\n              // Filter others by proximity\n              if (!listing.latitude || !listing.longitude) return false;\n\n              const distance = haversineDistance(\n                regionData.latitude,\n                regionData.longitude,\n                listing.latitude,\n                listing.longitude,\n              );\n\n              return distance <= radiusKm;\n            });\n          } else {\n            // Region doesn't have coordinates - exact match\n            listings = listings.filter((l) => l.region_id === regionId);\n          }\n        } else {\n          // Not a city-region - exact region match\n          listings = listings.filter((l) => l.region_id === regionId);\n        }\n      }\n\n      // Sort by tier (premier -> enhanced -> free), then alphabetically\n      listings = listings.sort((a, b) => {\n        const tierDiff = TIER_ORDER[a.tier] - TIER_ORDER[b.tier];\n        if (tierDiff !== 0) return tierDiff;\n        return a.name.localeCompare(b.name);\n      });\n\n      return listings;\n    },\n  });\n}\n\n// Uses RPC function to get single listing WITH contact data (secure single-record access)\nexport function useListingBySlug(slug: string, initialData?: any) {\n  return useQuery({\n    queryKey: [\"listing\", slug],\n    queryFn: async () => {\n      const { data, error } = await supabase.rpc(\"get_listing_by_slug\" as any, {\n        p_slug: slug,\n      });\n\n      if (error) throw error;\n\n      // RPC returns an array, get first item\n      const listing = Array.isArray(data) ? data[0] : data;\n      return listing as Listing | null;\n    },\n    enabled: !!slug,\n    initialData,\n  });\n}\n\nexport function useListingLocations(categoryId?: string) {\n  return useQuery({\n    queryKey: [\"listing-locations\", categoryId],\n    queryFn: async () => {\n      let categoryListingIds: string[] | null = null;\n      if (categoryId) {\n        const { data: listingIds } = await supabase\n          .from(\"listing_categories\")\n          .select(\"listing_id\")\n          .eq(\"category_id\", categoryId);\n\n        if (listingIds && listingIds.length > 0) {\n          categoryListingIds = listingIds.map((l) => l.listing_id);\n        }\n      }\n\n      // Use listings_public view\n      const data = await fetchAllRows<{ country: string | null; town_city: string | null }>(() => {\n        let query = supabase.from(\"listings_public\").select(\"country, town_city\");\n\n        if (categoryListingIds) {\n          query = query.in(\"id\", categoryListingIds);\n        }\n\n        return query;\n      });\n\n      const countries = [...new Set(data.map((d) => d.country).filter(Boolean))] as string[];\n      const cities = [...new Set(data.map((d) => d.town_city).filter(Boolean))] as string[];\n\n      return { countries: countries.sort(), cities: cities.sort() };\n    },\n  });\n}\n\nexport function useCitiesByCountry(categoryId?: string, country?: string) {\n  return useQuery({\n    queryKey: [\"cities-by-country\", categoryId, country],\n    queryFn: async () => {\n      if (!country) return [];\n\n      let categoryListingIds: string[] | null = null;\n      if (categoryId) {\n        const { data: listingIds } = await supabase\n          .from(\"listing_categories\")\n          .select(\"listing_id\")\n          .eq(\"category_id\", categoryId);\n\n        if (listingIds && listingIds.length > 0) {\n          categoryListingIds = listingIds.map((l) => l.listing_id);\n        } else {\n          return [];\n        }\n      }\n\n      // Use listings_public view\n      const data = await fetchAllRows<{ town_city: string | null }>(() => {\n        let query = supabase.from(\"listings_public\").select(\"town_city\").eq(\"country\", country);\n\n        if (categoryListingIds) {\n          query = query.in(\"id\", categoryListingIds);\n        }\n\n        return query;\n      });\n\n      const cities = [...new Set(data.map((d) => d.town_city).filter(Boolean))] as string[];\n      return cities.sort();\n    },\n    enabled: !!country,\n    staleTime: 5 * 60 * 1000,\n  });\n}\n\nexport function useGlobalCitiesByCountry(country?: string) {\n  return useQuery({\n    queryKey: [\"global-cities-by-country\", country],\n    queryFn: async () => {\n      if (!country) return [];\n\n      // Use listings_public view\n      const data = await fetchAllRows<{ town_city: string | null }>(() =>\n        supabase.from(\"listings_public\").select(\"town_city\").eq(\"country\", country),\n      );\n\n      const cities = [...new Set(data.map((d) => d.town_city).filter(Boolean))] as string[];\n      return cities.sort();\n    },\n    enabled: !!country,\n  });\n}\n\nfunction normalizeCountryForRegions(country: string): string {\n  if (country === \"United States\" || country === \"US\") {\n    return \"USA\";\n  }\n  if (country === \"United Kingdom\") {\n    return \"UK\";\n  }\n  return country;\n}\n\nexport function useRegionsByCountry(country?: string, categoryId?: string) {\n  return useQuery({\n    queryKey: [\"regions-by-country\", country, categoryId],\n    queryFn: async () => {\n      if (!country) return [];\n\n      const regionCountry = normalizeCountryForRegions(country);\n\n      let categoryListingIds: string[] | null = null;\n      if (categoryId) {\n        const { data: listingIds } = await supabase\n          .from(\"listing_categories\")\n          .select(\"listing_id\")\n          .eq(\"category_id\", categoryId);\n\n        if (listingIds && listingIds.length > 0) {\n          categoryListingIds = listingIds.map((l) => l.listing_id);\n        } else {\n          return [];\n        }\n      }\n\n      // Use listings_public view\n      const listingsWithRegions = await fetchAllRows<{ region_id: number | null }>(() => {\n        let query = supabase.from(\"listings_public\").select(\"region_id\").not(\"region_id\", \"is\", null);\n\n        if (categoryListingIds) {\n          query = query.in(\"id\", categoryListingIds);\n        }\n\n        return query;\n      });\n\n      const regionIds = [...new Set(listingsWithRegions?.map((l) => l.region_id).filter(Boolean))] as number[];\n\n      if (regionIds.length === 0) return [];\n\n      const { data, error } = await supabase\n        .from(\"regions\")\n        .select(\"id, region_name, region_slug\")\n        .eq(\"country\", regionCountry)\n        .in(\"id\", regionIds)\n        .order(\"region_name\");\n\n      if (error) throw error;\n      return data || [];\n    },\n    enabled: !!country,\n  });\n}\n\nexport function useCitiesByRegion(regionId?: number, categoryId?: string) {\n  return useQuery({\n    queryKey: [\"cities-by-region\", regionId, categoryId],\n    queryFn: async () => {\n      if (!regionId) return [];\n\n      let categoryListingIds: string[] | null = null;\n      if (categoryId) {\n        const { data: listingIds } = await supabase\n          .from(\"listing_categories\")\n          .select(\"listing_id\")\n          .eq(\"category_id\", categoryId);\n\n        if (listingIds && listingIds.length > 0) {\n          categoryListingIds = listingIds.map((l) => l.listing_id);\n        } else {\n          return [];\n        }\n      }\n\n      // Use listings_public view\n      const data = await fetchAllRows<{ town_city: string | null }>(() => {\n        let query = supabase.from(\"listings_public\").select(\"town_city\").eq(\"region_id\", regionId);\n\n        if (categoryListingIds) {\n          query = query.in(\"id\", categoryListingIds);\n        }\n\n        return query;\n      });\n\n      const cities = [...new Set(data.map((d) => d.town_city).filter(Boolean))] as string[];\n      return cities.sort();\n    },\n    enabled: !!regionId,\n    staleTime: 5 * 60 * 1000,\n  });\n}\n\nexport function useFeaturedListings() {\n  return useQuery({\n    queryKey: [\"featured-listings\"],\n    queryFn: async () => {\n      const { data: featuredSlots, error: slotsError } = await supabase\n        .from(\"homepage_featured_listings\")\n        .select(\"position, listing_id\")\n        .order(\"position\");\n\n      if (slotsError) throw slotsError;\n\n      const selectedIds = featuredSlots?.filter((slot) => slot.listing_id).map((slot) => slot.listing_id) as string[];\n\n      if (selectedIds && selectedIds.length > 0) {\n        // Use listings_public view\n        const { data: listings, error: listingsError } = await supabase\n          .from(\"listings_public\")\n          .select(\"*\")\n          .in(\"id\", selectedIds);\n\n        if (listingsError) throw listingsError;\n\n        const sortedListings = selectedIds\n          .map((id) => listings?.find((l) => l.id === id))\n          .filter(Boolean) as ListingPublic[];\n\n        return sortedListings;\n      }\n\n      // Use listings_public view\n      const { data, error } = await supabase\n        .from(\"listings_public\")\n        .select(\"*\")\n        .eq(\"tier\", \"premier\")\n        .limit(6)\n        .order(\"name\");\n\n      if (error) throw error;\n      return data as ListingPublic[];\n    },\n  });\n}\n\nexport function useListingCategories(listingId?: string, initialData?: any[]) {\n  return useQuery({\n    queryKey: [\"listing-categories\", listingId],\n    queryFn: async () => {\n      if (!listingId) return [];\n\n      const { data, error } = await supabase\n        .from(\"listing_categories\")\n        .select(\"category_id, categories(*)\")\n        .eq(\"listing_id\", listingId);\n\n      if (error) throw error;\n\n      return data?.map((lc) => lc.categories).filter(Boolean) as import(\"@/types/database\").Category[];\n    },\n    enabled: !!listingId,\n    initialData,\n  });\n}\n\n// Uses listings_public view - NO contact data returned\nexport function useListingsByIds(ids: string[]) {\n  return useQuery({\n    queryKey: [\"listings\", \"by-ids\", ids],\n    queryFn: async () => {\n      if (ids.length === 0) return [];\n      // Use listings_public view - contact data will need separate fetch if needed\n      const { data, error } = await supabase.from(\"listings_public\").select(\"*\").in(\"id\", ids);\n      if (error) throw error;\n      return data as ListingPublic[];\n    },\n    enabled: ids.length > 0,\n  });\n}\n\nexport function useCountryCounts() {\n  return useQuery({\n    queryKey: [\"country-counts\"],\n    queryFn: async () => {\n      // Use listings_public view\n      const data = await fetchAllRows<{ country: string | null }>(() =>\n        supabase.from(\"listings_public\").select(\"country\"),\n      );\n\n      const counts: Record<string, number> = {};\n      data.forEach((d) => {\n        if (d.country) {\n          counts[d.country] = (counts[d.country] || 0) + 1;\n        }\n      });\n      return counts;\n    },\n  });\n}\n\nexport function useCategoryCountryCounts(categoryId?: string) {\n  return useQuery({\n    queryKey: [\"category-country-counts\", categoryId],\n    queryFn: async () => {\n      if (!categoryId) return {};\n\n      const { data: listingIds } = await supabase\n        .from(\"listing_categories\")\n        .select(\"listing_id\")\n        .eq(\"category_id\", categoryId);\n\n      if (!listingIds || listingIds.length === 0) return {};\n\n      // Use listings_public view\n      const data = await fetchAllRows<{ country: string | null }>(() =>\n        supabase\n          .from(\"listings_public\")\n          .select(\"country\")\n          .in(\n            \"id\",\n            listingIds.map((l) => l.listing_id),\n          ),\n      );\n\n      const counts: Record<string, number> = {};\n      data.forEach((d) => {\n        if (d.country) {\n          counts[d.country] = (counts[d.country] || 0) + 1;\n        }\n      });\n      return counts;\n    },\n    enabled: !!categoryId,\n  });\n}\n\nexport function useRegionCounts(country?: string) {\n  return useQuery({\n    queryKey: [\"region-counts\", country],\n    queryFn: async () => {\n      if (!country) return {};\n\n      // Use listings_public view\n      const data = await fetchAllRows<{ region_id: number | null }>(() =>\n        supabase.from(\"listings_public\").select(\"region_id\").eq(\"country\", country).not(\"region_id\", \"is\", null),\n      );\n\n      const counts: Record<number, number> = {};\n      data.forEach((d) => {\n        if (d.region_id) {\n          counts[d.region_id] = (counts[d.region_id] || 0) + 1;\n        }\n      });\n      return counts;\n    },\n    enabled: !!country,\n  });\n}\n\nexport function useCategoryRegionCounts(country?: string, categoryId?: string) {\n  return useQuery({\n    queryKey: [\"category-region-counts\", country, categoryId],\n    queryFn: async () => {\n      if (!country) return {};\n\n      let categoryListingIds: string[] | null = null;\n      if (categoryId) {\n        const { data: listingIds } = await supabase\n          .from(\"listing_categories\")\n          .select(\"listing_id\")\n          .eq(\"category_id\", categoryId);\n\n        if (!listingIds || listingIds.length === 0) return {};\n        categoryListingIds = listingIds.map((l) => l.listing_id);\n      }\n\n      // Use listings_public view\n      const data = await fetchAllRows<{ region_id: number | null }>(() => {\n        let query = supabase\n          .from(\"listings_public\")\n          .select(\"region_id\")\n          .eq(\"country\", country)\n          .not(\"region_id\", \"is\", null);\n\n        if (categoryListingIds) {\n          query = query.in(\"id\", categoryListingIds);\n        }\n\n        return query;\n      });\n\n      const counts: Record<number, number> = {};\n      data.forEach((d) => {\n        if (d.region_id) {\n          counts[d.region_id] = (counts[d.region_id] || 0) + 1;\n        }\n      });\n      return counts;\n    },\n    enabled: !!country,\n  });\n}\n\n// Continent counts for a specific category\nexport function useCategoryContinentCounts(categoryId?: string) {\n  return useQuery({\n    queryKey: [\"category-continent-counts\", categoryId],\n    queryFn: async () => {\n      if (!categoryId) return {};\n\n      const { data: listingIds } = await supabase\n        .from(\"listing_categories\")\n        .select(\"listing_id\")\n        .eq(\"category_id\", categoryId);\n\n      if (!listingIds || listingIds.length === 0) return {};\n\n      // Use listings_public view\n      const data = await fetchAllRows<{ continent: string | null }>(() =>\n        supabase\n          .from(\"listings_public\")\n          .select(\"continent\")\n          .in(\n            \"id\",\n            listingIds.map((l) => l.listing_id),\n          ),\n      );\n\n      const counts: Record<string, number> = {};\n      data.forEach((d) => {\n        if (d.continent) {\n          counts[d.continent] = (counts[d.continent] || 0) + 1;\n        }\n      });\n      return counts;\n    },\n    enabled: !!categoryId,\n    staleTime: 5 * 60 * 1000,\n  });\n}\n\n// Total listing count for a category\nexport function useCategoryTotalCount(categoryId?: string) {\n  return useQuery({\n    queryKey: [\"category-total-count\", categoryId],\n    queryFn: async () => {\n      if (!categoryId) return 0;\n\n      const { count, error } = await supabase\n        .from(\"listing_categories\")\n        .select(\"*\", { count: \"exact\", head: true })\n        .eq(\"category_id\", categoryId);\n\n      if (error) throw error;\n      return count || 0;\n    },\n    enabled: !!categoryId,\n    staleTime: 5 * 60 * 1000,\n  });\n}\n\n// Countries by continent for a category\nexport function useCategoryCountriesByContinent(categoryId?: string, continent?: string) {\n  return useQuery({\n    queryKey: [\"category-countries-by-continent\", categoryId, continent],\n    queryFn: async () => {\n      if (!categoryId || !continent) return [];\n\n      const { data: listingIds } = await supabase\n        .from(\"listing_categories\")\n        .select(\"listing_id\")\n        .eq(\"category_id\", categoryId);\n\n      if (!listingIds || listingIds.length === 0) return [];\n\n      // Use listings_public view\n      const data = await fetchAllRows<{ country: string | null }>(() =>\n        supabase\n          .from(\"listings_public\")\n          .select(\"country\")\n          .eq(\"continent\", continent)\n          .in(\n            \"id\",\n            listingIds.map((l) => l.listing_id),\n          ),\n      );\n\n      const countries = [...new Set(data.map((d) => d.country).filter(Boolean))] as string[];\n      return countries.sort();\n    },\n    enabled: !!categoryId && !!continent,\n    staleTime: 5 * 60 * 1000,\n  });\n}"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;;AATA;;;;;;;;AAqBA,MAAM,aAA0C;IAC9C,SAAS;IACT,UAAU;IACV,MAAM;AACR;AAOO,SAAS;QAAY,UAAA,iEAA8B,CAAC;;IACzD,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,WAAW,EAAE,GAAG;IAEhF,OAAO,IAAA,8MAAQ,EAAC;QACd,UAAU;YAAC;YAAY;SAAQ;QAC/B,OAAO;oCAAE;gBACP,2CAA2C;gBAC3C,MAAM,2BAA2B,CAAC,CAAC,QAAQ,SAAS,SAAS,CAAC,CAAC;gBAC/D,MAAM,6BAA6B,CAAC,CAAC,YAAY,CAAC,CAAC,WAAW,CAAC;gBAE/D,sFAAsF;gBACtF,IAAI,YAAY;oBACd,2EAA2E;oBAC3E,uDAAuD;oBACvD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,4KAAQ,CAAC,GAAG,CAAC,4BAA4B;wBACrE,eAAe;wBACf,SAAS;wBACT,UAAU;wBACV,WAAW,WAAW,YAAY,QAAQ,UAAU;wBACpD,aAAa,6BAA6B,OAAO,YAAY;wBAC7D,QAAQ,2BAA2B,OAAO,QAAQ,SAAS,QAAQ,OAAO;oBAC5E;oBAEA,IAAI,OAAO,MAAM;oBAEjB,IAAI,WAAY,QAAQ,EAAE;oBAE1B,kEAAkE;oBAClE,IAAI,aAAa,CAAC,SAAS;wBACzB,MAAM,qBAAqB,sKAAmB,CAAC,UAAU,IAAI,EAAE;wBAC/D,WAAW,SAAS,MAAM;oDAAC,CAAC,IAAM,EAAE,OAAO,IAAI,mBAAmB,QAAQ,CAAC,EAAE,OAAO;;oBACtF;oBAEA,mDAAmD;oBACnD,IAAI,4BAA4B,QAAQ,SAAS;wBAC/C,MAAM,eAAe,SAAS,MAAM;iEAAC,CAAC,IAAM,EAAE,SAAS,KAAK,QAAQ,EAAE,QAAQ,IAAI,EAAE,SAAS;;wBAE7F,IAAI,aAAa,MAAM,GAAG,GAAG;4BAC3B,MAAM,aAAa,IAAA,gKAAe,EAChC,aAAa,GAAG;mEAAC,CAAC,IAAM,CAAC;wCAAE,UAAU,EAAE,QAAQ;wCAAG,WAAW,EAAE,SAAS;oCAAE,CAAC;;4BAG7E,IAAI,YAAY;gCACd,MAAM,WAAW,6KAAyB;gCAE1C,WAAW,SAAS,MAAM;4DAAC,CAAC;wCAC1B,oCAAoC;wCACpC,IAAI,QAAQ,SAAS,KAAK,MAAM,OAAO;wCAEvC,6BAA6B;wCAC7B,IAAI,CAAC,QAAQ,QAAQ,IAAI,CAAC,QAAQ,SAAS,EAAE,OAAO;wCAEpD,MAAM,WAAW,IAAA,kKAAiB,EAChC,WAAW,QAAQ,EACnB,WAAW,SAAS,EACpB,QAAQ,QAAQ,EAChB,QAAQ,SAAS;wCAGnB,OAAO,YAAY;oCACrB;;4BACF,OAAO;gCACL,0BAA0B;gCAC1B,WAAW,SAAS,MAAM;4DAAC,CAAC,IAAM,EAAE,SAAS,KAAK;;4BACpD;wBACF,OAAO;4BACL,6CAA6C;4BAC7C,WAAW,SAAS,MAAM;wDAAC,CAAC,IAAM,EAAE,SAAS,KAAK;;wBACpD;oBACF;oBAEA,iEAAiE;oBACjE,IAAI,8BAA8B,YAAY,SAAS;wBACrD,MAAM,EAAE,MAAM,UAAU,EAAE,GAAG,MAAM,4KAAQ,CACxC,IAAI,CAAC,WACL,MAAM,CAAC,oCACP,EAAE,CAAC,MAAM,UACT,MAAM;wBAET,IAAI,cAAc,IAAA,gKAAY,EAAC,SAAS,WAAW,WAAW,GAAG;4BAC/D,IAAI,WAAW,QAAQ,IAAI,WAAW,SAAS,EAAE;gCAC/C,MAAM,WAAW,IAAA,gLAA4B,EAAC,SAAS,WAAW,WAAW;gCAE7E,WAAW,SAAS,MAAM;4DAAC,CAAC;wCAC1B,oDAAoD;wCACpD,IAAI,QAAQ,SAAS,KAAK,UAAU,OAAO;wCAE3C,6BAA6B;wCAC7B,IAAI,CAAC,QAAQ,QAAQ,IAAI,CAAC,QAAQ,SAAS,EAAE,OAAO;wCAEpD,MAAM,WAAW,IAAA,kKAAiB,EAChC,WAAW,QAAQ,EACnB,WAAW,SAAS,EACpB,QAAQ,QAAQ,EAChB,QAAQ,SAAS;wCAGnB,OAAO,YAAY;oCACrB;;4BACF,OAAO;gCACL,gDAAgD;gCAChD,WAAW,SAAS,MAAM;4DAAC,CAAC,IAAM,EAAE,SAAS,KAAK;;4BACpD;wBACF,OAAO;4BACL,yCAAyC;4BACzC,WAAW,SAAS,MAAM;wDAAC,CAAC,IAAM,EAAE,SAAS,KAAK;;wBACpD;oBACF;oBAEA,2DAA2D;oBAC3D,IAAI,QAAQ;wBACV,WAAW,SAAS,MAAM;oDAAC,CAAC,IAAM,EAAE,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC,OAAO,WAAW;;oBACtF;oBAEA,kCAAkC;oBAClC,IAAI,aAAa;wBACf,MAAM,gBAAgB,IAAA,0KAAsB,EAAC;wBAC7C,IAAI,iBAAiB,CAAC,IAAA,kKAAc,EAAC,cAAc;4BACjD,MAAM,aAAa,cAAc,WAAW;4BAC5C,WAAW,SAAS,MAAM;wDAAC,CAAC,IAAM,EAAE,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;;wBAClE;oBACF;oBAEA,OAAO;gBACT;gBAEA,oEAAoE;gBACpE,MAAM,OAAO,MAAM,IAAA,uKAAY;4CAAgB;wBAC7C,IAAI,QAAQ,4KAAQ,CAAC,IAAI,CAAC,mBAAmB,MAAM,CAAC;wBAEpD,IAAI,WAAW,YAAY,OAAO;4BAChC,QAAQ,MAAM,EAAE,CAAC,WAAW;wBAC9B;wBAEA,mEAAmE;wBACnE,IAAI,YAAY,CAAC,4BAA4B;4BAC3C,QAAQ,MAAM,EAAE,CAAC,aAAa;wBAChC;wBAEA,IAAI,QAAQ,SAAS,SAAS,CAAC,0BAA0B;4BACvD,QAAQ,MAAM,EAAE,CAAC,aAAa;wBAChC;wBAEA,IAAI,QAAQ;4BACV,QAAQ,MAAM,KAAK,CAAC,QAAQ,AAAC,GAAS,OAAP,QAAO;wBACxC;wBAEA,IAAI,aAAa;4BACf,MAAM,gBAAgB,IAAA,0KAAsB,EAAC;4BAC7C,IAAI,iBAAiB,CAAC,IAAA,kKAAc,EAAC,cAAc;gCACjD,QAAQ,MAAM,KAAK,CAAC,QAAQ,AAAC,IAAiB,OAAd,eAAc;4BAChD;wBACF;wBAEA,OAAO,MAAM,KAAK,CAAC;oBACrB;;gBAEA,IAAI,WAAW;gBAEf,uDAAuD;gBACvD,IAAI,4BAA4B,QAAQ,SAAS;oBAC/C,MAAM,eAAe,SAAS,MAAM;6DAAC,CAAC,IAAM,EAAE,SAAS,KAAK,QAAQ,EAAE,QAAQ,IAAI,EAAE,SAAS;;oBAE7F,IAAI,aAAa,MAAM,GAAG,GAAG;wBAC3B,MAAM,aAAa,IAAA,gKAAe,EAChC,aAAa,GAAG;+DAAC,CAAC,IAAM,CAAC;oCAAE,UAAU,EAAE,QAAQ;oCAAG,WAAW,EAAE,SAAS;gCAAE,CAAC;;wBAG7E,IAAI,YAAY;4BACd,MAAM,WAAW,6KAAyB;4BAE1C,WAAW,SAAS,MAAM;wDAAC,CAAC;oCAC1B,oCAAoC;oCACpC,IAAI,QAAQ,SAAS,KAAK,MAAM,OAAO;oCAEvC,6BAA6B;oCAC7B,IAAI,CAAC,QAAQ,QAAQ,IAAI,CAAC,QAAQ,SAAS,EAAE,OAAO;oCAEpD,MAAM,WAAW,IAAA,kKAAiB,EAChC,WAAW,QAAQ,EACnB,WAAW,SAAS,EACpB,QAAQ,QAAQ,EAChB,QAAQ,SAAS;oCAGnB,OAAO,YAAY;gCACrB;;wBACF,OAAO;4BACL,0BAA0B;4BAC1B,WAAW,SAAS,MAAM;wDAAC,CAAC,IAAM,EAAE,SAAS,KAAK;;wBACpD;oBACF,OAAO;wBACL,6CAA6C;wBAC7C,WAAW,SAAS,MAAM;oDAAC,CAAC,IAAM,EAAE,SAAS,KAAK;;oBACpD;gBACF;gBAEA,iEAAiE;gBACjE,IAAI,8BAA8B,YAAY,SAAS;oBACrD,MAAM,EAAE,MAAM,UAAU,EAAE,GAAG,MAAM,4KAAQ,CACxC,IAAI,CAAC,WACL,MAAM,CAAC,oCACP,EAAE,CAAC,MAAM,UACT,MAAM;oBAET,IAAI,cAAc,IAAA,gKAAY,EAAC,SAAS,WAAW,WAAW,GAAG;wBAC/D,IAAI,WAAW,QAAQ,IAAI,WAAW,SAAS,EAAE;4BAC/C,MAAM,WAAW,IAAA,gLAA4B,EAAC,SAAS,WAAW,WAAW;4BAE7E,WAAW,SAAS,MAAM;wDAAC,CAAC;oCAC1B,oDAAoD;oCACpD,IAAI,QAAQ,SAAS,KAAK,UAAU,OAAO;oCAE3C,6BAA6B;oCAC7B,IAAI,CAAC,QAAQ,QAAQ,IAAI,CAAC,QAAQ,SAAS,EAAE,OAAO;oCAEpD,MAAM,WAAW,IAAA,kKAAiB,EAChC,WAAW,QAAQ,EACnB,WAAW,SAAS,EACpB,QAAQ,QAAQ,EAChB,QAAQ,SAAS;oCAGnB,OAAO,YAAY;gCACrB;;wBACF,OAAO;4BACL,gDAAgD;4BAChD,WAAW,SAAS,MAAM;wDAAC,CAAC,IAAM,EAAE,SAAS,KAAK;;wBACpD;oBACF,OAAO;wBACL,yCAAyC;wBACzC,WAAW,SAAS,MAAM;oDAAC,CAAC,IAAM,EAAE,SAAS,KAAK;;oBACpD;gBACF;gBAEA,kEAAkE;gBAClE,WAAW,SAAS,IAAI;4CAAC,CAAC,GAAG;wBAC3B,MAAM,WAAW,UAAU,CAAC,EAAE,IAAI,CAAC,GAAG,UAAU,CAAC,EAAE,IAAI,CAAC;wBACxD,IAAI,aAAa,GAAG,OAAO;wBAC3B,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,EAAE,IAAI;oBACpC;;gBAEA,OAAO;YACT;;IACF;AACF;GArPgB;;QAGP,8MAAQ;;;AAqPV,SAAS,iBAAiB,IAAY,EAAE,WAAiB;;IAC9D,OAAO,IAAA,8MAAQ,EAAC;QACd,UAAU;YAAC;YAAW;SAAK;QAC3B,OAAO;yCAAE;gBACP,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,4KAAQ,CAAC,GAAG,CAAC,uBAA8B;oBACvE,QAAQ;gBACV;gBAEA,IAAI,OAAO,MAAM;gBAEjB,uCAAuC;gBACvC,MAAM,UAAU,MAAM,OAAO,CAAC,QAAQ,IAAI,CAAC,EAAE,GAAG;gBAChD,OAAO;YACT;;QACA,SAAS,CAAC,CAAC;QACX;IACF;AACF;IAjBgB;;QACP,8MAAQ;;;AAkBV,SAAS,oBAAoB,UAAmB;;IACrD,OAAO,IAAA,8MAAQ,EAAC;QACd,UAAU;YAAC;YAAqB;SAAW;QAC3C,OAAO;4CAAE;gBACP,IAAI,qBAAsC;gBAC1C,IAAI,YAAY;oBACd,MAAM,EAAE,MAAM,UAAU,EAAE,GAAG,MAAM,4KAAQ,CACxC,IAAI,CAAC,sBACL,MAAM,CAAC,cACP,EAAE,CAAC,eAAe;oBAErB,IAAI,cAAc,WAAW,MAAM,GAAG,GAAG;wBACvC,qBAAqB,WAAW,GAAG;4DAAC,CAAC,IAAM,EAAE,UAAU;;oBACzD;gBACF;gBAEA,2BAA2B;gBAC3B,MAAM,OAAO,MAAM,IAAA,uKAAY;oDAAuD;wBACpF,IAAI,QAAQ,4KAAQ,CAAC,IAAI,CAAC,mBAAmB,MAAM,CAAC;wBAEpD,IAAI,oBAAoB;4BACtB,QAAQ,MAAM,EAAE,CAAC,MAAM;wBACzB;wBAEA,OAAO;oBACT;;gBAEA,MAAM,YAAY;uBAAI,IAAI,IAAI,KAAK,GAAG;wDAAC,CAAC,IAAM,EAAE,OAAO;uDAAE,MAAM,CAAC;iBAAU;gBAC1E,MAAM,SAAS;uBAAI,IAAI,IAAI,KAAK,GAAG;wDAAC,CAAC,IAAM,EAAE,SAAS;uDAAE,MAAM,CAAC;iBAAU;gBAEzE,OAAO;oBAAE,WAAW,UAAU,IAAI;oBAAI,QAAQ,OAAO,IAAI;gBAAG;YAC9D;;IACF;AACF;IAjCgB;;QACP,8MAAQ;;;AAkCV,SAAS,mBAAmB,UAAmB,EAAE,OAAgB;;IACtE,OAAO,IAAA,8MAAQ,EAAC;QACd,UAAU;YAAC;YAAqB;YAAY;SAAQ;QACpD,OAAO;2CAAE;gBACP,IAAI,CAAC,SAAS,OAAO,EAAE;gBAEvB,IAAI,qBAAsC;gBAC1C,IAAI,YAAY;oBACd,MAAM,EAAE,MAAM,UAAU,EAAE,GAAG,MAAM,4KAAQ,CACxC,IAAI,CAAC,sBACL,MAAM,CAAC,cACP,EAAE,CAAC,eAAe;oBAErB,IAAI,cAAc,WAAW,MAAM,GAAG,GAAG;wBACvC,qBAAqB,WAAW,GAAG;2DAAC,CAAC,IAAM,EAAE,UAAU;;oBACzD,OAAO;wBACL,OAAO,EAAE;oBACX;gBACF;gBAEA,2BAA2B;gBAC3B,MAAM,OAAO,MAAM,IAAA,uKAAY;mDAA+B;wBAC5D,IAAI,QAAQ,4KAAQ,CAAC,IAAI,CAAC,mBAAmB,MAAM,CAAC,aAAa,EAAE,CAAC,WAAW;wBAE/E,IAAI,oBAAoB;4BACtB,QAAQ,MAAM,EAAE,CAAC,MAAM;wBACzB;wBAEA,OAAO;oBACT;;gBAEA,MAAM,SAAS;uBAAI,IAAI,IAAI,KAAK,GAAG;uDAAC,CAAC,IAAM,EAAE,SAAS;sDAAE,MAAM,CAAC;iBAAU;gBACzE,OAAO,OAAO,IAAI;YACpB;;QACA,SAAS,CAAC,CAAC;QACX,WAAW,IAAI,KAAK;IACtB;AACF;IArCgB;;QACP,8MAAQ;;;AAsCV,SAAS,yBAAyB,OAAgB;;IACvD,OAAO,IAAA,8MAAQ,EAAC;QACd,UAAU;YAAC;YAA4B;SAAQ;QAC/C,OAAO;iDAAE;gBACP,IAAI,CAAC,SAAS,OAAO,EAAE;gBAEvB,2BAA2B;gBAC3B,MAAM,OAAO,MAAM,IAAA,uKAAY;yDAA+B,IAC5D,4KAAQ,CAAC,IAAI,CAAC,mBAAmB,MAAM,CAAC,aAAa,EAAE,CAAC,WAAW;;gBAGrE,MAAM,SAAS;uBAAI,IAAI,IAAI,KAAK,GAAG;6DAAC,CAAC,IAAM,EAAE,SAAS;4DAAE,MAAM,CAAC;iBAAU;gBACzE,OAAO,OAAO,IAAI;YACpB;;QACA,SAAS,CAAC,CAAC;IACb;AACF;IAhBgB;;QACP,8MAAQ;;;AAiBjB,SAAS,2BAA2B,OAAe;IACjD,IAAI,YAAY,mBAAmB,YAAY,MAAM;QACnD,OAAO;IACT;IACA,IAAI,YAAY,kBAAkB;QAChC,OAAO;IACT;IACA,OAAO;AACT;AAEO,SAAS,oBAAoB,OAAgB,EAAE,UAAmB;;IACvE,OAAO,IAAA,8MAAQ,EAAC;QACd,UAAU;YAAC;YAAsB;YAAS;SAAW;QACrD,OAAO;4CAAE;gBACP,IAAI,CAAC,SAAS,OAAO,EAAE;gBAEvB,MAAM,gBAAgB,2BAA2B;gBAEjD,IAAI,qBAAsC;gBAC1C,IAAI,YAAY;oBACd,MAAM,EAAE,MAAM,UAAU,EAAE,GAAG,MAAM,4KAAQ,CACxC,IAAI,CAAC,sBACL,MAAM,CAAC,cACP,EAAE,CAAC,eAAe;oBAErB,IAAI,cAAc,WAAW,MAAM,GAAG,GAAG;wBACvC,qBAAqB,WAAW,GAAG;4DAAC,CAAC,IAAM,EAAE,UAAU;;oBACzD,OAAO;wBACL,OAAO,EAAE;oBACX;gBACF;gBAEA,2BAA2B;gBAC3B,MAAM,sBAAsB,MAAM,IAAA,uKAAY;oDAA+B;wBAC3E,IAAI,QAAQ,4KAAQ,CAAC,IAAI,CAAC,mBAAmB,MAAM,CAAC,aAAa,GAAG,CAAC,aAAa,MAAM;wBAExF,IAAI,oBAAoB;4BACtB,QAAQ,MAAM,EAAE,CAAC,MAAM;wBACzB;wBAEA,OAAO;oBACT;;gBAEA,MAAM,YAAY;uBAAI,IAAI,IAAI,gCAAA,0CAAA,oBAAqB,GAAG;wDAAC,CAAC,IAAM,EAAE,SAAS;uDAAE,MAAM,CAAC;iBAAU;gBAE5F,IAAI,UAAU,MAAM,KAAK,GAAG,OAAO,EAAE;gBAErC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,4KAAQ,CACnC,IAAI,CAAC,WACL,MAAM,CAAC,gCACP,EAAE,CAAC,WAAW,eACd,EAAE,CAAC,MAAM,WACT,KAAK,CAAC;gBAET,IAAI,OAAO,MAAM;gBACjB,OAAO,QAAQ,EAAE;YACnB;;QACA,SAAS,CAAC,CAAC;IACb;AACF;IAjDgB;;QACP,8MAAQ;;;AAkDV,SAAS,kBAAkB,QAAiB,EAAE,UAAmB;;IACtE,OAAO,IAAA,8MAAQ,EAAC;QACd,UAAU;YAAC;YAAoB;YAAU;SAAW;QACpD,OAAO;0CAAE;gBACP,IAAI,CAAC,UAAU,OAAO,EAAE;gBAExB,IAAI,qBAAsC;gBAC1C,IAAI,YAAY;oBACd,MAAM,EAAE,MAAM,UAAU,EAAE,GAAG,MAAM,4KAAQ,CACxC,IAAI,CAAC,sBACL,MAAM,CAAC,cACP,EAAE,CAAC,eAAe;oBAErB,IAAI,cAAc,WAAW,MAAM,GAAG,GAAG;wBACvC,qBAAqB,WAAW,GAAG;0DAAC,CAAC,IAAM,EAAE,UAAU;;oBACzD,OAAO;wBACL,OAAO,EAAE;oBACX;gBACF;gBAEA,2BAA2B;gBAC3B,MAAM,OAAO,MAAM,IAAA,uKAAY;kDAA+B;wBAC5D,IAAI,QAAQ,4KAAQ,CAAC,IAAI,CAAC,mBAAmB,MAAM,CAAC,aAAa,EAAE,CAAC,aAAa;wBAEjF,IAAI,oBAAoB;4BACtB,QAAQ,MAAM,EAAE,CAAC,MAAM;wBACzB;wBAEA,OAAO;oBACT;;gBAEA,MAAM,SAAS;uBAAI,IAAI,IAAI,KAAK,GAAG;sDAAC,CAAC,IAAM,EAAE,SAAS;qDAAE,MAAM,CAAC;iBAAU;gBACzE,OAAO,OAAO,IAAI;YACpB;;QACA,SAAS,CAAC,CAAC;QACX,WAAW,IAAI,KAAK;IACtB;AACF;IArCgB;;QACP,8MAAQ;;;AAsCV,SAAS;;IACd,OAAO,IAAA,8MAAQ,EAAC;QACd,UAAU;YAAC;SAAoB;QAC/B,OAAO;4CAAE;gBACP,MAAM,EAAE,MAAM,aAAa,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,4KAAQ,CAC9D,IAAI,CAAC,8BACL,MAAM,CAAC,wBACP,KAAK,CAAC;gBAET,IAAI,YAAY,MAAM;gBAEtB,MAAM,cAAc,0BAAA,oCAAA,cAAe,MAAM;oDAAC,CAAC,OAAS,KAAK,UAAU;mDAAE,GAAG;oDAAC,CAAC,OAAS,KAAK,UAAU;;gBAElG,IAAI,eAAe,YAAY,MAAM,GAAG,GAAG;oBACzC,2BAA2B;oBAC3B,MAAM,EAAE,MAAM,QAAQ,EAAE,OAAO,aAAa,EAAE,GAAG,MAAM,4KAAQ,CAC5D,IAAI,CAAC,mBACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM;oBAEZ,IAAI,eAAe,MAAM;oBAEzB,MAAM,iBAAiB,YACpB,GAAG;uEAAC,CAAC,KAAO,qBAAA,+BAAA,SAAU,IAAI;+EAAC,CAAC,IAAM,EAAE,EAAE,KAAK;;sEAC3C,MAAM,CAAC;oBAEV,OAAO;gBACT;gBAEA,2BAA2B;gBAC3B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,4KAAQ,CACnC,IAAI,CAAC,mBACL,MAAM,CAAC,KACP,EAAE,CAAC,QAAQ,WACX,KAAK,CAAC,GACN,KAAK,CAAC;gBAET,IAAI,OAAO,MAAM;gBACjB,OAAO;YACT;;IACF;AACF;IAzCgB;;QACP,8MAAQ;;;AA0CV,SAAS,qBAAqB,SAAkB,EAAE,WAAmB;;IAC1E,OAAO,IAAA,8MAAQ,EAAC;QACd,UAAU;YAAC;YAAsB;SAAU;QAC3C,OAAO;6CAAE;gBACP,IAAI,CAAC,WAAW,OAAO,EAAE;gBAEzB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,4KAAQ,CACnC,IAAI,CAAC,sBACL,MAAM,CAAC,8BACP,EAAE,CAAC,cAAc;gBAEpB,IAAI,OAAO,MAAM;gBAEjB,OAAO,iBAAA,2BAAA,KAAM,GAAG;qDAAC,CAAC,KAAO,GAAG,UAAU;oDAAE,MAAM,CAAC;YACjD;;QACA,SAAS,CAAC,CAAC;QACX;IACF;AACF;IAlBgB;;QACP,8MAAQ;;;AAoBV,SAAS,iBAAiB,GAAa;;IAC5C,OAAO,IAAA,8MAAQ,EAAC;QACd,UAAU;YAAC;YAAY;YAAU;SAAI;QACrC,OAAO;yCAAE;gBACP,IAAI,IAAI,MAAM,KAAK,GAAG,OAAO,EAAE;gBAC/B,6EAA6E;gBAC7E,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,4KAAQ,CAAC,IAAI,CAAC,mBAAmB,MAAM,CAAC,KAAK,EAAE,CAAC,MAAM;gBACpF,IAAI,OAAO,MAAM;gBACjB,OAAO;YACT;;QACA,SAAS,IAAI,MAAM,GAAG;IACxB;AACF;IAZgB;;QACP,8MAAQ;;;AAaV,SAAS;;IACd,OAAO,IAAA,8MAAQ,EAAC;QACd,UAAU;YAAC;SAAiB;QAC5B,OAAO;yCAAE;gBACP,2BAA2B;gBAC3B,MAAM,OAAO,MAAM,IAAA,uKAAY;iDAA6B,IAC1D,4KAAQ,CAAC,IAAI,CAAC,mBAAmB,MAAM,CAAC;;gBAG1C,MAAM,SAAiC,CAAC;gBACxC,KAAK,OAAO;iDAAC,CAAC;wBACZ,IAAI,EAAE,OAAO,EAAE;4BACb,MAAM,CAAC,EAAE,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,OAAO,CAAC,IAAI,CAAC,IAAI;wBACjD;oBACF;;gBACA,OAAO;YACT;;IACF;AACF;KAlBgB;;QACP,8MAAQ;;;AAmBV,SAAS,yBAAyB,UAAmB;;IAC1D,OAAO,IAAA,8MAAQ,EAAC;QACd,UAAU;YAAC;YAA2B;SAAW;QACjD,OAAO;iDAAE;gBACP,IAAI,CAAC,YAAY,OAAO,CAAC;gBAEzB,MAAM,EAAE,MAAM,UAAU,EAAE,GAAG,MAAM,4KAAQ,CACxC,IAAI,CAAC,sBACL,MAAM,CAAC,cACP,EAAE,CAAC,eAAe;gBAErB,IAAI,CAAC,cAAc,WAAW,MAAM,KAAK,GAAG,OAAO,CAAC;gBAEpD,2BAA2B;gBAC3B,MAAM,OAAO,MAAM,IAAA,uKAAY;yDAA6B,IAC1D,4KAAQ,CACL,IAAI,CAAC,mBACL,MAAM,CAAC,WACP,EAAE,CACD,MACA,WAAW,GAAG;iEAAC,CAAC,IAAM,EAAE,UAAU;;;gBAIxC,MAAM,SAAiC,CAAC;gBACxC,KAAK,OAAO;yDAAC,CAAC;wBACZ,IAAI,EAAE,OAAO,EAAE;4BACb,MAAM,CAAC,EAAE,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,OAAO,CAAC,IAAI,CAAC,IAAI;wBACjD;oBACF;;gBACA,OAAO;YACT;;QACA,SAAS,CAAC,CAAC;IACb;AACF;KAlCgB;;QACP,8MAAQ;;;AAmCV,SAAS,gBAAgB,OAAgB;;IAC9C,OAAO,IAAA,8MAAQ,EAAC;QACd,UAAU;YAAC;YAAiB;SAAQ;QACpC,OAAO;wCAAE;gBACP,IAAI,CAAC,SAAS,OAAO,CAAC;gBAEtB,2BAA2B;gBAC3B,MAAM,OAAO,MAAM,IAAA,uKAAY;gDAA+B,IAC5D,4KAAQ,CAAC,IAAI,CAAC,mBAAmB,MAAM,CAAC,aAAa,EAAE,CAAC,WAAW,SAAS,GAAG,CAAC,aAAa,MAAM;;gBAGrG,MAAM,SAAiC,CAAC;gBACxC,KAAK,OAAO;gDAAC,CAAC;wBACZ,IAAI,EAAE,SAAS,EAAE;4BACf,MAAM,CAAC,EAAE,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,SAAS,CAAC,IAAI,CAAC,IAAI;wBACrD;oBACF;;gBACA,OAAO;YACT;;QACA,SAAS,CAAC,CAAC;IACb;AACF;KArBgB;;QACP,8MAAQ;;;AAsBV,SAAS,wBAAwB,OAAgB,EAAE,UAAmB;;IAC3E,OAAO,IAAA,8MAAQ,EAAC;QACd,UAAU;YAAC;YAA0B;YAAS;SAAW;QACzD,OAAO;gDAAE;gBACP,IAAI,CAAC,SAAS,OAAO,CAAC;gBAEtB,IAAI,qBAAsC;gBAC1C,IAAI,YAAY;oBACd,MAAM,EAAE,MAAM,UAAU,EAAE,GAAG,MAAM,4KAAQ,CACxC,IAAI,CAAC,sBACL,MAAM,CAAC,cACP,EAAE,CAAC,eAAe;oBAErB,IAAI,CAAC,cAAc,WAAW,MAAM,KAAK,GAAG,OAAO,CAAC;oBACpD,qBAAqB,WAAW,GAAG;4DAAC,CAAC,IAAM,EAAE,UAAU;;gBACzD;gBAEA,2BAA2B;gBAC3B,MAAM,OAAO,MAAM,IAAA,uKAAY;wDAA+B;wBAC5D,IAAI,QAAQ,4KAAQ,CACjB,IAAI,CAAC,mBACL,MAAM,CAAC,aACP,EAAE,CAAC,WAAW,SACd,GAAG,CAAC,aAAa,MAAM;wBAE1B,IAAI,oBAAoB;4BACtB,QAAQ,MAAM,EAAE,CAAC,MAAM;wBACzB;wBAEA,OAAO;oBACT;;gBAEA,MAAM,SAAiC,CAAC;gBACxC,KAAK,OAAO;wDAAC,CAAC;wBACZ,IAAI,EAAE,SAAS,EAAE;4BACf,MAAM,CAAC,EAAE,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,SAAS,CAAC,IAAI,CAAC,IAAI;wBACrD;oBACF;;gBACA,OAAO;YACT;;QACA,SAAS,CAAC,CAAC;IACb;AACF;KA1CgB;;QACP,8MAAQ;;;AA4CV,SAAS,2BAA2B,UAAmB;;IAC5D,OAAO,IAAA,8MAAQ,EAAC;QACd,UAAU;YAAC;YAA6B;SAAW;QACnD,OAAO;mDAAE;gBACP,IAAI,CAAC,YAAY,OAAO,CAAC;gBAEzB,MAAM,EAAE,MAAM,UAAU,EAAE,GAAG,MAAM,4KAAQ,CACxC,IAAI,CAAC,sBACL,MAAM,CAAC,cACP,EAAE,CAAC,eAAe;gBAErB,IAAI,CAAC,cAAc,WAAW,MAAM,KAAK,GAAG,OAAO,CAAC;gBAEpD,2BAA2B;gBAC3B,MAAM,OAAO,MAAM,IAAA,uKAAY;2DAA+B,IAC5D,4KAAQ,CACL,IAAI,CAAC,mBACL,MAAM,CAAC,aACP,EAAE,CACD,MACA,WAAW,GAAG;mEAAC,CAAC,IAAM,EAAE,UAAU;;;gBAIxC,MAAM,SAAiC,CAAC;gBACxC,KAAK,OAAO;2DAAC,CAAC;wBACZ,IAAI,EAAE,SAAS,EAAE;4BACf,MAAM,CAAC,EAAE,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,SAAS,CAAC,IAAI,CAAC,IAAI;wBACrD;oBACF;;gBACA,OAAO;YACT;;QACA,SAAS,CAAC,CAAC;QACX,WAAW,IAAI,KAAK;IACtB;AACF;KAnCgB;;QACP,8MAAQ;;;AAqCV,SAAS,sBAAsB,UAAmB;;IACvD,OAAO,IAAA,8MAAQ,EAAC;QACd,UAAU;YAAC;YAAwB;SAAW;QAC9C,OAAO;8CAAE;gBACP,IAAI,CAAC,YAAY,OAAO;gBAExB,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,MAAM,4KAAQ,CACpC,IAAI,CAAC,sBACL,MAAM,CAAC,KAAK;oBAAE,OAAO;oBAAS,MAAM;gBAAK,GACzC,EAAE,CAAC,eAAe;gBAErB,IAAI,OAAO,MAAM;gBACjB,OAAO,SAAS;YAClB;;QACA,SAAS,CAAC,CAAC;QACX,WAAW,IAAI,KAAK;IACtB;AACF;KAjBgB;;QACP,8MAAQ;;;AAmBV,SAAS,gCAAgC,UAAmB,EAAE,SAAkB;;IACrF,OAAO,IAAA,8MAAQ,EAAC;QACd,UAAU;YAAC;YAAmC;YAAY;SAAU;QACpE,OAAO;wDAAE;gBACP,IAAI,CAAC,cAAc,CAAC,WAAW,OAAO,EAAE;gBAExC,MAAM,EAAE,MAAM,UAAU,EAAE,GAAG,MAAM,4KAAQ,CACxC,IAAI,CAAC,sBACL,MAAM,CAAC,cACP,EAAE,CAAC,eAAe;gBAErB,IAAI,CAAC,cAAc,WAAW,MAAM,KAAK,GAAG,OAAO,EAAE;gBAErD,2BAA2B;gBAC3B,MAAM,OAAO,MAAM,IAAA,uKAAY;gEAA6B,IAC1D,4KAAQ,CACL,IAAI,CAAC,mBACL,MAAM,CAAC,WACP,EAAE,CAAC,aAAa,WAChB,EAAE,CACD,MACA,WAAW,GAAG;wEAAC,CAAC,IAAM,EAAE,UAAU;;;gBAIxC,MAAM,YAAY;uBAAI,IAAI,IAAI,KAAK,GAAG;oEAAC,CAAC,IAAM,EAAE,OAAO;mEAAE,MAAM,CAAC;iBAAU;gBAC1E,OAAO,UAAU,IAAI;YACvB;;QACA,SAAS,CAAC,CAAC,cAAc,CAAC,CAAC;QAC3B,WAAW,IAAI,KAAK;IACtB;AACF;KA/BgB;;QACP,8MAAQ","debugId":null}},
    {"offset": {"line": 6044, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/ui/select.tsx"],"sourcesContent":["import * as React from \"react\";\nimport * as SelectPrimitive from \"@radix-ui/react-select\";\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Select = SelectPrimitive.Root;\n\nconst SelectGroup = SelectPrimitive.Group;\n\nconst SelectValue = SelectPrimitive.Value;\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className,\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n));\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName;\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\"flex cursor-default items-center justify-center py-1\", className)}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n));\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName;\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\"flex cursor-default items-center justify-center py-1\", className)}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n));\nSelectScrollDownButton.displayName = SelectPrimitive.ScrollDownButton.displayName;\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className,\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\",\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n));\nSelectContent.displayName = SelectPrimitive.Content.displayName;\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label ref={ref} className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)} {...props} />\n));\nSelectLabel.displayName = SelectPrimitive.Label.displayName;\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground\",\n      className,\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n));\nSelectItem.displayName = SelectPrimitive.Item.displayName;\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator ref={ref} className={cn(\"-mx-1 my-1 h-px bg-muted\", className)} {...props} />\n));\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName;\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAAA;AAAA;AAEA;;;;;;AAEA,MAAM,SAAS,iMAAoB;AAEnC,MAAM,cAAc,kMAAqB;AAEzC,MAAM,cAAc,kMAAqB;AAEzC,MAAM,8BAAgB,+LAAgB,MAGpC,QAAoC;QAAnC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO;yBAClC,iNAAC,oMAAuB;QACtB,KAAK;QACL,WAAW,IAAA,gJAAE,EACX,mTACA;QAED,GAAG,KAAK;;YAER;0BACD,iNAAC,iMAAoB;gBAAC,OAAO;0BAC3B,cAAA,iNAAC,0PAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;;;AAI7B,cAAc,WAAW,GAAG,oMAAuB,CAAC,WAAW;AAE/D,MAAM,qCAAuB,+LAAgB,CAG3C,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,iNAAC,2MAA8B;QAC7B,KAAK;QACL,WAAW,IAAA,gJAAE,EAAC,wDAAwD;QACrE,GAAG,KAAK;kBAET,cAAA,iNAAC,oPAAS;YAAC,WAAU;;;;;;;;;;;;MATnB;AAYN,qBAAqB,WAAW,GAAG,2MAA8B,CAAC,WAAW;AAE7E,MAAM,uCAAyB,+LAAgB,CAG7C,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,iNAAC,6MAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,gJAAE,EAAC,wDAAwD;QACrE,GAAG,KAAK;kBAET,cAAA,iNAAC,0PAAW;YAAC,WAAU;;;;;;;;;;;;MATrB;AAYN,uBAAuB,WAAW,GAAG,6MAAgC,CAAC,WAAW;AAEjF,MAAM,8BAAgB,+LAAgB,OAGpC,QAAyD;QAAxD,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,QAAQ,EAAE,GAAG,OAAO;yBACvD,iNAAC,mMAAsB;kBACrB,cAAA,iNAAC,oMAAuB;YACtB,KAAK;YACL,WAAW,IAAA,gJAAE,EACX,ucACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,iNAAC;;;;;8BACD,iNAAC,qMAAwB;oBACvB,WAAW,IAAA,gJAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,iNAAC;;;;;;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG,oMAAuB,CAAC,WAAW;AAE/D,MAAM,4BAAc,+LAAgB,OAGlC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,iNAAC,kMAAqB;QAAC,KAAK;QAAK,WAAW,IAAA,gJAAE,EAAC,0CAA0C;QAAa,GAAG,KAAK;;;;;;;;AAEhH,YAAY,WAAW,GAAG,kMAAqB,CAAC,WAAW;AAE3D,MAAM,2BAAa,+LAAgB,OAGjC,QAAoC;QAAnC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO;yBAClC,iNAAC,iMAAoB;QACnB,KAAK;QACL,WAAW,IAAA,gJAAE,EACX,6NACA;QAED,GAAG,KAAK;;0BAET,iNAAC;gBAAK,WAAU;0BACd,cAAA,iNAAC,0MAA6B;8BAC5B,cAAA,iNAAC,oOAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAIrB,iNAAC,qMAAwB;0BAAE;;;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,iMAAoB,CAAC,WAAW;AAEzD,MAAM,gCAAkB,+LAAgB,QAGtC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,iNAAC,sMAAyB;QAAC,KAAK;QAAK,WAAW,IAAA,gJAAE,EAAC,4BAA4B;QAAa,GAAG,KAAK;;;;;;;;AAEtG,gBAAgB,WAAW,GAAG,sMAAyB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 6287, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/ui/pagination.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\";\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n);\nPagination.displayName = \"Pagination\";\n\nconst PaginationContent = React.forwardRef<HTMLUListElement, React.ComponentProps<\"ul\">>(\n  ({ className, ...props }, ref) => (\n    <ul ref={ref} className={cn(\"flex flex-row items-center gap-1\", className)} {...props} />\n  ),\n);\nPaginationContent.displayName = \"PaginationContent\";\n\nconst PaginationItem = React.forwardRef<HTMLLIElement, React.ComponentProps<\"li\">>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n));\nPaginationItem.displayName = \"PaginationItem\";\n\ntype PaginationLinkProps = {\n  isActive?: boolean;\n} & Pick<ButtonProps, \"size\"> &\n  (React.ComponentProps<\"a\"> | React.ComponentProps<\"button\">);\n\nconst PaginationLink = ({ className, isActive, size = \"icon\", ...props }: PaginationLinkProps) => {\n  const Component = (props as any).onClick ? \"button\" : \"a\";\n  \n  return (\n    <Component\n      aria-current={isActive ? \"page\" : undefined}\n      className={cn(\n        buttonVariants({\n          variant: isActive ? \"outline\" : \"ghost\",\n          size,\n        }),\n        className,\n      )}\n      {...props}\n    />\n  );\n};\nPaginationLink.displayName = \"PaginationLink\";\n\nconst PaginationPrevious = ({ className, ...props }: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink aria-label=\"Go to previous page\" size=\"default\" className={cn(\"gap-1 pl-2.5\", className)} {...props}>\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n);\nPaginationPrevious.displayName = \"PaginationPrevious\";\n\nconst PaginationNext = ({ className, ...props }: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink aria-label=\"Go to next page\" size=\"default\" className={cn(\"gap-1 pr-2.5\", className)} {...props}>\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n);\nPaginationNext.displayName = \"PaginationNext\";\n\nconst PaginationEllipsis = ({ className, ...props }: React.ComponentProps<\"span\">) => (\n  <span aria-hidden className={cn(\"flex h-9 w-9 items-center justify-center\", className)} {...props}>\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n);\nPaginationEllipsis.displayName = \"PaginationEllipsis\";\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n};"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAA;AACA;AAAA;AAAA;AAEA;AACA;;;;;;AAEA,MAAM,aAAa;QAAC,EAAE,SAAS,EAAE,GAAG,OAAoC;yBACtE,iNAAC;QACC,MAAK;QACL,cAAW;QACX,WAAW,IAAA,gJAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;;KALP;AAQN,WAAW,WAAW,GAAG;AAEzB,MAAM,kCAAoB,+LAAgB,OACxC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACtB,iNAAC;QAAG,KAAK;QAAK,WAAW,IAAA,gJAAE,EAAC,oCAAoC;QAAa,GAAG,KAAK;;;;;;;;AAGzF,kBAAkB,WAAW,GAAG;AAEhC,MAAM,+BAAiB,+LAAgB,OAA4C,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACzG,iNAAC;QAAG,KAAK;QAAK,WAAW,IAAA,gJAAE,EAAC,IAAI;QAAa,GAAG,KAAK;;;;;;;;AAEvD,eAAe,WAAW,GAAG;AAO7B,MAAM,iBAAiB;QAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,OAAO,MAAM,EAAE,GAAG,OAA4B;IAC3F,MAAM,YAAY,AAAC,MAAc,OAAO,GAAG,WAAW;IAEtD,qBACE,iNAAC;QACC,gBAAc,WAAW,SAAS;QAClC,WAAW,IAAA,gJAAE,EACX,IAAA,2KAAc,EAAC;YACb,SAAS,WAAW,YAAY;YAChC;QACF,IACA;QAED,GAAG,KAAK;;;;;;AAGf;MAhBM;AAiBN,eAAe,WAAW,GAAG;AAE7B,MAAM,qBAAqB;QAAC,EAAE,SAAS,EAAE,GAAG,OAAoD;yBAC9F,iNAAC;QAAe,cAAW;QAAsB,MAAK;QAAU,WAAW,IAAA,gJAAE,EAAC,gBAAgB;QAAa,GAAG,KAAK;;0BACjH,iNAAC,0PAAW;gBAAC,WAAU;;;;;;0BACvB,iNAAC;0BAAK;;;;;;;;;;;;;MAHJ;AAMN,mBAAmB,WAAW,GAAG;AAEjC,MAAM,iBAAiB;QAAC,EAAE,SAAS,EAAE,GAAG,OAAoD;yBAC1F,iNAAC;QAAe,cAAW;QAAkB,MAAK;QAAU,WAAW,IAAA,gJAAE,EAAC,gBAAgB;QAAa,GAAG,KAAK;;0BAC7G,iNAAC;0BAAK;;;;;;0BACN,iNAAC,6PAAY;gBAAC,WAAU;;;;;;;;;;;;;MAHtB;AAMN,eAAe,WAAW,GAAG;AAE7B,MAAM,qBAAqB;QAAC,EAAE,SAAS,EAAE,GAAG,OAAqC;yBAC/E,iNAAC;QAAK,aAAW;QAAC,WAAW,IAAA,gJAAE,EAAC,4CAA4C;QAAa,GAAG,KAAK;;0BAC/F,iNAAC,yPAAc;gBAAC,WAAU;;;;;;0BAC1B,iNAAC;gBAAK,WAAU;0BAAU;;;;;;;;;;;;;MAHxB;AAMN,mBAAmB,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 6487, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/Search.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport { useSearchParams, useRouter } from 'next/navigation';\nimport { useState, useEffect } from \"react\";\nimport { Layout } from \"@/components/Layout\";\nimport { SearchAutocomplete } from \"@/components/SearchAutocomplete\";\nimport { CategoryFilter } from \"@/components/CategoryFilter\";\nimport { ListingRow } from \"@/components/ListingRow\";\nimport { useListings } from \"@/hooks/useListings\";\nimport { useSearchAutocomplete } from \"@/hooks/useSearchAutocomplete\";\nimport { ChevronRight, Building2 } from \"lucide-react\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport {\n  Pagination,\n  PaginationContent,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n  PaginationEllipsis,\n} from \"@/components/ui/pagination\";\n\nconst PAGE_SIZE_OPTIONS = [10, 25, 50, 100];\n\nexport default function SearchPage() {\n  const searchParams = useSearchParams();\n  const router = useRouter();\n  const initialQuery = searchParams?.get(\"q\") || \"\";\n  const [activeQuery, setActiveQuery] = useState(initialQuery);\n  const [pageSize, setPageSize] = useState(10);\n  const [currentPage, setCurrentPage] = useState(1);\n\n  // Update activeQuery when URL changes\n  useEffect(() => {\n    setActiveQuery(initialQuery);\n    setCurrentPage(1);\n  }, [initialQuery]);\n\n  const { data: listings, isLoading: listingsLoading } = useListings({ searchQuery: activeQuery });\n  const { data: autocompleteData, isLoading: categoriesLoading } = useSearchAutocomplete(activeQuery);\n\n  const matchingCategories = autocompleteData?.categories || [];\n  const isLoading = listingsLoading || categoriesLoading;\n\n  // Auto-redirect to category page when there's exactly 1 category match and 0 listings\n  const shouldRedirect =\n    !isLoading && activeQuery && matchingCategories.length === 1 && (!listings || listings.length === 0);\n\n  // Pagination\n  const totalEntries = listings?.length || 0;\n  const totalPages = Math.ceil(totalEntries / pageSize);\n  const startIndex = (currentPage - 1) * pageSize;\n  const endIndex = Math.min(startIndex + pageSize, totalEntries);\n  const paginatedListings = listings?.slice(startIndex, endIndex) || [];\n\n  // Reset to page 1 when page size changes\n  useEffect(() => {\n    setCurrentPage(1);\n  }, [pageSize]);\n\n  useEffect(() => {\n    if (shouldRedirect) {\n      const category = matchingCategories[0];\n      router.replace(`/${category.url_slug || category.slug}`);\n    }\n  }, [shouldRedirect, matchingCategories, router]);\n\n  // Early return while redirecting to prevent page flash\n  if (isLoading || shouldRedirect) {\n    return null;\n  }\n\n  // Generate page numbers for pagination\n  const getPageNumbers = () => {\n    const pages: (number | \"ellipsis\")[] = [];\n    if (totalPages <= 7) {\n      for (let i = 1; i <= totalPages; i++) pages.push(i);\n    } else {\n      if (currentPage <= 3) {\n        pages.push(1, 2, 3, 4, \"ellipsis\", totalPages);\n      } else if (currentPage >= totalPages - 2) {\n        pages.push(1, \"ellipsis\", totalPages - 3, totalPages - 2, totalPages - 1, totalPages);\n      } else {\n        pages.push(1, \"ellipsis\", currentPage - 1, currentPage, currentPage + 1, \"ellipsis\", totalPages);\n      }\n    }\n    return pages;\n  };\n\n  return (\n    <Layout>\n      <div className=\"container py-8\">\n        {/* Breadcrumb */}\n        <nav className=\"flex items-center gap-2 text-sm text-muted-foreground mb-6\">\n          <Link href=\"/\" className=\"hover:text-primary\">\n            Home\n          </Link>\n          <ChevronRight className=\"h-4 w-4\" />\n          <span className=\"text-foreground\">Search</span>\n        </nav>\n\n        <h1 className=\"text-3xl font-bold mb-6\">\n          {activeQuery ? `Search Results for \"${activeQuery}\"` : \"Search Directory\"}\n        </h1>\n\n        <div className=\"max-w-xl mb-8\">\n          <SearchAutocomplete />\n        </div>\n\n        {isLoading ? (\n          <div className=\"space-y-4\">\n            <div className=\"h-6 w-48 bg-muted animate-pulse rounded\" />\n            <div className=\"h-64 bg-muted animate-pulse rounded\" />\n          </div>\n        ) : activeQuery ? (\n          <div className=\"space-y-6\">\n            {/* Categories - Prominent Full Width */}\n            {matchingCategories.length > 0 && (\n              <CategoryFilter searchTerm={activeQuery} categories={matchingCategories} />\n            )}\n\n            {/* Main Content - Listings (Full Width) */}\n            {listings && listings.length > 0 && (\n              <div className=\"bg-card border rounded-lg overflow-hidden\">\n                {/* Header - only show when categories are also displayed */}\n                {matchingCategories.length > 0 && (\n                  <div className=\"flex items-center gap-2 p-4 border-b\">\n                    <Building2 className=\"h-5 w-5 text-primary\" />\n                    <h2 className=\"font-semibold text-lg\">Company names matching \"{activeQuery}\"</h2>\n                  </div>\n                )}\n\n                {/* Controls Header */}\n                <div className=\"flex items-center justify-between p-4 border-b bg-muted/30\">\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-sm text-muted-foreground\">Show</span>\n                    <Select value={String(pageSize)} onValueChange={(value) => setPageSize(Number(value))}>\n                      <SelectTrigger className=\"w-20 h-8\">\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {PAGE_SIZE_OPTIONS.map((size) => (\n                          <SelectItem key={size} value={String(size)}>\n                            {size}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                    <span className=\"text-sm text-muted-foreground\">entries</span>\n                  </div>\n                </div>\n\n                {/* Listing Rows */}\n                {paginatedListings.length > 0 && (\n                  <>\n                    <div className=\"divide-y divide-border\">\n                      {paginatedListings.map((listing) => (\n                        <ListingRow key={listing.id} listing={listing} locationMode=\"country\" />\n                      ))}\n                    </div>\n\n                    {/* Pagination Footer */}\n                    <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 p-4 border-t bg-muted/30\">\n                      <p className=\"text-sm text-muted-foreground\">\n                        Showing {startIndex + 1} to {endIndex} of {totalEntries} entries\n                      </p>\n\n                      {totalPages > 1 && (\n                        <Pagination>\n                          <PaginationContent>\n                            <PaginationItem>\n                              <PaginationPrevious\n                                onClick={() => setCurrentPage((p) => Math.max(1, p - 1))}\n                                className={currentPage === 1 ? \"pointer-events-none opacity-50\" : \"cursor-pointer\"}\n                              />\n                            </PaginationItem>\n\n                            {getPageNumbers().map((page, idx) =>\n                              page === \"ellipsis\" ? (\n                                <PaginationItem key={`ellipsis-${idx}`}>\n                                  <PaginationEllipsis />\n                                </PaginationItem>\n                              ) : (\n                                <PaginationItem key={page}>\n                                  <PaginationLink\n                                    onClick={() => setCurrentPage(page)}\n                                    isActive={currentPage === page}\n                                    className=\"cursor-pointer\"\n                                  >\n                                    {page}\n                                  </PaginationLink>\n                                </PaginationItem>\n                              ),\n                            )}\n\n                            <PaginationItem>\n                              <PaginationNext\n                                onClick={() => setCurrentPage((p) => Math.min(totalPages, p + 1))}\n                                className={\n                                  currentPage === totalPages ? \"pointer-events-none opacity-50\" : \"cursor-pointer\"\n                                }\n                              />\n                            </PaginationItem>\n                          </PaginationContent>\n                        </Pagination>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )}\n\n            {/* No results message - only when no categories AND no listings */}\n            {listings?.length === 0 && matchingCategories.length === 0 && (\n              <div className=\"bg-card border rounded-lg p-8 text-center text-muted-foreground\">\n                No results found for \"{activeQuery}\".\n              </div>\n            )}\n          </div>\n        ) : (\n          <div className=\"bg-card border rounded-lg p-8 text-center text-muted-foreground\">\n            Enter a search term to find categories and companies.\n          </div>\n        )}\n      </div>\n    </Layout>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}