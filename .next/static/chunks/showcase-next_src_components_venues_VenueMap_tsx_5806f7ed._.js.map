{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/venues/VenueMap.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport { useMemo, useCallback, useEffect, useRef, useState } from \"react\";\nimport Map, { Marker, Popup, NavigationControl, MapRef } from \"react-map-gl/maplibre\";\nimport Supercluster from \"supercluster\";\nimport { VenueListing } from \"@/hooks/useVenues\";\nimport { getVenueUrl } from \"@/hooks/useVenueUrl\";\nimport { MapPin, Users } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { FavouriteButton } from \"@/components/FavouriteButton\";\nimport { cn } from \"@/lib/utils\";\nimport \"maplibre-gl/dist/maplibre-gl.css\";\n\n// Free map style\nconst MAP_STYLE = \"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json\";\n\nexport interface MapBounds {\n  north: number;\n  south: number;\n  east: number;\n  west: number;\n}\n\ninterface VenueMapProps {\n  venues: VenueListing[];\n  selectedVenue: VenueListing | null;\n  onSelectVenue: (venue: VenueListing | null) => void;\n  highlightedVenueId?: string | null;\n  onBoundsChange?: (bounds: MapBounds, zoom: number) => void;\n  initialState?: {\n    bounds: MapBounds;\n    zoom: number;\n  } | null;\n}\n\n// Type for our cluster points\ninterface VenueProperties {\n  id: string;\n  venue: VenueListing;\n}\n\ntype VenuePoint = GeoJSON.Feature<GeoJSON.Point, VenueProperties>;\n\nexport function VenueMap({\n  venues,\n  selectedVenue,\n  onSelectVenue,\n  highlightedVenueId,\n  onBoundsChange,\n  initialState,\n}: VenueMapProps) {\n  const mapRef = useRef<MapRef>(null);\n  const [zoom, setZoom] = useState(3);\n  const [bounds, setBounds] = useState<[number, number, number, number] | null>(null);\n\n  // Smart auto-pan: only pan if popup would be clipped, with smooth animation\n  const ensurePopupVisible = useCallback((lng: number, lat: number) => {\n    if (!mapRef.current) return;\n\n    const map = mapRef.current;\n    const point = map.project([lng, lat]);\n    const container = map.getContainer();\n    const width = container.offsetWidth;\n    const height = container.offsetHeight;\n\n    // Popup dimensions (approximate) + padding\n    const popupHeight = 180; // Slightly taller for venue popup with capacity\n    const popupWidth = 100; // Half of popup width (centered on point)\n    const padding = 20; // Edge padding\n\n    let panX = 0;\n    let panY = 0;\n\n    // Check if popup would be clipped at top\n    if (point.y - popupHeight - padding < 0) {\n      panY = point.y - popupHeight - padding;\n    }\n\n    // Check if popup would be clipped at bottom (unlikely with bottom anchor, but check anyway)\n    if (point.y + padding > height) {\n      panY = point.y + padding - height;\n    }\n\n    // Check left edge\n    if (point.x - popupWidth - padding < 0) {\n      panX = point.x - popupWidth - padding;\n    }\n\n    // Check right edge\n    if (point.x + popupWidth + padding > width) {\n      panX = point.x + popupWidth + padding - width;\n    }\n\n    // Only pan if needed\n    if (panX !== 0 || panY !== 0) {\n      map.panBy([panX, panY], { duration: 300 });\n    }\n  }, []);\n\n  // Filter venues with valid coordinates\n  const mappableVenues = useMemo(() => venues.filter((v) => v.latitude !== null && v.longitude !== null), [venues]);\n\n  // Create supercluster instance - smaller radius for more granular clusters\n  const supercluster = useMemo(() => {\n    const cluster = new Supercluster<VenueProperties>({\n      radius: 15, // Small radius so only very close venues cluster\n      maxZoom: 8, // Stop clustering at zoom 8 - show all individual pins beyond this\n      minZoom: 0,\n    });\n\n    const points: VenuePoint[] = mappableVenues.map((venue) => ({\n      type: \"Feature\",\n      properties: {\n        id: venue.id,\n        venue,\n      },\n      geometry: {\n        type: \"Point\",\n        coordinates: [venue.longitude!, venue.latitude!],\n      },\n    }));\n\n    cluster.load(points);\n    return cluster;\n  }, [mappableVenues]);\n\n  // Get clusters for current viewport\n  const clusters = useMemo(() => {\n    if (!bounds) return [];\n    return supercluster.getClusters(bounds, Math.floor(zoom));\n  }, [supercluster, bounds, zoom]);\n\n  // Find which cluster contains the highlighted venue (if any)\n  const highlightedClusterId = useMemo(() => {\n    if (!highlightedVenueId || !bounds) return null;\n\n    // Check if the highlighted venue is visible as an individual marker\n    const isIndividualMarker = clusters.some((cluster) => {\n      const props = cluster.properties as any;\n      return !props.cluster && props.venue?.id === highlightedVenueId;\n    });\n\n    if (isIndividualMarker) return null; // No need to highlight cluster\n\n    // Find which cluster contains this venue\n    for (const cluster of clusters) {\n      const props = cluster.properties as any;\n      if (props.cluster) {\n        const leaves = supercluster.getLeaves(props.cluster_id, Infinity);\n        const containsVenue = leaves.some((leaf) => leaf.properties.id === highlightedVenueId);\n        if (containsVenue) {\n          return props.cluster_id;\n        }\n      }\n    }\n    return null;\n  }, [highlightedVenueId, clusters, supercluster, bounds]);\n\n  // Calculate initial bounds\n  const initialBounds = useMemo(() => {\n    if (mappableVenues.length === 0) return null;\n\n    const lats = mappableVenues.map((v) => v.latitude!);\n    const lngs = mappableVenues.map((v) => v.longitude!);\n\n    return {\n      minLat: Math.min(...lats),\n      maxLat: Math.max(...lats),\n      minLng: Math.min(...lngs),\n      maxLng: Math.max(...lngs),\n    };\n  }, [mappableVenues]);\n\n  // Fit to bounds when venues change (but not on initial load if we have saved state)\n  const hasRestoredState = useRef(false);\n\n  useEffect(() => {\n    if (!mapRef.current || !initialBounds) return;\n\n    // Skip auto-fit if we're restoring saved state on first load\n    if (initialState && !hasRestoredState.current) {\n      hasRestoredState.current = true;\n      return;\n    }\n\n    const map = mapRef.current;\n    map.fitBounds(\n      [\n        [initialBounds.minLng, initialBounds.minLat],\n        [initialBounds.maxLng, initialBounds.maxLat],\n      ],\n      { padding: 50, maxZoom: 12, duration: 0 },\n    );\n  }, [initialBounds, initialState]);\n\n  // Handle map load\n  const onMapLoad = useCallback(() => {\n    if (!mapRef.current) return;\n\n    const map = mapRef.current;\n\n    // If we have saved state to restore, use it\n    if (initialState) {\n      map.fitBounds(\n        [\n          [initialState.bounds.west, initialState.bounds.south],\n          [initialState.bounds.east, initialState.bounds.north],\n        ],\n        { padding: 0, duration: 0 },\n      );\n    } else if (initialBounds) {\n      // Otherwise fit to all venues\n      map.fitBounds(\n        [\n          [initialBounds.minLng, initialBounds.minLat],\n          [initialBounds.maxLng, initialBounds.maxLat],\n        ],\n        { padding: 50, maxZoom: 12, duration: 0 },\n      );\n    }\n\n    // Set initial bounds state\n    const mapBounds = map.getBounds();\n    if (mapBounds) {\n      const newBounds: [number, number, number, number] = [\n        mapBounds.getWest(),\n        mapBounds.getSouth(),\n        mapBounds.getEast(),\n        mapBounds.getNorth(),\n      ];\n      setBounds(newBounds);\n      setZoom(map.getZoom());\n\n      // Notify parent\n      onBoundsChange?.(\n        {\n          west: newBounds[0],\n          south: newBounds[1],\n          east: newBounds[2],\n          north: newBounds[3],\n        },\n        map.getZoom(),\n      );\n    }\n  }, [initialBounds, initialState, onBoundsChange]);\n\n  // Handle map move\n  const onMoveEnd = useCallback(() => {\n    if (!mapRef.current) return;\n\n    const map = mapRef.current;\n    const mapBounds = map.getBounds();\n    const newZoom = map.getZoom();\n\n    if (mapBounds) {\n      const newBounds: [number, number, number, number] = [\n        mapBounds.getWest(),\n        mapBounds.getSouth(),\n        mapBounds.getEast(),\n        mapBounds.getNorth(),\n      ];\n      setBounds(newBounds);\n      setZoom(newZoom);\n\n      // Notify parent of bounds change for list filtering and state persistence\n      onBoundsChange?.(\n        {\n          west: newBounds[0],\n          south: newBounds[1],\n          east: newBounds[2],\n          north: newBounds[3],\n        },\n        newZoom,\n      );\n    }\n  }, [onBoundsChange]);\n\n  // Handle cluster click - smart zoom based on cluster size\n  const handleClusterClick = useCallback(\n    (clusterId: number, clusterLng: number, clusterLat: number) => {\n      if (!mapRef.current) return;\n\n      const leaves = supercluster.getLeaves(clusterId, Infinity);\n      if (leaves.length === 0) return;\n\n      // For large clusters (100+), use expansion zoom (one level at a time)\n      // This prevents zooming out when clicking a cluster that spans a huge area\n      if (leaves.length > 100) {\n        const expansionZoom = supercluster.getClusterExpansionZoom(clusterId);\n        mapRef.current.flyTo({\n          center: [clusterLng, clusterLat],\n          zoom: Math.min(expansionZoom + 1, 14),\n          duration: 500,\n        });\n        return;\n      }\n\n      // For smaller clusters, fit bounds to show all venues\n      const lngs = leaves.map((l) => l.geometry.coordinates[0]);\n      const lats = leaves.map((l) => l.geometry.coordinates[1]);\n\n      const minLng = Math.min(...lngs);\n      const maxLng = Math.max(...lngs);\n      const minLat = Math.min(...lats);\n      const maxLat = Math.max(...lats);\n\n      const lngPad = Math.max((maxLng - minLng) * 0.15, 0.01);\n      const latPad = Math.max((maxLat - minLat) * 0.15, 0.01);\n\n      mapRef.current.fitBounds(\n        [\n          [minLng - lngPad, minLat - latPad],\n          [maxLng + lngPad, maxLat + latPad],\n        ],\n        { padding: 50, maxZoom: 16, duration: 500 },\n      );\n    },\n    [supercluster],\n  );\n\n  // Format count for display\n  const formatCount = (count: number): string => {\n    if (count >= 1000) return `${(count / 1000).toFixed(1)}k`;\n    return count.toString();\n  };\n\n  // Empty state\n  if (mappableVenues.length === 0) {\n    return (\n      <div className=\"flex flex-col items-center justify-center h-full bg-card border rounded-lg p-8\">\n        <MapPin className=\"h-12 w-12 text-muted-foreground mb-4\" />\n        <p className=\"text-lg font-medium text-foreground\">No venues with locations</p>\n        <p className=\"text-sm text-muted-foreground mt-1\">Venues will appear once geocoded</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-full rounded-lg overflow-hidden border bg-card\">\n      <Map\n        ref={mapRef}\n        initialViewState={{\n          latitude: initialBounds ? (initialBounds.minLat + initialBounds.maxLat) / 2 : 50,\n          longitude: initialBounds ? (initialBounds.minLng + initialBounds.maxLng) / 2 : 0,\n          zoom: 3,\n        }}\n        mapStyle={MAP_STYLE}\n        style={{ width: \"100%\", height: \"100%\" }}\n        onLoad={onMapLoad}\n        onMoveEnd={onMoveEnd}\n        onClick={() => onSelectVenue(null)}\n      >\n        <NavigationControl position=\"top-right\" />\n\n        {/* Render clusters and individual markers */}\n        {clusters.map((cluster) => {\n          const [longitude, latitude] = cluster.geometry.coordinates;\n          const properties = cluster.properties as any;\n\n          // It's a cluster\n          if (properties.cluster) {\n            const count = properties.point_count;\n            const isHighlighted = properties.cluster_id === highlightedClusterId;\n            const baseSize = Math.min(28 + Math.sqrt(count) * 2, 50);\n            const size = isHighlighted ? baseSize * 1.3 : baseSize;\n\n            return (\n              <Marker\n                key={`cluster-${properties.cluster_id}`}\n                longitude={longitude}\n                latitude={latitude}\n                anchor=\"center\"\n                onClick={(e) => {\n                  e.originalEvent.stopPropagation();\n                  handleClusterClick(properties.cluster_id, longitude, latitude);\n                }}\n              >\n                <div\n                  className={cn(\n                    \"flex items-center justify-center rounded-full cursor-pointer transition-all duration-150\",\n                    isHighlighted ? \"scale-110 ring-4 ring-accent/50\" : \"hover:scale-110\",\n                  )}\n                  style={{\n                    width: size,\n                    height: size,\n                    backgroundColor: isHighlighted ? \"hsl(var(--accent))\" : \"hsl(var(--primary))\",\n                    color: \"hsl(var(--primary-foreground))\",\n                    fontSize: Math.max(11, baseSize * 0.32),\n                    fontWeight: 600,\n                    boxShadow: isHighlighted ? \"0 4px 12px rgba(0,0,0,0.4)\" : \"0 2px 8px rgba(0,0,0,0.3)\",\n                    border: isHighlighted ? \"3px solid white\" : \"2px solid white\",\n                  }}\n                >\n                  {formatCount(count)}\n                </div>\n              </Marker>\n            );\n          }\n\n          // It's an individual venue\n          const venue = properties.venue as VenueListing;\n          const isHighlighted = highlightedVenueId === venue.id;\n\n          // Handler for both mouse and touch interactions\n          const handleMarkerInteraction = (e: React.MouseEvent | React.TouchEvent) => {\n            e.stopPropagation();\n            onSelectVenue(venue);\n            // Smart pan to ensure popup is visible\n            if (venue.longitude && venue.latitude) {\n              setTimeout(() => ensurePopupVisible(venue.longitude!, venue.latitude!), 50);\n            }\n          };\n\n          return (\n            <Marker key={venue.id} longitude={longitude} latitude={latitude} anchor=\"bottom\">\n              <div\n                className={`cursor-pointer transition-transform duration-150 ${\n                  isHighlighted ? \"scale-150 z-10\" : \"hover:scale-125\"\n                }`}\n                onMouseEnter={handleMarkerInteraction}\n                onClick={handleMarkerInteraction}\n                onTouchStart={handleMarkerInteraction}\n              >\n                <MapPin\n                  className=\"h-7 w-7 drop-shadow-lg\"\n                  style={{\n                    fill: isHighlighted ? \"hsl(var(--accent))\" : \"hsl(var(--primary))\",\n                    stroke: \"white\",\n                    strokeWidth: 1.5,\n                  }}\n                />\n              </div>\n            </Marker>\n          );\n        })}\n\n        {/* Popup for selected venue */}\n        {selectedVenue && selectedVenue.latitude && selectedVenue.longitude && (\n          <Popup\n            longitude={selectedVenue.longitude}\n            latitude={selectedVenue.latitude}\n            anchor=\"bottom\"\n            onClose={() => onSelectVenue(null)}\n            closeOnClick={false}\n            offset={25}\n            maxWidth=\"200px\"\n          >\n            <div className=\"p-2.5 min-w-[160px]\">\n              <div className=\"flex items-start justify-between gap-1 mb-1\">\n                <h3 className=\"font-semibold leading-tight line-clamp-2\">{selectedVenue.name}</h3>\n                <FavouriteButton listingId={selectedVenue.id} size=\"sm\" className=\"h-5 w-5 p-0 shrink-0\" />\n              </div>\n\n              {selectedVenue.venue_type && (\n                <Badge variant=\"secondary\" className=\"text-[10px] px-1.5 py-0 mb-1.5\">\n                  {selectedVenue.venue_type}\n                </Badge>\n              )}\n\n              <div className=\"text-muted-foreground mb-2\">\n                {selectedVenue.town_city && (\n                  <p>\n                    {selectedVenue.town_city}, {selectedVenue.country}\n                  </p>\n                )}\n                {selectedVenue.venue_capacity && (\n                  <p className=\"flex items-center gap-1\">\n                    <Users className=\"h-2.5 w-2.5\" />\n                    {selectedVenue.venue_capacity.toLocaleString()} capacity\n                  </p>\n                )}\n              </div>\n\n              <Button asChild size=\"sm\" className=\"w-full h-7 text-xs\">\n                <Link\n                  href={getVenueUrl({\n                    slug: selectedVenue.slug,\n                    country: selectedVenue.country,\n                    region_slug: selectedVenue.region_slug,\n                    town_city: selectedVenue.town_city,\n                  })}\n                >\n                  View Details\n                </Link>\n              </Button>\n            </div>\n          </Popup>\n        )}\n      </Map>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}