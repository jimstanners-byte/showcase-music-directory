{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/venues/VenueMap.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport { useMemo, useCallback, useEffect, useRef, useState } from \"react\";\nimport Map, { Marker, Popup, NavigationControl, MapRef } from \"react-map-gl/maplibre\";\nimport Supercluster from \"supercluster\";\nimport { VenueListing } from \"@/hooks/useVenues\";\nimport { getVenueUrl } from \"@/hooks/useVenueUrl\";\nimport { MapPin, Users } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { FavouriteButton } from \"@/components/FavouriteButton\";\nimport { cn } from \"@/lib/utils\";\nimport \"maplibre-gl/dist/maplibre-gl.css\";\n\n// Free map style\nconst MAP_STYLE = \"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json\";\n\nexport interface MapBounds {\n  north: number;\n  south: number;\n  east: number;\n  west: number;\n}\n\ninterface VenueMapProps {\n  venues: VenueListing[];\n  selectedVenue: VenueListing | null;\n  onSelectVenue: (venue: VenueListing | null) => void;\n  highlightedVenueId?: string | null;\n  onBoundsChange?: (bounds: MapBounds, zoom: number) => void;\n  initialState?: {\n    bounds: MapBounds;\n    zoom: number;\n  } | null;\n}\n\n// Type for our cluster points\ninterface VenueProperties {\n  id: string;\n  venue: VenueListing;\n}\n\ntype VenuePoint = GeoJSON.Feature<GeoJSON.Point, VenueProperties>;\n\nexport function VenueMap({\n  venues,\n  selectedVenue,\n  onSelectVenue,\n  highlightedVenueId,\n  onBoundsChange,\n  initialState,\n}: VenueMapProps) {\n  const mapRef = useRef<MapRef>(null);\n  const [zoom, setZoom] = useState(3);\n  const [bounds, setBounds] = useState<[number, number, number, number] | null>(null);\n\n  // Smart auto-pan: only pan if popup would be clipped, with smooth animation\n  const ensurePopupVisible = useCallback((lng: number, lat: number) => {\n    if (!mapRef.current) return;\n\n    const map = mapRef.current;\n    const point = map.project([lng, lat]);\n    const container = map.getContainer();\n    const width = container.offsetWidth;\n    const height = container.offsetHeight;\n\n    // Popup dimensions (approximate) + padding\n    const popupHeight = 180; // Slightly taller for venue popup with capacity\n    const popupWidth = 100; // Half of popup width (centered on point)\n    const padding = 20; // Edge padding\n\n    let panX = 0;\n    let panY = 0;\n\n    // Check if popup would be clipped at top\n    if (point.y - popupHeight - padding < 0) {\n      panY = point.y - popupHeight - padding;\n    }\n\n    // Check if popup would be clipped at bottom (unlikely with bottom anchor, but check anyway)\n    if (point.y + padding > height) {\n      panY = point.y + padding - height;\n    }\n\n    // Check left edge\n    if (point.x - popupWidth - padding < 0) {\n      panX = point.x - popupWidth - padding;\n    }\n\n    // Check right edge\n    if (point.x + popupWidth + padding > width) {\n      panX = point.x + popupWidth + padding - width;\n    }\n\n    // Only pan if needed\n    if (panX !== 0 || panY !== 0) {\n      map.panBy([panX, panY], { duration: 300 });\n    }\n  }, []);\n\n  // Filter venues with valid coordinates\n  const mappableVenues = useMemo(() => venues.filter((v) => v.latitude !== null && v.longitude !== null), [venues]);\n\n  // Create supercluster instance - smaller radius for more granular clusters\n  const supercluster = useMemo(() => {\n    const cluster = new Supercluster<VenueProperties>({\n      radius: 15, // Small radius so only very close venues cluster\n      maxZoom: 8, // Stop clustering at zoom 8 - show all individual pins beyond this\n      minZoom: 0,\n    });\n\n    const points: VenuePoint[] = mappableVenues.map((venue) => ({\n      type: \"Feature\",\n      properties: {\n        id: venue.id,\n        venue,\n      },\n      geometry: {\n        type: \"Point\",\n        coordinates: [venue.longitude!, venue.latitude!],\n      },\n    }));\n\n    cluster.load(points);\n    return cluster;\n  }, [mappableVenues]);\n\n  // Get clusters for current viewport\n  const clusters = useMemo(() => {\n    if (!bounds) return [];\n    return supercluster.getClusters(bounds, Math.floor(zoom));\n  }, [supercluster, bounds, zoom]);\n\n  // Find which cluster contains the highlighted venue (if any)\n  const highlightedClusterId = useMemo(() => {\n    if (!highlightedVenueId || !bounds) return null;\n\n    // Check if the highlighted venue is visible as an individual marker\n    const isIndividualMarker = clusters.some((cluster) => {\n      const props = cluster.properties as any;\n      return !props.cluster && props.venue?.id === highlightedVenueId;\n    });\n\n    if (isIndividualMarker) return null; // No need to highlight cluster\n\n    // Find which cluster contains this venue\n    for (const cluster of clusters) {\n      const props = cluster.properties as any;\n      if (props.cluster) {\n        const leaves = supercluster.getLeaves(props.cluster_id, Infinity);\n        const containsVenue = leaves.some((leaf) => leaf.properties.id === highlightedVenueId);\n        if (containsVenue) {\n          return props.cluster_id;\n        }\n      }\n    }\n    return null;\n  }, [highlightedVenueId, clusters, supercluster, bounds]);\n\n  // Calculate initial bounds\n  const initialBounds = useMemo(() => {\n    if (mappableVenues.length === 0) return null;\n\n    const lats = mappableVenues.map((v) => v.latitude!);\n    const lngs = mappableVenues.map((v) => v.longitude!);\n\n    return {\n      minLat: Math.min(...lats),\n      maxLat: Math.max(...lats),\n      minLng: Math.min(...lngs),\n      maxLng: Math.max(...lngs),\n    };\n  }, [mappableVenues]);\n\n  // Fit to bounds when venues change (but not on initial load if we have saved state)\n  const hasRestoredState = useRef(false);\n\n  useEffect(() => {\n    if (!mapRef.current || !initialBounds) return;\n\n    // Skip auto-fit if we're restoring saved state on first load\n    if (initialState && !hasRestoredState.current) {\n      hasRestoredState.current = true;\n      return;\n    }\n\n    const map = mapRef.current;\n    map.fitBounds(\n      [\n        [initialBounds.minLng, initialBounds.minLat],\n        [initialBounds.maxLng, initialBounds.maxLat],\n      ],\n      { padding: 50, maxZoom: 12, duration: 0 },\n    );\n  }, [initialBounds, initialState]);\n\n  // Handle map load\n  const onMapLoad = useCallback(() => {\n    if (!mapRef.current) return;\n\n    const map = mapRef.current;\n\n    // If we have saved state to restore, use it\n    if (initialState) {\n      map.fitBounds(\n        [\n          [initialState.bounds.west, initialState.bounds.south],\n          [initialState.bounds.east, initialState.bounds.north],\n        ],\n        { padding: 0, duration: 0 },\n      );\n    } else if (initialBounds) {\n      // Otherwise fit to all venues\n      map.fitBounds(\n        [\n          [initialBounds.minLng, initialBounds.minLat],\n          [initialBounds.maxLng, initialBounds.maxLat],\n        ],\n        { padding: 50, maxZoom: 12, duration: 0 },\n      );\n    }\n\n    // Set initial bounds state\n    const mapBounds = map.getBounds();\n    if (mapBounds) {\n      const newBounds: [number, number, number, number] = [\n        mapBounds.getWest(),\n        mapBounds.getSouth(),\n        mapBounds.getEast(),\n        mapBounds.getNorth(),\n      ];\n      setBounds(newBounds);\n      setZoom(map.getZoom());\n\n      // Notify parent\n      onBoundsChange?.(\n        {\n          west: newBounds[0],\n          south: newBounds[1],\n          east: newBounds[2],\n          north: newBounds[3],\n        },\n        map.getZoom(),\n      );\n    }\n  }, [initialBounds, initialState, onBoundsChange]);\n\n  // Handle map move\n  const onMoveEnd = useCallback(() => {\n    if (!mapRef.current) return;\n\n    const map = mapRef.current;\n    const mapBounds = map.getBounds();\n    const newZoom = map.getZoom();\n\n    if (mapBounds) {\n      const newBounds: [number, number, number, number] = [\n        mapBounds.getWest(),\n        mapBounds.getSouth(),\n        mapBounds.getEast(),\n        mapBounds.getNorth(),\n      ];\n      setBounds(newBounds);\n      setZoom(newZoom);\n\n      // Notify parent of bounds change for list filtering and state persistence\n      onBoundsChange?.(\n        {\n          west: newBounds[0],\n          south: newBounds[1],\n          east: newBounds[2],\n          north: newBounds[3],\n        },\n        newZoom,\n      );\n    }\n  }, [onBoundsChange]);\n\n  // Handle cluster click - smart zoom based on cluster size\n  const handleClusterClick = useCallback(\n    (clusterId: number, clusterLng: number, clusterLat: number) => {\n      if (!mapRef.current) return;\n\n      const leaves = supercluster.getLeaves(clusterId, Infinity);\n      if (leaves.length === 0) return;\n\n      // For large clusters (100+), use expansion zoom (one level at a time)\n      // This prevents zooming out when clicking a cluster that spans a huge area\n      if (leaves.length > 100) {\n        const expansionZoom = supercluster.getClusterExpansionZoom(clusterId);\n        mapRef.current.flyTo({\n          center: [clusterLng, clusterLat],\n          zoom: Math.min(expansionZoom + 1, 14),\n          duration: 500,\n        });\n        return;\n      }\n\n      // For smaller clusters, fit bounds to show all venues\n      const lngs = leaves.map((l) => l.geometry.coordinates[0]);\n      const lats = leaves.map((l) => l.geometry.coordinates[1]);\n\n      const minLng = Math.min(...lngs);\n      const maxLng = Math.max(...lngs);\n      const minLat = Math.min(...lats);\n      const maxLat = Math.max(...lats);\n\n      const lngPad = Math.max((maxLng - minLng) * 0.15, 0.01);\n      const latPad = Math.max((maxLat - minLat) * 0.15, 0.01);\n\n      mapRef.current.fitBounds(\n        [\n          [minLng - lngPad, minLat - latPad],\n          [maxLng + lngPad, maxLat + latPad],\n        ],\n        { padding: 50, maxZoom: 16, duration: 500 },\n      );\n    },\n    [supercluster],\n  );\n\n  // Format count for display\n  const formatCount = (count: number): string => {\n    if (count >= 1000) return `${(count / 1000).toFixed(1)}k`;\n    return count.toString();\n  };\n\n  // Empty state\n  if (mappableVenues.length === 0) {\n    return (\n      <div className=\"flex flex-col items-center justify-center h-full bg-card border rounded-lg p-8\">\n        <MapPin className=\"h-12 w-12 text-muted-foreground mb-4\" />\n        <p className=\"text-lg font-medium text-foreground\">No venues with locations</p>\n        <p className=\"text-sm text-muted-foreground mt-1\">Venues will appear once geocoded</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-full rounded-lg overflow-hidden border bg-card\">\n      <Map\n        ref={mapRef}\n        initialViewState={{\n          latitude: initialBounds ? (initialBounds.minLat + initialBounds.maxLat) / 2 : 50,\n          longitude: initialBounds ? (initialBounds.minLng + initialBounds.maxLng) / 2 : 0,\n          zoom: 3,\n        }}\n        mapStyle={MAP_STYLE}\n        style={{ width: \"100%\", height: \"100%\" }}\n        onLoad={onMapLoad}\n        onMoveEnd={onMoveEnd}\n        onClick={() => onSelectVenue(null)}\n      >\n        <NavigationControl position=\"top-right\" />\n\n        {/* Render clusters and individual markers */}\n        {clusters.map((cluster) => {\n          const [longitude, latitude] = cluster.geometry.coordinates;\n          const properties = cluster.properties as any;\n\n          // It's a cluster\n          if (properties.cluster) {\n            const count = properties.point_count;\n            const isHighlighted = properties.cluster_id === highlightedClusterId;\n            const baseSize = Math.min(28 + Math.sqrt(count) * 2, 50);\n            const size = isHighlighted ? baseSize * 1.3 : baseSize;\n\n            return (\n              <Marker\n                key={`cluster-${properties.cluster_id}`}\n                longitude={longitude}\n                latitude={latitude}\n                anchor=\"center\"\n                onClick={(e) => {\n                  e.originalEvent.stopPropagation();\n                  handleClusterClick(properties.cluster_id, longitude, latitude);\n                }}\n              >\n                <div\n                  className={cn(\n                    \"flex items-center justify-center rounded-full cursor-pointer transition-all duration-150\",\n                    isHighlighted ? \"scale-110 ring-4 ring-accent/50\" : \"hover:scale-110\",\n                  )}\n                  style={{\n                    width: size,\n                    height: size,\n                    backgroundColor: isHighlighted ? \"hsl(var(--accent))\" : \"hsl(var(--primary))\",\n                    color: \"hsl(var(--primary-foreground))\",\n                    fontSize: Math.max(11, baseSize * 0.32),\n                    fontWeight: 600,\n                    boxShadow: isHighlighted ? \"0 4px 12px rgba(0,0,0,0.4)\" : \"0 2px 8px rgba(0,0,0,0.3)\",\n                    border: isHighlighted ? \"3px solid white\" : \"2px solid white\",\n                  }}\n                >\n                  {formatCount(count)}\n                </div>\n              </Marker>\n            );\n          }\n\n          // It's an individual venue\n          const venue = properties.venue as VenueListing;\n          const isHighlighted = highlightedVenueId === venue.id;\n\n          // Handler for both mouse and touch interactions\n          const handleMarkerInteraction = (e: React.MouseEvent | React.TouchEvent) => {\n            e.stopPropagation();\n            onSelectVenue(venue);\n            // Smart pan to ensure popup is visible\n            if (venue.longitude && venue.latitude) {\n              setTimeout(() => ensurePopupVisible(venue.longitude!, venue.latitude!), 50);\n            }\n          };\n\n          return (\n            <Marker key={venue.id} longitude={longitude} latitude={latitude} anchor=\"bottom\">\n              <div\n                className={`cursor-pointer transition-transform duration-150 ${\n                  isHighlighted ? \"scale-150 z-10\" : \"hover:scale-125\"\n                }`}\n                onMouseEnter={handleMarkerInteraction}\n                onClick={handleMarkerInteraction}\n                onTouchStart={handleMarkerInteraction}\n              >\n                <MapPin\n                  className=\"h-7 w-7 drop-shadow-lg\"\n                  style={{\n                    fill: isHighlighted ? \"hsl(var(--accent))\" : \"hsl(var(--primary))\",\n                    stroke: \"white\",\n                    strokeWidth: 1.5,\n                  }}\n                />\n              </div>\n            </Marker>\n          );\n        })}\n\n        {/* Popup for selected venue */}\n        {selectedVenue && selectedVenue.latitude && selectedVenue.longitude && (\n          <Popup\n            longitude={selectedVenue.longitude}\n            latitude={selectedVenue.latitude}\n            anchor=\"bottom\"\n            onClose={() => onSelectVenue(null)}\n            closeOnClick={false}\n            offset={25}\n            maxWidth=\"200px\"\n          >\n            <div className=\"p-2.5 min-w-[160px]\">\n              <div className=\"flex items-start justify-between gap-1 mb-1\">\n                <h3 className=\"font-semibold leading-tight line-clamp-2\">{selectedVenue.name}</h3>\n                <FavouriteButton listingId={selectedVenue.id} size=\"sm\" className=\"h-5 w-5 p-0 shrink-0\" />\n              </div>\n\n              {selectedVenue.venue_type && (\n                <Badge variant=\"secondary\" className=\"text-[10px] px-1.5 py-0 mb-1.5\">\n                  {selectedVenue.venue_type}\n                </Badge>\n              )}\n\n              <div className=\"text-muted-foreground mb-2\">\n                {selectedVenue.town_city && (\n                  <p>\n                    {selectedVenue.town_city}, {selectedVenue.country}\n                  </p>\n                )}\n                {selectedVenue.venue_capacity && (\n                  <p className=\"flex items-center gap-1\">\n                    <Users className=\"h-2.5 w-2.5\" />\n                    {selectedVenue.venue_capacity.toLocaleString()} capacity\n                  </p>\n                )}\n              </div>\n\n              <Button asChild size=\"sm\" className=\"w-full h-7 text-xs\">\n                <Link\n                  href={getVenueUrl({\n                    slug: selectedVenue.slug,\n                    country: selectedVenue.country,\n                    region_slug: selectedVenue.region_slug,\n                    town_city: selectedVenue.town_city,\n                  })}\n                >\n                  View Details\n                </Link>\n              </Button>\n            </div>\n          </Popup>\n        )}\n      </Map>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}