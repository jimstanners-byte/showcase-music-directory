{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/CategoryPage.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/showcase-next/src/components/CategoryPage.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/showcase-next/src/components/CategoryPage.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,4RAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAiT,GAC9U,+EACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/CategoryPage.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/showcase-next/src/components/CategoryPage.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/showcase-next/src/components/CategoryPage.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,4RAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA6R,GAC1T,2DACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 51, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/integrations/supabase/server.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\nimport type { Database } from './types';\r\n\r\nconst SUPABASE_URL = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst SUPABASE_PUBLISHABLE_KEY = process.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY;\r\n\r\nif (!SUPABASE_URL || !SUPABASE_PUBLISHABLE_KEY) {\r\n  throw new Error('Missing Supabase environment variables');\r\n}\r\n\r\n// Server-side client - no auth persistence needed for public data\r\nexport const supabaseServer = createClient<Database>(\r\n  SUPABASE_URL,\r\n  SUPABASE_PUBLISHABLE_KEY,\r\n  {\r\n    auth: {\r\n      persistSession: false,\r\n      autoRefreshToken: false,\r\n    },\r\n  }\r\n);"],"names":[],"mappings":";;;;AAAA;;AAGA,MAAM;AACN,MAAM;AAEN;;AAKO,MAAM,iBAAiB,IAAA,2MAAY,EACxC,cACA,0BACA;IACE,MAAM;QACJ,gBAAgB;QAChB,kBAAkB;IACpB;AACF","debugId":null}},
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/lib/data/categories.ts"],"sourcesContent":["import { supabaseServer } from '@/integrations/supabase/server';\r\nimport { cache } from 'react';\r\nimport { Category } from '@/types/database';\r\n\r\n/**\r\n * Get all top-level categories (parent_id is null)\r\n * Cached to prevent duplicate fetches in the same request\r\n */\r\nexport const getTopLevelCategories = cache(async (): Promise<Category[]> => {\r\n  const { data, error } = await supabaseServer\r\n    .from('categories')\r\n    .select('*')\r\n    .is('parent_id', null)\r\n    .order('name');\r\n\r\n  if (error) {\r\n    console.error('Error fetching categories:', error);\r\n    return [];\r\n  }\r\n\r\n  return data as Category[];\r\n});\r\n\r\n/**\r\n * Get category by slug (checks both url_slug and slug fields)\r\n */\r\nexport const getCategoryBySlug = cache(async (slug: string): Promise<Category | null> => {\r\n  // First try to find by url_slug\r\n  const { data: byUrlSlug, error: urlSlugError } = await supabaseServer\r\n    .from('categories')\r\n    .select('*')\r\n    .eq('url_slug', slug)\r\n    .maybeSingle();\r\n\r\n  if (urlSlugError) {\r\n    console.error('Error fetching category by url_slug:', urlSlugError);\r\n  }\r\n  \r\n  if (byUrlSlug) {\r\n    return byUrlSlug as Category;\r\n  }\r\n\r\n  // Fallback to regular slug\r\n  const { data, error } = await supabaseServer\r\n    .from('categories')\r\n    .select('*')\r\n    .eq('slug', slug)\r\n    .maybeSingle();\r\n\r\n  if (error) {\r\n    console.error('Error fetching category by slug:', error);\r\n    return null;\r\n  }\r\n\r\n  return data as Category | null;\r\n});\r\n\r\n/**\r\n * Get subcategories for a given parent category\r\n */\r\nexport const getSubcategories = cache(async (parentId: string): Promise<Category[]> => {\r\n  const { data, error } = await supabaseServer\r\n    .from('categories')\r\n    .select('*')\r\n    .eq('parent_id', parentId)\r\n    .order('name');\r\n\r\n  if (error) {\r\n    console.error('Error fetching subcategories:', error);\r\n    return [];\r\n  }\r\n\r\n  return data as Category[];\r\n});\r\n\r\n/**\r\n * Get all categories\r\n */\r\nexport const getAllCategories = cache(async (): Promise<Category[]> => {\r\n  const { data, error } = await supabaseServer\r\n    .from('categories')\r\n    .select('*')\r\n    .order('name');\r\n\r\n  if (error) {\r\n    console.error('Error fetching all categories:', error);\r\n    return [];\r\n  }\r\n\r\n  return data as Category[];\r\n});\r\n\r\n/**\r\n * Get listings for a category with optional filters\r\n */\r\nexport const getListingsByCategory = cache(async (\r\n  categoryId: string,\r\n  options?: {\r\n    continent?: string;\r\n    country?: string;\r\n    region?: string;\r\n    city?: string;\r\n  }\r\n): Promise<any[]> => {\r\n  let query = supabaseServer\r\n    .from('listings')\r\n    .select(`\r\n      *,\r\n      listing_categories!inner(category_id)\r\n    `)\r\n    .eq('listing_categories.category_id', categoryId)\r\n    .eq('is_active', true)\r\n    .order('tier', { ascending: false })\r\n    .order('name');\r\n\r\n  if (options?.continent) {\r\n    query = query.eq('continent', options.continent);\r\n  }\r\n  if (options?.country) {\r\n    query = query.eq('country', options.country);\r\n  }\r\n  if (options?.region) {\r\n    query = query.eq('region', options.region);\r\n  }\r\n  if (options?.city) {\r\n    query = query.eq('city', options.city);\r\n  }\r\n\r\n  const { data, error } = await query;\r\n\r\n  if (error) {\r\n    console.error('Error fetching listings:', error);\r\n    return [];\r\n  }\r\n\r\n  return data || [];\r\n});"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AACA;;;AAOO,MAAM,wBAAwB,IAAA,kOAAK,EAAC;IACzC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,+KAAc,CACzC,IAAI,CAAC,cACL,MAAM,CAAC,KACP,EAAE,CAAC,aAAa,MAChB,KAAK,CAAC;IAET,IAAI,OAAO;QACT,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,EAAE;IACX;IAEA,OAAO;AACT;AAKO,MAAM,oBAAoB,IAAA,kOAAK,EAAC,OAAO;IAC5C,gCAAgC;IAChC,MAAM,EAAE,MAAM,SAAS,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,+KAAc,CAClE,IAAI,CAAC,cACL,MAAM,CAAC,KACP,EAAE,CAAC,YAAY,MACf,WAAW;IAEd,IAAI,cAAc;QAChB,QAAQ,KAAK,CAAC,wCAAwC;IACxD;IAEA,IAAI,WAAW;QACb,OAAO;IACT;IAEA,2BAA2B;IAC3B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,+KAAc,CACzC,IAAI,CAAC,cACL,MAAM,CAAC,KACP,EAAE,CAAC,QAAQ,MACX,WAAW;IAEd,IAAI,OAAO;QACT,QAAQ,KAAK,CAAC,oCAAoC;QAClD,OAAO;IACT;IAEA,OAAO;AACT;AAKO,MAAM,mBAAmB,IAAA,kOAAK,EAAC,OAAO;IAC3C,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,+KAAc,CACzC,IAAI,CAAC,cACL,MAAM,CAAC,KACP,EAAE,CAAC,aAAa,UAChB,KAAK,CAAC;IAET,IAAI,OAAO;QACT,QAAQ,KAAK,CAAC,iCAAiC;QAC/C,OAAO,EAAE;IACX;IAEA,OAAO;AACT;AAKO,MAAM,mBAAmB,IAAA,kOAAK,EAAC;IACpC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,+KAAc,CACzC,IAAI,CAAC,cACL,MAAM,CAAC,KACP,KAAK,CAAC;IAET,IAAI,OAAO;QACT,QAAQ,KAAK,CAAC,kCAAkC;QAChD,OAAO,EAAE;IACX;IAEA,OAAO;AACT;AAKO,MAAM,wBAAwB,IAAA,kOAAK,EAAC,OACzC,YACA;IAOA,IAAI,QAAQ,+KAAc,CACvB,IAAI,CAAC,YACL,MAAM,CAAC,CAAC;;;IAGT,CAAC,EACA,EAAE,CAAC,kCAAkC,YACrC,EAAE,CAAC,aAAa,MAChB,KAAK,CAAC,QAAQ;QAAE,WAAW;IAAM,GACjC,KAAK,CAAC;IAET,IAAI,SAAS,WAAW;QACtB,QAAQ,MAAM,EAAE,CAAC,aAAa,QAAQ,SAAS;IACjD;IACA,IAAI,SAAS,SAAS;QACpB,QAAQ,MAAM,EAAE,CAAC,WAAW,QAAQ,OAAO;IAC7C;IACA,IAAI,SAAS,QAAQ;QACnB,QAAQ,MAAM,EAAE,CAAC,UAAU,QAAQ,MAAM;IAC3C;IACA,IAAI,SAAS,MAAM;QACjB,QAAQ,MAAM,EAAE,CAAC,QAAQ,QAAQ,IAAI;IACvC;IAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM;IAE9B,IAAI,OAAO;QACT,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO,EAAE;IACX;IAEA,OAAO,QAAQ,EAAE;AACnB","debugId":null}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/app/%5Bslug%5D/page.tsx"],"sourcesContent":["import { Metadata } from 'next';\nimport CategoryPage from '@/components/CategoryPage';\nimport { supabaseServer } from '@/integrations/supabase/server';\nimport { getCategoryBySlug, getSubcategories, getListingsByCategory } from '@/lib/data/categories';\n\nexport async function generateMetadata({ \n  params \n}: { \n  params: Promise<{ slug: string }>\n}): Promise<Metadata> {\n  const { slug } = await params;\n  \n  const { data: category, error } = await supabaseServer\n    .from('categories')\n    .select('name, seo_title, seo_meta_description, seo_meta_keywords')\n    .eq('slug', slug)\n    .single();\n\n  console.log('Metadata query result:', { category, error });\n\n  if (!category) {\n    return {\n      title: 'Category Not Found | Showcase Music Directory',\n      description: 'The requested category could not be found'\n    };\n  }\n\n  const baseUrl = 'https://www.showcase-music.com';\n  const pageUrl = `${baseUrl}/${slug}`;\n\n  // Use SEO overrides if they exist, otherwise use defaults\n  const title = category.seo_title || `${category.name} | Showcase Music Directory`;\n  const description = category.seo_meta_description || `Find ${category.name} companies and services on Showcase Music Directory`;\n  const keywords = category.seo_meta_keywords?.split(',').map((k: string) => k.trim()) || [];\n\n  return {\n    title,\n    description,\n    ...(keywords.length > 0 && { keywords }),\n    alternates: {\n      canonical: pageUrl\n    },\n    openGraph: {\n      title,\n      description,\n      url: pageUrl,\n      siteName: 'Showcase Music Directory',\n      type: 'website',\n    },\n    twitter: {\n      card: 'summary',\n      title,\n      description,\n    },\n    robots: {\n      index: true,\n      follow: true\n    }\n  };\n}\n\nexport default async function CategoryPageRoute({\n  params\n}: {\n  params: Promise<{ slug: string }>\n}) {\n  const { slug } = await params;\n  \n  // Fetch initial data server-side in parallel\n  const [category, subcategories] = await Promise.all([\n    getCategoryBySlug(slug),\n    getCategoryBySlug(slug).then(cat => cat ? getSubcategories(cat.id) : [])\n  ]);\n\n  // Pass initial data to client component (listings fetched client-side with filters)\n  return (\n    <CategoryPage \n      initialCategory={category}\n      initialSubcategories={subcategories}\n    />\n  );\n}"],"names":[],"mappings":";;;;;;;AACA;AACA;AACA;;;;;AAEO,eAAe,iBAAiB,EACrC,MAAM,EAGP;IACC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM;IAEvB,MAAM,EAAE,MAAM,QAAQ,EAAE,KAAK,EAAE,GAAG,MAAM,+KAAc,CACnD,IAAI,CAAC,cACL,MAAM,CAAC,4DACP,EAAE,CAAC,QAAQ,MACX,MAAM;IAET,QAAQ,GAAG,CAAC,0BAA0B;QAAE;QAAU;IAAM;IAExD,IAAI,CAAC,UAAU;QACb,OAAO;YACL,OAAO;YACP,aAAa;QACf;IACF;IAEA,MAAM,UAAU;IAChB,MAAM,UAAU,GAAG,QAAQ,CAAC,EAAE,MAAM;IAEpC,0DAA0D;IAC1D,MAAM,QAAQ,SAAS,SAAS,IAAI,GAAG,SAAS,IAAI,CAAC,2BAA2B,CAAC;IACjF,MAAM,cAAc,SAAS,oBAAoB,IAAI,CAAC,KAAK,EAAE,SAAS,IAAI,CAAC,mDAAmD,CAAC;IAC/H,MAAM,WAAW,SAAS,iBAAiB,EAAE,MAAM,KAAK,IAAI,CAAC,IAAc,EAAE,IAAI,OAAO,EAAE;IAE1F,OAAO;QACL;QACA;QACA,GAAI,SAAS,MAAM,GAAG,KAAK;YAAE;QAAS,CAAC;QACvC,YAAY;YACV,WAAW;QACb;QACA,WAAW;YACT;YACA;YACA,KAAK;YACL,UAAU;YACV,MAAM;QACR;QACA,SAAS;YACP,MAAM;YACN;YACA;QACF;QACA,QAAQ;YACN,OAAO;YACP,QAAQ;QACV;IACF;AACF;AAEe,eAAe,kBAAkB,EAC9C,MAAM,EAGP;IACC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM;IAEvB,6CAA6C;IAC7C,MAAM,CAAC,UAAU,cAAc,GAAG,MAAM,QAAQ,GAAG,CAAC;QAClD,IAAA,yKAAiB,EAAC;QAClB,IAAA,yKAAiB,EAAC,MAAM,IAAI,CAAC,CAAA,MAAO,MAAM,IAAA,wKAAgB,EAAC,IAAI,EAAE,IAAI,EAAE;KACxE;IAED,oFAAoF;IACpF,qBACE,kQAAC,iKAAY;QACX,iBAAiB;QACjB,sBAAsB;;;;;;AAG5B","debugId":null}}]
}