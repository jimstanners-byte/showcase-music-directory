{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/NotFound.tsx"],"sourcesContent":["'use client';\n\nimport { usePathname, useSearchParams } from 'next/navigation';\nimport { useEffect } from \"react\";\n\nconst NotFound = () => {\n  const pathname = usePathname();\n\n  useEffect(() => {\n    console.error(\"404 Error: User attempted to access non-existent route:\", pathname);\n  }, [pathname]);\n\n  return (\n    <div className=\"flex min-h-screen items-center justify-center bg-muted\">\n      <div className=\"text-center\">\n        <h1 className=\"mb-4 text-4xl font-bold\">404</h1>\n        <p className=\"mb-4 text-xl text-muted-foreground\">Oops! Page not found</p>\n        <a href=\"/\" className=\"text-primary underline hover:text-primary/90\">\n          Return to Home\n        </a>\n      </div>\n    </div>\n  );\n};\n\nexport default NotFound;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKA,MAAM,WAAW;IACf,MAAM,WAAW,IAAA,qKAAW;IAE5B,IAAA,sOAAS,EAAC;QACR,QAAQ,KAAK,CAAC,2DAA2D;IAC3E,GAAG;QAAC;KAAS;IAEb,qBACE,kQAAC;QAAI,WAAU;kBACb,cAAA,kQAAC;YAAI,WAAU;;8BACb,kQAAC;oBAAG,WAAU;8BAA0B;;;;;;8BACxC,kQAAC;oBAAE,WAAU;8BAAqC;;;;;;8BAClD,kQAAC;oBAAE,MAAK;oBAAI,WAAU;8BAA+C;;;;;;;;;;;;;;;;;AAM7E;uCAEe","debugId":null}},
    {"offset": {"line": 75, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/integrations/supabase/client.ts"],"sourcesContent":["// This file is automatically generated. Do not edit it directly.\r\n'use client';\r\nimport { createClient } from \"@supabase/supabase-js\";\r\nimport type { Database } from \"./types\";\r\n\r\nconst SUPABASE_URL = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst SUPABASE_PUBLISHABLE_KEY = process.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY;\r\n\r\n// Import the supabase client like this:\r\n// import { supabase } from \"@/integrations/supabase/client\";\r\n\r\nexport const supabase = createClient<Database>(SUPABASE_URL, SUPABASE_PUBLISHABLE_KEY, {\r\n  auth: {\r\n    storage: typeof window !== 'undefined' ? window.localStorage : undefined,\r\n    persistSession: true,\r\n    autoRefreshToken: true,\r\n    detectSessionInUrl: true,\r\n    flowType: 'pkce',\r\n  },\r\n});\r\n"],"names":[],"mappings":"AAAA,iEAAiE;;;;;AAEjE;AADA;;AAIA,MAAM;AACN,MAAM;AAKC,MAAM,WAAW,IAAA,2MAAY,EAAW,cAAc,0BAA0B;IACrF,MAAM;QACJ,SAAS,sCAAgC,0BAAsB;QAC/D,gBAAgB;QAChB,kBAAkB;QAClB,oBAAoB;QACpB,UAAU;IACZ;AACF","debugId":null}},
    {"offset": {"line": 98, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/hooks/useResourceBySlug.ts"],"sourcesContent":["'use client';\n\nimport { useQuery } from '@tanstack/react-query';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport type { Resource } from './useResources';\r\n\r\n// Path type for determining breadcrumb logic\r\nexport type ResourcePathType = 'category' | 'listing' | 'other';\r\n\r\n// Fetch single published resource by full slug path\r\nexport const useResourceBySlug = (slug: string) => {\r\n  return useQuery({\r\n    queryKey: ['resource', slug],\r\n    queryFn: async () => {\r\n      const { data, error } = await supabase\r\n        .from('resources')\r\n        .select('*')\r\n        .eq('slug', slug)\r\n        .eq('status', 'published')\r\n        .maybeSingle();\r\n\r\n      if (error) throw error;\r\n      return data as Resource | null;\r\n    },\r\n    enabled: !!slug,\r\n  });\r\n};\r\n\r\n// Helper to parse slug segments and build breadcrumb data\r\nexport interface BreadcrumbSegment {\r\n  label: string;\r\n  href: string;\r\n}\r\n\r\nexport interface ParsedSlug {\r\n  segments: string[];\r\n  articleSlug: string;\r\n  pathType: ResourcePathType;\r\n  listingSlug?: string;\r\n}\r\n\r\nexport const parseSlugForBreadcrumbs = (slug: string): ParsedSlug => {\r\n  const parts = slug.split('/').filter(Boolean);\r\n  const articleSlug = parts[parts.length - 1] || '';\r\n  const segments = parts.slice(0, -1);\r\n  \r\n  // Determine path type based on first segment\r\n  let pathType: ResourcePathType = 'other';\r\n  let listingSlug: string | undefined;\r\n  \r\n  if (parts[0] === 'categories') {\r\n    pathType = 'category';\r\n  } else if (parts[0] === 'listing' && parts.length >= 2) {\r\n    pathType = 'listing';\r\n    listingSlug = parts[1]; // The listing slug is the second segment\r\n  }\r\n  \r\n  return { segments, articleSlug, pathType, listingSlug };\r\n};\r\n\r\n// Convert slug to display name (e.g., \"backline-musical-instrument-hire\" -> \"Backline Musical Instrument Hire\")\r\nexport const slugToDisplayName = (slug: string): string => {\r\n  return slug\r\n    .split('-')\r\n    .map(word => word.charAt(0).toUpperCase() + word.slice(1))\r\n    .join(' ');\r\n};\r\n"],"names":[],"mappings":";;;;;;;;AAEA;AACA;AAHA;;;AAUO,MAAM,oBAAoB,CAAC;IAChC,OAAO,IAAA,2MAAQ,EAAC;QACd,UAAU;YAAC;YAAY;SAAK;QAC5B,SAAS;YACP,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,yKAAQ,CACnC,IAAI,CAAC,aACL,MAAM,CAAC,KACP,EAAE,CAAC,QAAQ,MACX,EAAE,CAAC,UAAU,aACb,WAAW;YAEd,IAAI,OAAO,MAAM;YACjB,OAAO;QACT;QACA,SAAS,CAAC,CAAC;IACb;AACF;AAeO,MAAM,0BAA0B,CAAC;IACtC,MAAM,QAAQ,KAAK,KAAK,CAAC,KAAK,MAAM,CAAC;IACrC,MAAM,cAAc,KAAK,CAAC,MAAM,MAAM,GAAG,EAAE,IAAI;IAC/C,MAAM,WAAW,MAAM,KAAK,CAAC,GAAG,CAAC;IAEjC,6CAA6C;IAC7C,IAAI,WAA6B;IACjC,IAAI;IAEJ,IAAI,KAAK,CAAC,EAAE,KAAK,cAAc;QAC7B,WAAW;IACb,OAAO,IAAI,KAAK,CAAC,EAAE,KAAK,aAAa,MAAM,MAAM,IAAI,GAAG;QACtD,WAAW;QACX,cAAc,KAAK,CAAC,EAAE,EAAE,yCAAyC;IACnE;IAEA,OAAO;QAAE;QAAU;QAAa;QAAU;IAAY;AACxD;AAGO,MAAM,oBAAoB,CAAC;IAChC,OAAO,KACJ,KAAK,CAAC,KACN,GAAG,CAAC,CAAA,OAAQ,KAAK,MAAM,CAAC,GAAG,WAAW,KAAK,KAAK,KAAK,CAAC,IACtD,IAAI,CAAC;AACV","debugId":null}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/lib/searchUtils.ts"],"sourcesContent":["'use client';\n\n/**\r\n * Known location terms to strip from search queries.\r\n * These are countries, regions, states, and major cities that users might append to searches.\r\n * Organized by type for maintainability.\r\n */\r\n\r\n// Countries (including common variations and abbreviations)\r\nconst COUNTRIES = [\r\n  // UK variations\r\n  \"uk\",\r\n  \"united kingdom\",\r\n  \"great britain\",\r\n  \"britain\",\r\n  \"england\",\r\n  \"scotland\",\r\n  \"wales\",\r\n  \"northern ireland\",\r\n  // US variations\r\n  \"usa\",\r\n  \"united states\",\r\n  \"united states of america\",\r\n  \"us\",\r\n  \"america\",\r\n  // Europe\r\n  \"germany\",\r\n  \"france\",\r\n  \"spain\",\r\n  \"italy\",\r\n  \"netherlands\",\r\n  \"holland\",\r\n  \"belgium\",\r\n  \"austria\",\r\n  \"switzerland\",\r\n  \"portugal\",\r\n  \"poland\",\r\n  \"ireland\",\r\n  \"republic of ireland\",\r\n  \"eire\",\r\n  \"sweden\",\r\n  \"norway\",\r\n  \"denmark\",\r\n  \"finland\",\r\n  \"greece\",\r\n  \"czech republic\",\r\n  \"czechia\",\r\n  \"hungary\",\r\n  \"romania\",\r\n  \"bulgaria\",\r\n  \"croatia\",\r\n  \"slovenia\",\r\n  \"slovakia\",\r\n  \"serbia\",\r\n  \"ukraine\",\r\n  \"russia\",\r\n  \"turkey\",\r\n  \"cyprus\",\r\n  \"malta\",\r\n  \"luxembourg\",\r\n  \"iceland\",\r\n  \"estonia\",\r\n  \"latvia\",\r\n  \"lithuania\",\r\n  \"belarus\",\r\n  // Americas\r\n  \"canada\",\r\n  \"mexico\",\r\n  \"brazil\",\r\n  \"argentina\",\r\n  \"chile\",\r\n  \"colombia\",\r\n  \"peru\",\r\n  \"venezuela\",\r\n  // Asia Pacific\r\n  \"australia\",\r\n  \"new zealand\",\r\n  \"japan\",\r\n  \"china\",\r\n  \"south korea\",\r\n  \"korea\",\r\n  \"india\",\r\n  \"singapore\",\r\n  \"hong kong\",\r\n  \"taiwan\",\r\n  \"thailand\",\r\n  \"malaysia\",\r\n  \"indonesia\",\r\n  \"philippines\",\r\n  \"vietnam\",\r\n  // Middle East & Africa\r\n  \"uae\",\r\n  \"united arab emirates\",\r\n  \"dubai\",\r\n  \"saudi arabia\",\r\n  \"israel\",\r\n  \"south africa\",\r\n  \"egypt\",\r\n  \"morocco\",\r\n  \"nigeria\",\r\n  \"kenya\",\r\n];\r\n\r\n// UK Regions (your 11 regions)\r\nconst UK_REGIONS = [\r\n  \"london\",\r\n  \"south east\",\r\n  \"south west\",\r\n  \"east of england\",\r\n  \"east anglia\",\r\n  \"midlands\",\r\n  \"east midlands\",\r\n  \"west midlands\",\r\n  \"north west\",\r\n  \"north east\",\r\n  \"yorkshire\",\r\n  \"yorkshire and the humber\",\r\n  \"wales\",\r\n  \"scotland\",\r\n  \"northern ireland\",\r\n];\r\n\r\n// US States (all 50 + DC)\r\nconst US_STATES = [\r\n  \"alabama\",\r\n  \"alaska\",\r\n  \"arizona\",\r\n  \"arkansas\",\r\n  \"california\",\r\n  \"colorado\",\r\n  \"connecticut\",\r\n  \"delaware\",\r\n  \"florida\",\r\n  \"georgia\",\r\n  \"hawaii\",\r\n  \"idaho\",\r\n  \"illinois\",\r\n  \"indiana\",\r\n  \"iowa\",\r\n  \"kansas\",\r\n  \"kentucky\",\r\n  \"louisiana\",\r\n  \"maine\",\r\n  \"maryland\",\r\n  \"massachusetts\",\r\n  \"michigan\",\r\n  \"minnesota\",\r\n  \"mississippi\",\r\n  \"missouri\",\r\n  \"montana\",\r\n  \"nebraska\",\r\n  \"nevada\",\r\n  \"new hampshire\",\r\n  \"new jersey\",\r\n  \"new mexico\",\r\n  \"new york\",\r\n  \"north carolina\",\r\n  \"north dakota\",\r\n  \"ohio\",\r\n  \"oklahoma\",\r\n  \"oregon\",\r\n  \"pennsylvania\",\r\n  \"rhode island\",\r\n  \"south carolina\",\r\n  \"south dakota\",\r\n  \"tennessee\",\r\n  \"texas\",\r\n  \"utah\",\r\n  \"vermont\",\r\n  \"virginia\",\r\n  \"washington\",\r\n  \"west virginia\",\r\n  \"wisconsin\",\r\n  \"wyoming\",\r\n  \"district of columbia\",\r\n  \"dc\",\r\n];\r\n\r\n// US State Abbreviations\r\nconst US_STATE_ABBREVS = [\r\n  \"al\",\r\n  \"ak\",\r\n  \"az\",\r\n  \"ar\",\r\n  \"ca\",\r\n  \"co\",\r\n  \"ct\",\r\n  \"de\",\r\n  \"fl\",\r\n  \"ga\",\r\n  \"hi\",\r\n  \"id\",\r\n  \"il\",\r\n  \"in\",\r\n  \"ia\",\r\n  \"ks\",\r\n  \"ky\",\r\n  \"la\",\r\n  \"me\",\r\n  \"md\",\r\n  \"ma\",\r\n  \"mi\",\r\n  \"mn\",\r\n  \"ms\",\r\n  \"mo\",\r\n  \"mt\",\r\n  \"ne\",\r\n  \"nv\",\r\n  \"nh\",\r\n  \"nj\",\r\n  \"nm\",\r\n  \"ny\",\r\n  \"nc\",\r\n  \"nd\",\r\n  \"oh\",\r\n  \"ok\",\r\n  \"or\",\r\n  \"pa\",\r\n  \"ri\",\r\n  \"sc\",\r\n  \"sd\",\r\n  \"tn\",\r\n  \"tx\",\r\n  \"ut\",\r\n  \"vt\",\r\n  \"va\",\r\n  \"wa\",\r\n  \"wv\",\r\n  \"wi\",\r\n  \"wy\",\r\n];\r\n\r\n// Major UK Cities & Towns\r\nconst UK_CITIES = [\r\n  // Major cities\r\n  \"london\",\r\n  \"birmingham\",\r\n  \"manchester\",\r\n  \"leeds\",\r\n  \"liverpool\",\r\n  \"newcastle\",\r\n  \"sheffield\",\r\n  \"bristol\",\r\n  \"nottingham\",\r\n  \"leicester\",\r\n  \"coventry\",\r\n  \"bradford\",\r\n  \"cardiff\",\r\n  \"belfast\",\r\n  \"edinburgh\",\r\n  \"glasgow\",\r\n  // Music industry hubs & significant towns\r\n  \"brighton\",\r\n  \"bournemouth\",\r\n  \"southampton\",\r\n  \"portsmouth\",\r\n  \"reading\",\r\n  \"oxford\",\r\n  \"cambridge\",\r\n  \"norwich\",\r\n  \"hull\",\r\n  \"middlesbrough\",\r\n  \"sunderland\",\r\n  \"wolverhampton\",\r\n  \"derby\",\r\n  \"stoke\",\r\n  \"plymouth\",\r\n  \"exeter\",\r\n  \"bath\",\r\n  \"york\",\r\n  \"chester\",\r\n  \"lancaster\",\r\n  \"blackpool\",\r\n  \"preston\",\r\n  \"bolton\",\r\n  \"wigan\",\r\n  \"stockport\",\r\n  \"rochdale\",\r\n  \"oldham\",\r\n  \"salford\",\r\n  \"warrington\",\r\n  \"crewe\",\r\n  \"shrewsbury\",\r\n  \"telford\",\r\n  \"worcester\",\r\n  \"gloucester\",\r\n  \"cheltenham\",\r\n  \"swindon\",\r\n  \"milton keynes\",\r\n  \"luton\",\r\n  \"watford\",\r\n  \"st albans\",\r\n  \"guildford\",\r\n  \"crawley\",\r\n  \"worthing\",\r\n  \"hastings\",\r\n  \"eastbourne\",\r\n  \"folkestone\",\r\n  \"canterbury\",\r\n  \"maidstone\",\r\n  \"tunbridge wells\",\r\n  \"margate\",\r\n  \"ramsgate\",\r\n  \"dover\",\r\n  \"ashford\",\r\n  \"colchester\",\r\n  \"ipswich\",\r\n  \"peterborough\",\r\n  \"northampton\",\r\n  \"bedford\",\r\n  \"stevenage\",\r\n  \"hemel hempstead\",\r\n  \"harlow\",\r\n  \"basildon\",\r\n  \"southend\",\r\n  \"chelmsford\",\r\n  // Scotland\r\n  \"aberdeen\",\r\n  \"dundee\",\r\n  \"inverness\",\r\n  \"stirling\",\r\n  \"perth\",\r\n  \"falkirk\",\r\n  \"ayr\",\r\n  \"kilmarnock\",\r\n  \"greenock\",\r\n  \"paisley\",\r\n  \"cumbernauld\",\r\n  \"livingston\",\r\n  \"dunfermline\",\r\n  \"kirkcaldy\",\r\n  // Wales\r\n  \"swansea\",\r\n  \"newport\",\r\n  \"wrexham\",\r\n  \"barry\",\r\n  \"neath\",\r\n  \"bridgend\",\r\n  \"llanelli\",\r\n  \"cwmbran\",\r\n  // Northern Ireland\r\n  \"derry\",\r\n  \"londonderry\",\r\n  \"lisburn\",\r\n  \"newtownabbey\",\r\n  \"bangor\",\r\n  \"newry\",\r\n  \"armagh\",\r\n  \"omagh\",\r\n];\r\n\r\n// Major European Cities\r\nconst EUROPEAN_CITIES = [\r\n  // Germany\r\n  \"berlin\",\r\n  \"munich\",\r\n  \"hamburg\",\r\n  \"cologne\",\r\n  \"frankfurt\",\r\n  \"dusseldorf\",\r\n  \"stuttgart\",\r\n  \"dortmund\",\r\n  \"essen\",\r\n  \"leipzig\",\r\n  \"bremen\",\r\n  \"dresden\",\r\n  \"hanover\",\r\n  \"nuremberg\",\r\n  \"duisburg\",\r\n  // France\r\n  \"paris\",\r\n  \"lyon\",\r\n  \"marseille\",\r\n  \"toulouse\",\r\n  \"nice\",\r\n  \"nantes\",\r\n  \"strasbourg\",\r\n  \"montpellier\",\r\n  \"bordeaux\",\r\n  \"lille\",\r\n  \"rennes\",\r\n  // Spain\r\n  \"madrid\",\r\n  \"barcelona\",\r\n  \"valencia\",\r\n  \"seville\",\r\n  \"zaragoza\",\r\n  \"malaga\",\r\n  \"bilbao\",\r\n  \"murcia\",\r\n  // Italy\r\n  \"rome\",\r\n  \"milan\",\r\n  \"naples\",\r\n  \"turin\",\r\n  \"palermo\",\r\n  \"genoa\",\r\n  \"bologna\",\r\n  \"florence\",\r\n  \"venice\",\r\n  // Netherlands\r\n  \"amsterdam\",\r\n  \"rotterdam\",\r\n  \"the hague\",\r\n  \"utrecht\",\r\n  \"eindhoven\",\r\n  \"tilburg\",\r\n  \"groningen\",\r\n  // Belgium\r\n  \"brussels\",\r\n  \"antwerp\",\r\n  \"ghent\",\r\n  \"bruges\",\r\n  \"liege\",\r\n  \"charleroi\",\r\n  // Austria & Switzerland\r\n  \"vienna\",\r\n  \"salzburg\",\r\n  \"innsbruck\",\r\n  \"zurich\",\r\n  \"geneva\",\r\n  \"basel\",\r\n  \"bern\",\r\n  // Scandinavia\r\n  \"stockholm\",\r\n  \"gothenburg\",\r\n  \"malmo\",\r\n  \"oslo\",\r\n  \"bergen\",\r\n  \"copenhagen\",\r\n  \"aarhus\",\r\n  \"helsinki\",\r\n  \"tampere\",\r\n  \"turku\",\r\n  // Eastern Europe\r\n  \"prague\",\r\n  \"budapest\",\r\n  \"warsaw\",\r\n  \"krakow\",\r\n  \"bucharest\",\r\n  \"sofia\",\r\n  \"zagreb\",\r\n  \"belgrade\",\r\n  \"bratislava\",\r\n  \"ljubljana\",\r\n  // Other\r\n  \"dublin\",\r\n  \"cork\",\r\n  \"galway\",\r\n  \"limerick\",\r\n  \"lisbon\",\r\n  \"porto\",\r\n  \"athens\",\r\n  \"thessaloniki\",\r\n  \"reykjavik\",\r\n  \"tallinn\",\r\n  \"riga\",\r\n  \"vilnius\",\r\n  \"minsk\",\r\n  \"kyiv\",\r\n];\r\n\r\n// North American Cities\r\nconst NORTH_AMERICAN_CITIES = [\r\n  // Major US cities\r\n  \"new york\",\r\n  \"los angeles\",\r\n  \"chicago\",\r\n  \"houston\",\r\n  \"phoenix\",\r\n  \"philadelphia\",\r\n  \"san antonio\",\r\n  \"san diego\",\r\n  \"dallas\",\r\n  \"san jose\",\r\n  \"austin\",\r\n  \"jacksonville\",\r\n  \"fort worth\",\r\n  \"columbus\",\r\n  \"charlotte\",\r\n  \"san francisco\",\r\n  \"indianapolis\",\r\n  \"seattle\",\r\n  \"denver\",\r\n  \"washington\",\r\n  \"boston\",\r\n  \"nashville\",\r\n  \"baltimore\",\r\n  \"oklahoma city\",\r\n  \"louisville\",\r\n  \"portland\",\r\n  \"las vegas\",\r\n  \"milwaukee\",\r\n  \"albuquerque\",\r\n  \"tucson\",\r\n  \"fresno\",\r\n  \"sacramento\",\r\n  \"mesa\",\r\n  \"kansas city\",\r\n  \"atlanta\",\r\n  \"miami\",\r\n  \"oakland\",\r\n  \"minneapolis\",\r\n  \"tulsa\",\r\n  \"cleveland\",\r\n  \"new orleans\",\r\n  \"tampa\",\r\n  \"st louis\",\r\n  \"pittsburgh\",\r\n  \"cincinnati\",\r\n  \"orlando\",\r\n  \"detroit\",\r\n  \"memphis\",\r\n  // Canada\r\n  \"toronto\",\r\n  \"montreal\",\r\n  \"vancouver\",\r\n  \"calgary\",\r\n  \"edmonton\",\r\n  \"ottawa\",\r\n  \"winnipeg\",\r\n  \"quebec city\",\r\n  \"hamilton\",\r\n  \"victoria\",\r\n];\r\n\r\n// Other Major World Cities\r\nconst OTHER_CITIES = [\r\n  // Australia & NZ\r\n  \"sydney\",\r\n  \"melbourne\",\r\n  \"brisbane\",\r\n  \"perth\",\r\n  \"adelaide\",\r\n  \"gold coast\",\r\n  \"canberra\",\r\n  \"auckland\",\r\n  \"wellington\",\r\n  \"christchurch\",\r\n  // Asia\r\n  \"tokyo\",\r\n  \"osaka\",\r\n  \"kyoto\",\r\n  \"yokohama\",\r\n  \"seoul\",\r\n  \"busan\",\r\n  \"beijing\",\r\n  \"shanghai\",\r\n  \"hong kong\",\r\n  \"taipei\",\r\n  \"singapore\",\r\n  \"bangkok\",\r\n  \"kuala lumpur\",\r\n  \"jakarta\",\r\n  \"manila\",\r\n  \"mumbai\",\r\n  \"delhi\",\r\n  \"bangalore\",\r\n  \"chennai\",\r\n  \"hyderabad\",\r\n  // Middle East\r\n  \"dubai\",\r\n  \"abu dhabi\",\r\n  \"tel aviv\",\r\n  \"jerusalem\",\r\n  \"riyadh\",\r\n  \"doha\",\r\n  \"kuwait city\",\r\n  // Africa\r\n  \"johannesburg\",\r\n  \"cape town\",\r\n  \"durban\",\r\n  \"cairo\",\r\n  \"lagos\",\r\n  \"nairobi\",\r\n  \"casablanca\",\r\n  // South America\r\n  \"sao paulo\",\r\n  \"rio de janeiro\",\r\n  \"buenos aires\",\r\n  \"bogota\",\r\n  \"lima\",\r\n  \"santiago\",\r\n  \"caracas\",\r\n  \"medellin\",\r\n  \"mexico city\",\r\n  \"guadalajara\",\r\n  \"monterrey\",\r\n];\r\n\r\n// Common Abbreviations & Nicknames\r\nconst ABBREVIATIONS = [\"nyc\", \"la\", \"sf\", \"dc\", \"philly\", \"vegas\", \"nola\", \"chi\", \"atl\", \"brum\", \"manc\"];\r\n\r\n// Combine all into single array\r\nconst KNOWN_LOCATIONS = [\r\n  ...COUNTRIES,\r\n  ...UK_REGIONS,\r\n  ...US_STATES,\r\n  ...US_STATE_ABBREVS,\r\n  ...UK_CITIES,\r\n  ...EUROPEAN_CITIES,\r\n  ...NORTH_AMERICAN_CITIES,\r\n  ...OTHER_CITIES,\r\n  ...ABBREVIATIONS,\r\n];\r\n\r\n// Pre-sort by length (longest first) for efficient matching - only done once at module load\r\nconst SORTED_LOCATIONS = [...new Set(KNOWN_LOCATIONS)].sort((a, b) => b.length - a.length);\r\n\r\n/**\r\n * Strips known location terms from a search query.\r\n * Returns the cleaned search term for better matching.\r\n *\r\n * Example: \"backline london\" -> \"backline\"\r\n * Example: \"studio equipment germany\" -> \"studio equipment\"\r\n * Example: \"PA hire california\" -> \"PA hire\"\r\n */\r\nexport function stripLocationFromQuery(query: string): string {\r\n  if (!query) return \"\";\r\n\r\n  let cleanedQuery = query.toLowerCase().trim();\r\n\r\n  for (const location of SORTED_LOCATIONS) {\r\n    // Check if query ends with the location (most common case)\r\n    if (cleanedQuery.endsWith(` ${location}`)) {\r\n      cleanedQuery = cleanedQuery.slice(0, -(location.length + 1)).trim();\r\n      break; // Only strip one location\r\n    }\r\n    // Also check if it starts with location (less common but handle it)\r\n    if (cleanedQuery.startsWith(`${location} `)) {\r\n      cleanedQuery = cleanedQuery.slice(location.length + 1).trim();\r\n      break;\r\n    }\r\n  }\r\n\r\n  return cleanedQuery;\r\n}\r\n\r\n/**\r\n * Check if a query contains only a location term (no actual search term)\r\n */\r\nexport function isOnlyLocation(query: string): boolean {\r\n  if (!query) return false;\r\n  const normalized = query.toLowerCase().trim();\r\n  return SORTED_LOCATIONS.includes(normalized);\r\n}\r\n\r\n/**\r\n * Extract location from query if present (for potential future use in filtering)\r\n */\r\nexport function extractLocation(query: string): string | null {\r\n  if (!query) return null;\r\n\r\n  const normalized = query.toLowerCase().trim();\r\n\r\n  for (const location of SORTED_LOCATIONS) {\r\n    if (normalized.endsWith(` ${location}`)) {\r\n      return location;\r\n    }\r\n    if (normalized.startsWith(`${location} `)) {\r\n      return location;\r\n    }\r\n    if (normalized === location) {\r\n      return location;\r\n    }\r\n  }\r\n\r\n  return null;\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AAEA;;;;CAIC,GAED,4DAA4D;AAC5D,MAAM,YAAY;IAChB,gBAAgB;IAChB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,gBAAgB;IAChB;IACA;IACA;IACA;IACA;IACA,SAAS;IACT;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,WAAW;IACX;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,eAAe;IACf;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,uBAAuB;IACvB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,+BAA+B;AAC/B,MAAM,aAAa;IACjB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,0BAA0B;AAC1B,MAAM,YAAY;IAChB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,yBAAyB;AACzB,MAAM,mBAAmB;IACvB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,0BAA0B;AAC1B,MAAM,YAAY;IAChB,eAAe;IACf;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,0CAA0C;IAC1C;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,WAAW;IACX;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,QAAQ;IACR;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,mBAAmB;IACnB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,wBAAwB;AACxB,MAAM,kBAAkB;IACtB,UAAU;IACV;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,SAAS;IACT;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,QAAQ;IACR;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,QAAQ;IACR;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,cAAc;IACd;IACA;IACA;IACA;IACA;IACA;IACA;IACA,UAAU;IACV;IACA;IACA;IACA;IACA;IACA;IACA,wBAAwB;IACxB;IACA;IACA;IACA;IACA;IACA;IACA;IACA,cAAc;IACd;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,iBAAiB;IACjB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,QAAQ;IACR;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,wBAAwB;AACxB,MAAM,wBAAwB;IAC5B,kBAAkB;IAClB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,SAAS;IACT;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,2BAA2B;AAC3B,MAAM,eAAe;IACnB,iBAAiB;IACjB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,OAAO;IACP;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,cAAc;IACd;IACA;IACA;IACA;IACA;IACA;IACA;IACA,SAAS;IACT;IACA;IACA;IACA;IACA;IACA;IACA;IACA,gBAAgB;IAChB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,mCAAmC;AACnC,MAAM,gBAAgB;IAAC;IAAO;IAAM;IAAM;IAAM;IAAU;IAAS;IAAQ;IAAO;IAAO;IAAQ;CAAO;AAExG,gCAAgC;AAChC,MAAM,kBAAkB;OACnB;OACA;OACA;OACA;OACA;OACA;OACA;OACA;OACA;CACJ;AAED,4FAA4F;AAC5F,MAAM,mBAAmB;OAAI,IAAI,IAAI;CAAiB,CAAC,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,MAAM,GAAG,EAAE,MAAM;AAUlF,SAAS,uBAAuB,KAAa;IAClD,IAAI,CAAC,OAAO,OAAO;IAEnB,IAAI,eAAe,MAAM,WAAW,GAAG,IAAI;IAE3C,KAAK,MAAM,YAAY,iBAAkB;QACvC,2DAA2D;QAC3D,IAAI,aAAa,QAAQ,CAAC,CAAC,CAAC,EAAE,UAAU,GAAG;YACzC,eAAe,aAAa,KAAK,CAAC,GAAG,CAAC,CAAC,SAAS,MAAM,GAAG,CAAC,GAAG,IAAI;YACjE,OAAO,0BAA0B;QACnC;QACA,oEAAoE;QACpE,IAAI,aAAa,UAAU,CAAC,GAAG,SAAS,CAAC,CAAC,GAAG;YAC3C,eAAe,aAAa,KAAK,CAAC,SAAS,MAAM,GAAG,GAAG,IAAI;YAC3D;QACF;IACF;IAEA,OAAO;AACT;AAKO,SAAS,eAAe,KAAa;IAC1C,IAAI,CAAC,OAAO,OAAO;IACnB,MAAM,aAAa,MAAM,WAAW,GAAG,IAAI;IAC3C,OAAO,iBAAiB,QAAQ,CAAC;AACnC;AAKO,SAAS,gBAAgB,KAAa;IAC3C,IAAI,CAAC,OAAO,OAAO;IAEnB,MAAM,aAAa,MAAM,WAAW,GAAG,IAAI;IAE3C,KAAK,MAAM,YAAY,iBAAkB;QACvC,IAAI,WAAW,QAAQ,CAAC,CAAC,CAAC,EAAE,UAAU,GAAG;YACvC,OAAO;QACT;QACA,IAAI,WAAW,UAAU,CAAC,GAAG,SAAS,CAAC,CAAC,GAAG;YACzC,OAAO;QACT;QACA,IAAI,eAAe,UAAU;YAC3B,OAAO;QACT;IACF;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 811, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/lib/supabasePagination.ts"],"sourcesContent":["const PAGE_SIZE = 1000;\r\n\r\n/**\r\n * Fetches all rows from a Supabase query by paginating through results.\r\n * Bypasses the server-side 1000 row limit by fetching in batches.\r\n * \r\n * @param baseQuery - A function that returns a fresh Supabase query builder\r\n * @param pageSize - Number of rows per page (default: 1000)\r\n * @returns Promise<T[]> - All rows combined from all pages\r\n */\r\nexport async function fetchAllRows<T>(\r\n  baseQuery: () => { range: (start: number, end: number) => PromiseLike<{ data: T[] | null; error: unknown }> },\r\n  pageSize = PAGE_SIZE\r\n): Promise<T[]> {\r\n  let allData: T[] = [];\r\n  let page = 0;\r\n  let hasMore = true;\r\n\r\n  while (hasMore) {\r\n    const start = page * pageSize;\r\n    const end = start + pageSize - 1;\r\n\r\n    // Create a fresh query for each page to avoid mutation issues\r\n    const result = await baseQuery().range(start, end);\r\n    \r\n    if (result.error) throw result.error;\r\n\r\n    const rows = result.data || [];\r\n    allData = [...allData, ...rows];\r\n    \r\n    // If we got fewer rows than requested, we've reached the end\r\n    hasMore = rows.length === pageSize;\r\n    page++;\r\n    \r\n    // Safety limit to prevent infinite loops (max 50 pages = 50,000 rows)\r\n    if (page >= 50) break;\r\n  }\r\n\r\n  return allData;\r\n}\r\n"],"names":[],"mappings":";;;;AAAA,MAAM,YAAY;AAUX,eAAe,aACpB,SAA6G,EAC7G,WAAW,SAAS;IAEpB,IAAI,UAAe,EAAE;IACrB,IAAI,OAAO;IACX,IAAI,UAAU;IAEd,MAAO,QAAS;QACd,MAAM,QAAQ,OAAO;QACrB,MAAM,MAAM,QAAQ,WAAW;QAE/B,8DAA8D;QAC9D,MAAM,SAAS,MAAM,YAAY,KAAK,CAAC,OAAO;QAE9C,IAAI,OAAO,KAAK,EAAE,MAAM,OAAO,KAAK;QAEpC,MAAM,OAAO,OAAO,IAAI,IAAI,EAAE;QAC9B,UAAU;eAAI;eAAY;SAAK;QAE/B,6DAA6D;QAC7D,UAAU,KAAK,MAAM,KAAK;QAC1B;QAEA,sEAAsE;QACtE,IAAI,QAAQ,IAAI;IAClB;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 843, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/lib/continents.ts"],"sourcesContent":["// Continent configuration and country mappings\n\nexport const CONTINENT_COUNTRIES: Record<string, string[]> = {\n  Europe: [\n    // Western Europe\n    \"United Kingdom\",\n    \"Germany\",\n    \"France\",\n    \"Spain\",\n    \"Italy\",\n    \"The Netherlands\",\n    \"Belgium\",\n    \"Austria\",\n    \"Switzerland\",\n    \"Ireland\",\n    \"Portugal\",\n    \"Luxembourg\",\n    \"Gibraltar\",\n    // Northern Europe\n    \"Sweden\",\n    \"Norway\",\n    \"Denmark\",\n    \"Finland\",\n    \"Iceland\",\n    // Eastern Europe\n    \"Poland\",\n    \"Czech Republic\",\n    \"Slovak Republic\",\n    \"Slovakia\",\n    \"Hungary\",\n    \"Romania\",\n    \"Bulgaria\",\n    \"Russia\",\n    \"Ukraine\",\n    \"Belarus\",\n    \"Moldova\",\n    // Southern Europe\n    \"Greece\",\n    \"Croatia\",\n    \"Slovenia\",\n    \"Serbia\",\n    \"Bosnia and Herzegovina\",\n    \"Bosnia\",\n    \"Albania\",\n    \"North Macedonia\",\n    \"Macedonia\",\n    \"Montenegro\",\n    \"Kosovo\",\n    // Baltic States\n    \"Estonia\",\n    \"Latvia\",\n    \"Lithuania\",\n    // Other\n    \"Malta\",\n    \"Cyprus\",\n    \"Georgia\",\n    \"Armenia\",\n    \"Azerbaijan\",\n    \"Turkey\",\n    \"Andorra\",\n    \"Monaco\",\n    \"San Marino\",\n    \"Vatican City\",\n    \"Liechtenstein\",\n  ],\n  \"North America\": [\n    \"United States\",\n    \"Canada\",\n    \"Mexico\",\n    \"USA\",\n    \"US\",\n    \"Bahamas\",\n    \"Jamaica\",\n    \"Trinidad and Tobago\",\n    \"Barbados\",\n    \"Dominican Republic\",\n    \"Cuba\",\n    \"Haiti\",\n    \"Costa Rica\",\n    \"Panama\",\n    \"Guatemala\",\n    \"Honduras\",\n    \"El Salvador\",\n    \"Nicaragua\",\n    \"Belize\",\n    \"Puerto Rico\",\n    \"Cayman Islands\",\n    \"Bermuda\",\n  ],\n  Asia: [\n    // East Asia\n    \"Japan\",\n    \"South Korea\",\n    \"China\",\n    \"Taiwan\",\n    \"Hong Kong\",\n    \"Macau\",\n    \"Mongolia\",\n    // Southeast Asia\n    \"Singapore\",\n    \"Thailand\",\n    \"Malaysia\",\n    \"Indonesia\",\n    \"Philippines\",\n    \"Vietnam\",\n    \"Cambodia\",\n    \"Laos\",\n    \"Myanmar\",\n    \"Brunei\",\n    // South Asia\n    \"India\",\n    \"Pakistan\",\n    \"Bangladesh\",\n    \"Sri Lanka\",\n    \"Nepal\",\n    \"Bhutan\",\n    \"Maldives\",\n    // Central Asia\n    \"Kazakhstan\",\n    \"Uzbekistan\",\n    \"Turkmenistan\",\n    \"Kyrgyzstan\",\n    \"Tajikistan\",\n    // Middle East\n    \"United Arab Emirates\",\n    \"UAE\",\n    \"Israel\",\n    \"Saudi Arabia\",\n    \"Qatar\",\n    \"Kuwait\",\n    \"Bahrain\",\n    \"Oman\",\n    \"Jordan\",\n    \"Lebanon\",\n    \"Iraq\",\n    \"Iran\",\n    \"Yemen\",\n    \"Syria\",\n  ],\n  \"South America\": [\n    \"Brazil\",\n    \"Argentina\",\n    \"Chile\",\n    \"Colombia\",\n    \"Peru\",\n    \"Venezuela\",\n    \"Ecuador\",\n    \"Uruguay\",\n    \"Paraguay\",\n    \"Bolivia\",\n    \"Guyana\",\n    \"Suriname\",\n    \"French Guiana\",\n  ],\n  Oceania: [\n    \"Australia\",\n    \"New Zealand\",\n    \"Fiji\",\n    \"Papua New Guinea\",\n    \"Solomon Islands\",\n    \"Vanuatu\",\n    \"Samoa\",\n    \"Tonga\",\n    \"Micronesia\",\n    \"Palau\",\n    \"Marshall Islands\",\n    \"Kiribati\",\n    \"Nauru\",\n    \"Tuvalu\",\n  ],\n  Africa: [\n    // Northern Africa\n    \"Egypt\",\n    \"Morocco\",\n    \"Tunisia\",\n    \"Algeria\",\n    \"Libya\",\n    \"Sudan\",\n    // Western Africa\n    \"Nigeria\",\n    \"Ghana\",\n    \"Senegal\",\n    \"Ivory Coast\",\n    \"Mali\",\n    \"Burkina Faso\",\n    \"Guinea\",\n    \"Benin\",\n    \"Togo\",\n    \"Sierra Leone\",\n    \"Liberia\",\n    \"Mauritania\",\n    \"Niger\",\n    \"Gambia\",\n    \"Guinea-Bissau\",\n    \"Cape Verde\",\n    // Eastern Africa\n    \"Kenya\",\n    \"Ethiopia\",\n    \"Tanzania\",\n    \"Uganda\",\n    \"Rwanda\",\n    \"Burundi\",\n    \"Somalia\",\n    \"Djibouti\",\n    \"Eritrea\",\n    \"South Sudan\",\n    \"Seychelles\",\n    \"Mauritius\",\n    // Southern Africa\n    \"South Africa\",\n    \"Namibia\",\n    \"Botswana\",\n    \"Zimbabwe\",\n    \"Zambia\",\n    \"Mozambique\",\n    \"Angola\",\n    \"Malawi\",\n    \"Lesotho\",\n    \"Eswatini\",\n    \"Madagascar\",\n    \"Comoros\",\n    // Central Africa\n    \"Democratic Republic of the Congo\",\n    \"Republic of the Congo\",\n    \"Cameroon\",\n    \"Central African Republic\",\n    \"Chad\",\n    \"Gabon\",\n    \"Equatorial Guinea\",\n    \"Sao Tome and Principe\",\n  ],\n};\n\nexport const CONTINENT_COLORS: Record<string, string> = {\n  Europe: \"#ef4444\", // Red\n  \"North America\": \"#f97316\", // Orange\n  \"South America\": \"#eab308\", // Gold\n  Asia: \"#22c55e\", // Green\n  Africa: \"#14b8a6\", // Teal\n  Oceania: \"#0ea5e9\", // Sky blue\n};\n\nexport const CONTINENT_ORDER = [\"Europe\", \"North America\", \"Asia\", \"South America\", \"Oceania\", \"Africa\"];\n\nexport function getContinent(country: string): string | undefined {\n  for (const [continent, countries] of Object.entries(CONTINENT_COUNTRIES)) {\n    if (countries.includes(country)) return continent;\n  }\n  return undefined;\n}\n\nexport function getContinentCountries(continent: string): string[] {\n  return CONTINENT_COUNTRIES[continent] || [];\n}\n\nexport function getContinentSlug(continent: string): string {\n  return continent.toLowerCase().replace(/\\s+/g, \"-\");\n}\n\nexport function getContinentFromSlug(slug: string): string | undefined {\n  const normalized = slug.toLowerCase();\n  return CONTINENT_ORDER.find((c) => getContinentSlug(c) === normalized);\n}\n"],"names":[],"mappings":"AAAA,+CAA+C;;;;;;;;;;;;;;;;;AAExC,MAAM,sBAAgD;IAC3D,QAAQ;QACN,iBAAiB;QACjB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,kBAAkB;QAClB;QACA;QACA;QACA;QACA;QACA,iBAAiB;QACjB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,kBAAkB;QAClB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,gBAAgB;QAChB;QACA;QACA;QACA,QAAQ;QACR;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,iBAAiB;QACf;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,MAAM;QACJ,YAAY;QACZ;QACA;QACA;QACA;QACA;QACA;QACA;QACA,iBAAiB;QACjB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,aAAa;QACb;QACA;QACA;QACA;QACA;QACA;QACA;QACA,eAAe;QACf;QACA;QACA;QACA;QACA;QACA,cAAc;QACd;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,iBAAiB;QACf;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,SAAS;QACP;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,QAAQ;QACN,kBAAkB;QAClB;QACA;QACA;QACA;QACA;QACA;QACA,iBAAiB;QACjB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,iBAAiB;QACjB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,kBAAkB;QAClB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,iBAAiB;QACjB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;AACH;AAEO,MAAM,mBAA2C;IACtD,QAAQ;IACR,iBAAiB;IACjB,iBAAiB;IACjB,MAAM;IACN,QAAQ;IACR,SAAS;AACX;AAEO,MAAM,kBAAkB;IAAC;IAAU;IAAiB;IAAQ;IAAiB;IAAW;CAAS;AAEjG,SAAS,aAAa,OAAe;IAC1C,KAAK,MAAM,CAAC,WAAW,UAAU,IAAI,OAAO,OAAO,CAAC,qBAAsB;QACxE,IAAI,UAAU,QAAQ,CAAC,UAAU,OAAO;IAC1C;IACA,OAAO;AACT;AAEO,SAAS,sBAAsB,SAAiB;IACrD,OAAO,mBAAmB,CAAC,UAAU,IAAI,EAAE;AAC7C;AAEO,SAAS,iBAAiB,SAAiB;IAChD,OAAO,UAAU,WAAW,GAAG,OAAO,CAAC,QAAQ;AACjD;AAEO,SAAS,qBAAqB,IAAY;IAC/C,MAAM,aAAa,KAAK,WAAW;IACnC,OAAO,gBAAgB,IAAI,CAAC,CAAC,IAAM,iBAAiB,OAAO;AAC7D","debugId":null}},
    {"offset": {"line": 1126, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/lib/geoUtils.ts"],"sourcesContent":["/**\n * Geographic utility functions for distance calculations and proximity filtering\n */\n\nexport interface Coordinates {\n  latitude: number;\n  longitude: number;\n}\n\n/**\n * Calculate distance between two points using Haversine formula\n * Returns distance in kilometers\n * \n * @param lat1 - Latitude of first point\n * @param lon1 - Longitude of first point\n * @param lat2 - Latitude of second point\n * @param lon2 - Longitude of second point\n * @returns Distance in kilometers\n */\nexport function haversineDistance(\n  lat1: number,\n  lon1: number,\n  lat2: number,\n  lon2: number\n): number {\n  const R = 6371; // Earth's radius in kilometers\n  \n  const dLat = toRadians(lat2 - lat1);\n  const dLon = toRadians(lon2 - lon1);\n  \n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(toRadians(lat1)) *\n      Math.cos(toRadians(lat2)) *\n      Math.sin(dLon / 2) *\n      Math.sin(dLon / 2);\n  \n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  \n  return R * c;\n}\n\n/**\n * Convert degrees to radians\n */\nfunction toRadians(degrees: number): number {\n  return (degrees * Math.PI) / 180;\n}\n\n/**\n * Check if a point is within a given radius of a center point\n * \n * @param centerLat - Latitude of center point\n * @param centerLon - Longitude of center point\n * @param pointLat - Latitude of point to check\n * @param pointLon - Longitude of point to check\n * @param radiusKm - Radius in kilometers\n * @returns true if point is within radius\n */\nexport function isWithinRadius(\n  centerLat: number,\n  centerLon: number,\n  pointLat: number,\n  pointLon: number,\n  radiusKm: number\n): boolean {\n  const distance = haversineDistance(centerLat, centerLon, pointLat, pointLon);\n  return distance <= radiusKm;\n}\n\n/**\n * Find the center point (mean latitude/longitude) of a collection of coordinates\n * Useful for finding city center from venues in that city\n * \n * @param coordinates - Array of coordinate objects\n * @returns Center point or null if no valid coordinates\n */\nexport function findCenterPoint(coordinates: Coordinates[]): Coordinates | null {\n  const validCoords = coordinates.filter(\n    (c) => c.latitude !== null && c.longitude !== null\n  );\n  \n  if (validCoords.length === 0) return null;\n  \n  const sumLat = validCoords.reduce((sum, c) => sum + c.latitude, 0);\n  const sumLon = validCoords.reduce((sum, c) => sum + c.longitude, 0);\n  \n  return {\n    latitude: sumLat / validCoords.length,\n    longitude: sumLon / validCoords.length,\n  };\n}\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;AAiBM,SAAS,kBACd,IAAY,EACZ,IAAY,EACZ,IAAY,EACZ,IAAY;IAEZ,MAAM,IAAI,MAAM,+BAA+B;IAE/C,MAAM,OAAO,UAAU,OAAO;IAC9B,MAAM,OAAO,UAAU,OAAO;IAE9B,MAAM,IACJ,KAAK,GAAG,CAAC,OAAO,KAAK,KAAK,GAAG,CAAC,OAAO,KACrC,KAAK,GAAG,CAAC,UAAU,SACjB,KAAK,GAAG,CAAC,UAAU,SACnB,KAAK,GAAG,CAAC,OAAO,KAChB,KAAK,GAAG,CAAC,OAAO;IAEpB,MAAM,IAAI,IAAI,KAAK,KAAK,CAAC,KAAK,IAAI,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI;IAErD,OAAO,IAAI;AACb;AAEA;;CAEC,GACD,SAAS,UAAU,OAAe;IAChC,OAAO,AAAC,UAAU,KAAK,EAAE,GAAI;AAC/B;AAYO,SAAS,eACd,SAAiB,EACjB,SAAiB,EACjB,QAAgB,EAChB,QAAgB,EAChB,QAAgB;IAEhB,MAAM,WAAW,kBAAkB,WAAW,WAAW,UAAU;IACnE,OAAO,YAAY;AACrB;AASO,SAAS,gBAAgB,WAA0B;IACxD,MAAM,cAAc,YAAY,MAAM,CACpC,CAAC,IAAM,EAAE,QAAQ,KAAK,QAAQ,EAAE,SAAS,KAAK;IAGhD,IAAI,YAAY,MAAM,KAAK,GAAG,OAAO;IAErC,MAAM,SAAS,YAAY,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,QAAQ,EAAE;IAChE,MAAM,SAAS,YAAY,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,SAAS,EAAE;IAEjE,OAAO;QACL,UAAU,SAAS,YAAY,MAAM;QACrC,WAAW,SAAS,YAAY,MAAM;IACxC;AACF","debugId":null}},
    {"offset": {"line": 1167, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/lib/cityRegions.ts"],"sourcesContent":["/**\n * City-Regions: Regions that contain only one city with the same name.\n * These are treated as cities, not regions, to avoid redundant URLs like /london/london.\n *\n * For these regions:\n * - /uk/london is the city page (not region page)\n * - /uk/london/london redirects to /uk/london\n * - Breadcrumbs show: UK > London (not UK > London > London)\n *\n * Proximity Configuration:\n * - City-regions use larger proximity radius (metropolitan areas)\n * - Regular cities use smaller default radius\n * - Proximity shows venues within radius, not just exact city match\n */\n\n// Default proximity radii (in kilometers)\nexport const DEFAULT_CITY_PROXIMITY_KM = 25; // Regular cities (Manchester, Birmingham)\nexport const DEFAULT_CITY_REGION_PROXIMITY_KM = 40; // City-regions (London, NYC)\n\ninterface CityRegionConfig {\n  country: string;\n  countryAliases: string[];\n  region: string;\n  regionSlug: string;\n  proximityRadiusKm?: number; // Optional override - uses DEFAULT_CITY_REGION_PROXIMITY_KM if not set\n}\n\nconst CITY_REGIONS: CityRegionConfig[] = [\n  {\n    country: \"United Kingdom\",\n    countryAliases: [\"uk\", \"united kingdom\"],\n    region: \"London\",\n    regionSlug: \"london\",\n  },\n  {\n    country: \"United States\",\n    countryAliases: [\"usa\", \"united states\", \"us\"],\n    region: \"New York\",\n    regionSlug: \"new-york\",\n    proximityRadiusKm: 50, // Large metro area - includes Newark, Jersey City, parts of Long Island\n  },\n];\n\n/**\n * Check if a region is a \"city-region\" - a region that should be treated as a city\n * because it only contains one city with the same name.\n *\n * @param country - Country name or slug (e.g., \"United Kingdom\", \"uk\")\n * @param region - Region name or slug (e.g., \"London\", \"london\")\n * @returns true if this region should be treated as a city\n */\nexport function isCityRegion(country: string | null, region: string | null): boolean {\n  if (!country || !region) return false;\n\n  const normalizedCountry = country.toLowerCase();\n  const normalizedRegion = region.toLowerCase();\n\n  return CITY_REGIONS.some((config) => {\n    const countryMatches =\n      config.country.toLowerCase() === normalizedCountry || config.countryAliases.includes(normalizedCountry);\n\n    const regionMatches = config.region.toLowerCase() === normalizedRegion || config.regionSlug === normalizedRegion;\n\n    return countryMatches && regionMatches;\n  });\n}\n\n/**\n * Get the city-region configuration for a given country/region combination\n */\nexport function getCityRegionConfig(country: string | null, region: string | null): CityRegionConfig | null {\n  if (!country || !region) return null;\n\n  const normalizedCountry = country.toLowerCase();\n  const normalizedRegion = region.toLowerCase();\n\n  return (\n    CITY_REGIONS.find((config) => {\n      const countryMatches =\n        config.country.toLowerCase() === normalizedCountry || config.countryAliases.includes(normalizedCountry);\n\n      const regionMatches = config.region.toLowerCase() === normalizedRegion || config.regionSlug === normalizedRegion;\n\n      return countryMatches && regionMatches;\n    }) || null\n  );\n}\n\n/**\n * Get the display name for a city-region (always returns the city name)\n */\nexport function getCityRegionDisplayName(country: string | null, region: string | null): string | null {\n  const config = getCityRegionConfig(country, region);\n  return config?.region || null;\n}\n\n/**\n * Get the proximity radius for a city-region\n * Returns the configured radius or default if not specified\n */\nexport function getCityRegionProximityRadius(country: string | null, region: string | null): number {\n  const config = getCityRegionConfig(country, region);\n  return config?.proximityRadiusKm || DEFAULT_CITY_REGION_PROXIMITY_KM;\n}\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;CAaC,GAED,0CAA0C;;;;;;;;;;;;;;;AACnC,MAAM,4BAA4B,IAAI,0CAA0C;AAChF,MAAM,mCAAmC,IAAI,6BAA6B;AAUjF,MAAM,eAAmC;IACvC;QACE,SAAS;QACT,gBAAgB;YAAC;YAAM;SAAiB;QACxC,QAAQ;QACR,YAAY;IACd;IACA;QACE,SAAS;QACT,gBAAgB;YAAC;YAAO;YAAiB;SAAK;QAC9C,QAAQ;QACR,YAAY;QACZ,mBAAmB;IACrB;CACD;AAUM,SAAS,aAAa,OAAsB,EAAE,MAAqB;IACxE,IAAI,CAAC,WAAW,CAAC,QAAQ,OAAO;IAEhC,MAAM,oBAAoB,QAAQ,WAAW;IAC7C,MAAM,mBAAmB,OAAO,WAAW;IAE3C,OAAO,aAAa,IAAI,CAAC,CAAC;QACxB,MAAM,iBACJ,OAAO,OAAO,CAAC,WAAW,OAAO,qBAAqB,OAAO,cAAc,CAAC,QAAQ,CAAC;QAEvF,MAAM,gBAAgB,OAAO,MAAM,CAAC,WAAW,OAAO,oBAAoB,OAAO,UAAU,KAAK;QAEhG,OAAO,kBAAkB;IAC3B;AACF;AAKO,SAAS,oBAAoB,OAAsB,EAAE,MAAqB;IAC/E,IAAI,CAAC,WAAW,CAAC,QAAQ,OAAO;IAEhC,MAAM,oBAAoB,QAAQ,WAAW;IAC7C,MAAM,mBAAmB,OAAO,WAAW;IAE3C,OACE,aAAa,IAAI,CAAC,CAAC;QACjB,MAAM,iBACJ,OAAO,OAAO,CAAC,WAAW,OAAO,qBAAqB,OAAO,cAAc,CAAC,QAAQ,CAAC;QAEvF,MAAM,gBAAgB,OAAO,MAAM,CAAC,WAAW,OAAO,oBAAoB,OAAO,UAAU,KAAK;QAEhG,OAAO,kBAAkB;IAC3B,MAAM;AAEV;AAKO,SAAS,yBAAyB,OAAsB,EAAE,MAAqB;IACpF,MAAM,SAAS,oBAAoB,SAAS;IAC5C,OAAO,QAAQ,UAAU;AAC3B;AAMO,SAAS,6BAA6B,OAAsB,EAAE,MAAqB;IACxF,MAAM,SAAS,oBAAoB,SAAS;IAC5C,OAAO,QAAQ,qBAAqB;AACtC","debugId":null}},
    {"offset": {"line": 1251, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/hooks/useListings.ts"],"sourcesContent":["'use client';\n\nimport { useQuery } from \"@tanstack/react-query\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport { Listing, ListingPublic, ListingTier } from \"@/types/database\";\nimport { stripLocationFromQuery, isOnlyLocation } from \"@/lib/searchUtils\";\nimport { fetchAllRows } from \"@/lib/supabasePagination\";\nimport { CONTINENT_COUNTRIES } from \"@/lib/continents\";\nimport { haversineDistance, findCenterPoint } from \"@/lib/geoUtils\";\nimport { isCityRegion, getCityRegionProximityRadius, DEFAULT_CITY_PROXIMITY_KM } from \"@/lib/cityRegions\";\n\ninterface UseListingsOptions {\n  categoryId?: string;\n  continent?: string;\n  country?: string;\n  regionId?: number;\n  city?: string;\n  letter?: string;\n  searchQuery?: string;\n}\n\nconst TIER_ORDER: Record<ListingTier, number> = {\n  premier: 0,\n  enhanced: 1,\n  free: 2,\n};\n\n// =============================================================================\n// SECURITY NOTE: All bulk queries use listings_public view (no contact data)\n// Single-listing queries use get_listing_by_slug RPC (includes contact data)\n// =============================================================================\n\nexport function useListings(options: UseListingsOptions = {}) {\n  const { categoryId, continent, country, regionId, city, letter, searchQuery } = options;\n\n  return useQuery({\n    queryKey: [\"listings\", options],\n    queryFn: async () => {\n      // Determine if we need proximity filtering\n      const needsCityProximityFilter = !!city && city !== \"all\" && !!country;\n      const needsRegionProximityFilter = !!regionId && !!country && !city;\n\n      // Use RPC for category-based queries to avoid URI length issues with large IN clauses\n      if (categoryId) {\n        // For proximity filtering, we need to fetch broader and filter client-side\n        // Otherwise, let RPC do the filtering (more efficient)\n        const { data, error } = await supabase.rpc(\"get_listings_by_category\", {\n          p_category_id: categoryId,\n          p_limit: 100000,\n          p_offset: 0,\n          p_country: country && country !== \"all\" ? country : null,\n          p_region_id: needsRegionProximityFilter ? null : regionId || null, // Don't filter by region if doing proximity\n          p_city: needsCityProximityFilter ? null : city && city !== \"all\" ? city : null, // Don't filter by city if doing proximity\n        });\n\n        if (error) throw error;\n\n        let listings = (data || []) as ListingPublic[];\n\n        // Apply continent filter client-side (RPC doesn't support it yet)\n        if (continent && !country) {\n          const continentCountries = CONTINENT_COUNTRIES[continent] || [];\n          listings = listings.filter((l) => l.country && continentCountries.includes(l.country));\n        }\n\n        // CITY PROXIMITY FILTERING (for category searches)\n        if (needsCityProximityFilter && city && country) {\n          const cityListings = listings.filter((l) => l.town_city === city && l.latitude && l.longitude);\n\n          if (cityListings.length > 0) {\n            const cityCenter = findCenterPoint(\n              cityListings.map((l) => ({ latitude: l.latitude!, longitude: l.longitude! })),\n            );\n\n            if (cityCenter) {\n              const radiusKm = DEFAULT_CITY_PROXIMITY_KM;\n\n              listings = listings.filter((listing) => {\n                // Always include exact city matches\n                if (listing.town_city === city) return true;\n\n                // Filter others by proximity\n                if (!listing.latitude || !listing.longitude) return false;\n\n                const distance = haversineDistance(\n                  cityCenter.latitude,\n                  cityCenter.longitude,\n                  listing.latitude,\n                  listing.longitude,\n                );\n\n                return distance <= radiusKm;\n              });\n            } else {\n              // Fallback to exact match\n              listings = listings.filter((l) => l.town_city === city);\n            }\n          } else {\n            // No listings with coordinates - exact match\n            listings = listings.filter((l) => l.town_city === city);\n          }\n        }\n\n        // REGION PROXIMITY FILTERING (for city-regions like London, NYC)\n        if (needsRegionProximityFilter && regionId && country) {\n          const { data: regionData } = await supabase\n            .from(\"regions\")\n            .select(\"region_slug, latitude, longitude\")\n            .eq(\"id\", regionId)\n            .single();\n\n          if (regionData && isCityRegion(country, regionData.region_slug)) {\n            if (regionData.latitude && regionData.longitude) {\n              const radiusKm = getCityRegionProximityRadius(country, regionData.region_slug);\n\n              listings = listings.filter((listing) => {\n                // Always include listings explicitly in this region\n                if (listing.region_id === regionId) return true;\n\n                // Filter others by proximity\n                if (!listing.latitude || !listing.longitude) return false;\n\n                const distance = haversineDistance(\n                  regionData.latitude,\n                  regionData.longitude,\n                  listing.latitude,\n                  listing.longitude,\n                );\n\n                return distance <= radiusKm;\n              });\n            } else {\n              // Region doesn't have coordinates - exact match\n              listings = listings.filter((l) => l.region_id === regionId);\n            }\n          } else {\n            // Not a city-region - exact region match\n            listings = listings.filter((l) => l.region_id === regionId);\n          }\n        }\n\n        // Apply letter filter client-side (RPC doesn't support it)\n        if (letter) {\n          listings = listings.filter((l) => l.name.toLowerCase().startsWith(letter.toLowerCase()));\n        }\n\n        // Apply search filter client-side\n        if (searchQuery) {\n          const strippedQuery = stripLocationFromQuery(searchQuery);\n          if (strippedQuery && !isOnlyLocation(searchQuery)) {\n            const lowerQuery = strippedQuery.toLowerCase();\n            listings = listings.filter((l) => l.name.toLowerCase().includes(lowerQuery));\n          }\n        }\n\n        return listings;\n      }\n\n      // Non-category queries use listings_public view (no sensitive data)\n      const data = await fetchAllRows<ListingPublic>(() => {\n        let query = supabase.from(\"listings_public\").select(\"*\");\n\n        if (country && country !== \"all\") {\n          query = query.eq(\"country\", country);\n        }\n\n        // For proximity filtering, we fetch broader and filter client-side\n        if (regionId && !needsRegionProximityFilter) {\n          query = query.eq(\"region_id\", regionId);\n        }\n\n        if (city && city !== \"all\" && !needsCityProximityFilter) {\n          query = query.eq(\"town_city\", city);\n        }\n\n        if (letter) {\n          query = query.ilike(\"name\", `${letter}%`);\n        }\n\n        if (searchQuery) {\n          const strippedQuery = stripLocationFromQuery(searchQuery);\n          if (strippedQuery && !isOnlyLocation(searchQuery)) {\n            query = query.ilike(\"name\", `%${strippedQuery}%`);\n          }\n        }\n\n        return query.order(\"name\");\n      });\n\n      let listings = data;\n\n      // CITY PROXIMITY FILTERING (for non-category searches)\n      if (needsCityProximityFilter && city && country) {\n        const cityListings = listings.filter((l) => l.town_city === city && l.latitude && l.longitude);\n\n        if (cityListings.length > 0) {\n          const cityCenter = findCenterPoint(\n            cityListings.map((l) => ({ latitude: l.latitude!, longitude: l.longitude! })),\n          );\n\n          if (cityCenter) {\n            const radiusKm = DEFAULT_CITY_PROXIMITY_KM;\n\n            listings = listings.filter((listing) => {\n              // Always include exact city matches\n              if (listing.town_city === city) return true;\n\n              // Filter others by proximity\n              if (!listing.latitude || !listing.longitude) return false;\n\n              const distance = haversineDistance(\n                cityCenter.latitude,\n                cityCenter.longitude,\n                listing.latitude,\n                listing.longitude,\n              );\n\n              return distance <= radiusKm;\n            });\n          } else {\n            // Fallback to exact match\n            listings = listings.filter((l) => l.town_city === city);\n          }\n        } else {\n          // No listings with coordinates - exact match\n          listings = listings.filter((l) => l.town_city === city);\n        }\n      }\n\n      // REGION PROXIMITY FILTERING (for city-regions like London, NYC)\n      if (needsRegionProximityFilter && regionId && country) {\n        const { data: regionData } = await supabase\n          .from(\"regions\")\n          .select(\"region_slug, latitude, longitude\")\n          .eq(\"id\", regionId)\n          .single();\n\n        if (regionData && isCityRegion(country, regionData.region_slug)) {\n          if (regionData.latitude && regionData.longitude) {\n            const radiusKm = getCityRegionProximityRadius(country, regionData.region_slug);\n\n            listings = listings.filter((listing) => {\n              // Always include listings explicitly in this region\n              if (listing.region_id === regionId) return true;\n\n              // Filter others by proximity\n              if (!listing.latitude || !listing.longitude) return false;\n\n              const distance = haversineDistance(\n                regionData.latitude,\n                regionData.longitude,\n                listing.latitude,\n                listing.longitude,\n              );\n\n              return distance <= radiusKm;\n            });\n          } else {\n            // Region doesn't have coordinates - exact match\n            listings = listings.filter((l) => l.region_id === regionId);\n          }\n        } else {\n          // Not a city-region - exact region match\n          listings = listings.filter((l) => l.region_id === regionId);\n        }\n      }\n\n      // Sort by tier (premier -> enhanced -> free), then alphabetically\n      listings = listings.sort((a, b) => {\n        const tierDiff = TIER_ORDER[a.tier] - TIER_ORDER[b.tier];\n        if (tierDiff !== 0) return tierDiff;\n        return a.name.localeCompare(b.name);\n      });\n\n      return listings;\n    },\n  });\n}\n\n// Uses RPC function to get single listing WITH contact data (secure single-record access)\nexport function useListingBySlug(slug: string, initialData?: any) {\n  return useQuery({\n    queryKey: [\"listing\", slug],\n    queryFn: async () => {\n      const { data, error } = await supabase.rpc(\"get_listing_by_slug\" as any, {\n        p_slug: slug,\n      });\n\n      if (error) throw error;\n\n      // RPC returns an array, get first item\n      const listing = Array.isArray(data) ? data[0] : data;\n      return listing as Listing | null;\n    },\n    enabled: !!slug,\n    initialData,\n  });\n}\n\nexport function useListingLocations(categoryId?: string) {\n  return useQuery({\n    queryKey: [\"listing-locations\", categoryId],\n    queryFn: async () => {\n      let categoryListingIds: string[] | null = null;\n      if (categoryId) {\n        const { data: listingIds } = await supabase\n          .from(\"listing_categories\")\n          .select(\"listing_id\")\n          .eq(\"category_id\", categoryId);\n\n        if (listingIds && listingIds.length > 0) {\n          categoryListingIds = listingIds.map((l) => l.listing_id);\n        }\n      }\n\n      // Use listings_public view\n      const data = await fetchAllRows<{ country: string | null; town_city: string | null }>(() => {\n        let query = supabase.from(\"listings_public\").select(\"country, town_city\");\n\n        if (categoryListingIds) {\n          query = query.in(\"id\", categoryListingIds);\n        }\n\n        return query;\n      });\n\n      const countries = [...new Set(data.map((d) => d.country).filter(Boolean))] as string[];\n      const cities = [...new Set(data.map((d) => d.town_city).filter(Boolean))] as string[];\n\n      return { countries: countries.sort(), cities: cities.sort() };\n    },\n  });\n}\n\nexport function useCitiesByCountry(categoryId?: string, country?: string) {\n  return useQuery({\n    queryKey: [\"cities-by-country\", categoryId, country],\n    queryFn: async () => {\n      if (!country) return [];\n\n      let categoryListingIds: string[] | null = null;\n      if (categoryId) {\n        const { data: listingIds } = await supabase\n          .from(\"listing_categories\")\n          .select(\"listing_id\")\n          .eq(\"category_id\", categoryId);\n\n        if (listingIds && listingIds.length > 0) {\n          categoryListingIds = listingIds.map((l) => l.listing_id);\n        } else {\n          return [];\n        }\n      }\n\n      // Use listings_public view\n      const data = await fetchAllRows<{ town_city: string | null }>(() => {\n        let query = supabase.from(\"listings_public\").select(\"town_city\").eq(\"country\", country);\n\n        if (categoryListingIds) {\n          query = query.in(\"id\", categoryListingIds);\n        }\n\n        return query;\n      });\n\n      const cities = [...new Set(data.map((d) => d.town_city).filter(Boolean))] as string[];\n      return cities.sort();\n    },\n    enabled: !!country,\n    staleTime: 5 * 60 * 1000,\n  });\n}\n\nexport function useGlobalCitiesByCountry(country?: string) {\n  return useQuery({\n    queryKey: [\"global-cities-by-country\", country],\n    queryFn: async () => {\n      if (!country) return [];\n\n      // Use listings_public view\n      const data = await fetchAllRows<{ town_city: string | null }>(() =>\n        supabase.from(\"listings_public\").select(\"town_city\").eq(\"country\", country),\n      );\n\n      const cities = [...new Set(data.map((d) => d.town_city).filter(Boolean))] as string[];\n      return cities.sort();\n    },\n    enabled: !!country,\n  });\n}\n\nfunction normalizeCountryForRegions(country: string): string {\n  if (country === \"United States\" || country === \"US\") {\n    return \"USA\";\n  }\n  if (country === \"United Kingdom\") {\n    return \"UK\";\n  }\n  return country;\n}\n\nexport function useRegionsByCountry(country?: string, categoryId?: string) {\n  return useQuery({\n    queryKey: [\"regions-by-country\", country, categoryId],\n    queryFn: async () => {\n      if (!country) return [];\n\n      const regionCountry = normalizeCountryForRegions(country);\n\n      let categoryListingIds: string[] | null = null;\n      if (categoryId) {\n        const { data: listingIds } = await supabase\n          .from(\"listing_categories\")\n          .select(\"listing_id\")\n          .eq(\"category_id\", categoryId);\n\n        if (listingIds && listingIds.length > 0) {\n          categoryListingIds = listingIds.map((l) => l.listing_id);\n        } else {\n          return [];\n        }\n      }\n\n      // Use listings_public view\n      const listingsWithRegions = await fetchAllRows<{ region_id: number | null }>(() => {\n        let query = supabase.from(\"listings_public\").select(\"region_id\").not(\"region_id\", \"is\", null);\n\n        if (categoryListingIds) {\n          query = query.in(\"id\", categoryListingIds);\n        }\n\n        return query;\n      });\n\n      const regionIds = [...new Set(listingsWithRegions?.map((l) => l.region_id).filter(Boolean))] as number[];\n\n      if (regionIds.length === 0) return [];\n\n      const { data, error } = await supabase\n        .from(\"regions\")\n        .select(\"id, region_name, region_slug\")\n        .eq(\"country\", regionCountry)\n        .in(\"id\", regionIds)\n        .order(\"region_name\");\n\n      if (error) throw error;\n      return data || [];\n    },\n    enabled: !!country,\n  });\n}\n\nexport function useCitiesByRegion(regionId?: number, categoryId?: string) {\n  return useQuery({\n    queryKey: [\"cities-by-region\", regionId, categoryId],\n    queryFn: async () => {\n      if (!regionId) return [];\n\n      let categoryListingIds: string[] | null = null;\n      if (categoryId) {\n        const { data: listingIds } = await supabase\n          .from(\"listing_categories\")\n          .select(\"listing_id\")\n          .eq(\"category_id\", categoryId);\n\n        if (listingIds && listingIds.length > 0) {\n          categoryListingIds = listingIds.map((l) => l.listing_id);\n        } else {\n          return [];\n        }\n      }\n\n      // Use listings_public view\n      const data = await fetchAllRows<{ town_city: string | null }>(() => {\n        let query = supabase.from(\"listings_public\").select(\"town_city\").eq(\"region_id\", regionId);\n\n        if (categoryListingIds) {\n          query = query.in(\"id\", categoryListingIds);\n        }\n\n        return query;\n      });\n\n      const cities = [...new Set(data.map((d) => d.town_city).filter(Boolean))] as string[];\n      return cities.sort();\n    },\n    enabled: !!regionId,\n    staleTime: 5 * 60 * 1000,\n  });\n}\n\nexport function useFeaturedListings() {\n  return useQuery({\n    queryKey: [\"featured-listings\"],\n    queryFn: async () => {\n      const { data: featuredSlots, error: slotsError } = await supabase\n        .from(\"homepage_featured_listings\")\n        .select(\"position, listing_id\")\n        .order(\"position\");\n\n      if (slotsError) throw slotsError;\n\n      const selectedIds = featuredSlots?.filter((slot) => slot.listing_id).map((slot) => slot.listing_id) as string[];\n\n      if (selectedIds && selectedIds.length > 0) {\n        // Use listings_public view\n        const { data: listings, error: listingsError } = await supabase\n          .from(\"listings_public\")\n          .select(\"*\")\n          .in(\"id\", selectedIds);\n\n        if (listingsError) throw listingsError;\n\n        const sortedListings = selectedIds\n          .map((id) => listings?.find((l) => l.id === id))\n          .filter(Boolean) as ListingPublic[];\n\n        return sortedListings;\n      }\n\n      // Use listings_public view\n      const { data, error } = await supabase\n        .from(\"listings_public\")\n        .select(\"*\")\n        .eq(\"tier\", \"premier\")\n        .limit(6)\n        .order(\"name\");\n\n      if (error) throw error;\n      return data as ListingPublic[];\n    },\n  });\n}\n\nexport function useListingCategories(listingId?: string, initialData?: any[]) {\n  return useQuery({\n    queryKey: [\"listing-categories\", listingId],\n    queryFn: async () => {\n      if (!listingId) return [];\n\n      const { data, error } = await supabase\n        .from(\"listing_categories\")\n        .select(\"category_id, categories(*)\")\n        .eq(\"listing_id\", listingId);\n\n      if (error) throw error;\n\n      return data?.map((lc) => lc.categories).filter(Boolean) as import(\"@/types/database\").Category[];\n    },\n    enabled: !!listingId,\n    initialData,\n  });\n}\n\n// Uses listings_public view - NO contact data returned\nexport function useListingsByIds(ids: string[]) {\n  return useQuery({\n    queryKey: [\"listings\", \"by-ids\", ids],\n    queryFn: async () => {\n      if (ids.length === 0) return [];\n      // Use listings_public view - contact data will need separate fetch if needed\n      const { data, error } = await supabase.from(\"listings_public\").select(\"*\").in(\"id\", ids);\n      if (error) throw error;\n      return data as ListingPublic[];\n    },\n    enabled: ids.length > 0,\n  });\n}\n\nexport function useCountryCounts() {\n  return useQuery({\n    queryKey: [\"country-counts\"],\n    queryFn: async () => {\n      // Use listings_public view\n      const data = await fetchAllRows<{ country: string | null }>(() =>\n        supabase.from(\"listings_public\").select(\"country\"),\n      );\n\n      const counts: Record<string, number> = {};\n      data.forEach((d) => {\n        if (d.country) {\n          counts[d.country] = (counts[d.country] || 0) + 1;\n        }\n      });\n      return counts;\n    },\n  });\n}\n\nexport function useCategoryCountryCounts(categoryId?: string) {\n  return useQuery({\n    queryKey: [\"category-country-counts\", categoryId],\n    queryFn: async () => {\n      if (!categoryId) return {};\n\n      const { data: listingIds } = await supabase\n        .from(\"listing_categories\")\n        .select(\"listing_id\")\n        .eq(\"category_id\", categoryId);\n\n      if (!listingIds || listingIds.length === 0) return {};\n\n      // Use listings_public view\n      const data = await fetchAllRows<{ country: string | null }>(() =>\n        supabase\n          .from(\"listings_public\")\n          .select(\"country\")\n          .in(\n            \"id\",\n            listingIds.map((l) => l.listing_id),\n          ),\n      );\n\n      const counts: Record<string, number> = {};\n      data.forEach((d) => {\n        if (d.country) {\n          counts[d.country] = (counts[d.country] || 0) + 1;\n        }\n      });\n      return counts;\n    },\n    enabled: !!categoryId,\n  });\n}\n\nexport function useRegionCounts(country?: string) {\n  return useQuery({\n    queryKey: [\"region-counts\", country],\n    queryFn: async () => {\n      if (!country) return {};\n\n      // Use listings_public view\n      const data = await fetchAllRows<{ region_id: number | null }>(() =>\n        supabase.from(\"listings_public\").select(\"region_id\").eq(\"country\", country).not(\"region_id\", \"is\", null),\n      );\n\n      const counts: Record<number, number> = {};\n      data.forEach((d) => {\n        if (d.region_id) {\n          counts[d.region_id] = (counts[d.region_id] || 0) + 1;\n        }\n      });\n      return counts;\n    },\n    enabled: !!country,\n  });\n}\n\nexport function useCategoryRegionCounts(country?: string, categoryId?: string) {\n  return useQuery({\n    queryKey: [\"category-region-counts\", country, categoryId],\n    queryFn: async () => {\n      if (!country) return {};\n\n      let categoryListingIds: string[] | null = null;\n      if (categoryId) {\n        const { data: listingIds } = await supabase\n          .from(\"listing_categories\")\n          .select(\"listing_id\")\n          .eq(\"category_id\", categoryId);\n\n        if (!listingIds || listingIds.length === 0) return {};\n        categoryListingIds = listingIds.map((l) => l.listing_id);\n      }\n\n      // Use listings_public view\n      const data = await fetchAllRows<{ region_id: number | null }>(() => {\n        let query = supabase\n          .from(\"listings_public\")\n          .select(\"region_id\")\n          .eq(\"country\", country)\n          .not(\"region_id\", \"is\", null);\n\n        if (categoryListingIds) {\n          query = query.in(\"id\", categoryListingIds);\n        }\n\n        return query;\n      });\n\n      const counts: Record<number, number> = {};\n      data.forEach((d) => {\n        if (d.region_id) {\n          counts[d.region_id] = (counts[d.region_id] || 0) + 1;\n        }\n      });\n      return counts;\n    },\n    enabled: !!country,\n  });\n}\n\n// Continent counts for a specific category\nexport function useCategoryContinentCounts(categoryId?: string) {\n  return useQuery({\n    queryKey: [\"category-continent-counts\", categoryId],\n    queryFn: async () => {\n      if (!categoryId) return {};\n\n      const { data: listingIds } = await supabase\n        .from(\"listing_categories\")\n        .select(\"listing_id\")\n        .eq(\"category_id\", categoryId);\n\n      if (!listingIds || listingIds.length === 0) return {};\n\n      // Use listings_public view\n      const data = await fetchAllRows<{ continent: string | null }>(() =>\n        supabase\n          .from(\"listings_public\")\n          .select(\"continent\")\n          .in(\n            \"id\",\n            listingIds.map((l) => l.listing_id),\n          ),\n      );\n\n      const counts: Record<string, number> = {};\n      data.forEach((d) => {\n        if (d.continent) {\n          counts[d.continent] = (counts[d.continent] || 0) + 1;\n        }\n      });\n      return counts;\n    },\n    enabled: !!categoryId,\n    staleTime: 5 * 60 * 1000,\n  });\n}\n\n// Total listing count for a category\nexport function useCategoryTotalCount(categoryId?: string) {\n  return useQuery({\n    queryKey: [\"category-total-count\", categoryId],\n    queryFn: async () => {\n      if (!categoryId) return 0;\n\n      const { count, error } = await supabase\n        .from(\"listing_categories\")\n        .select(\"*\", { count: \"exact\", head: true })\n        .eq(\"category_id\", categoryId);\n\n      if (error) throw error;\n      return count || 0;\n    },\n    enabled: !!categoryId,\n    staleTime: 5 * 60 * 1000,\n  });\n}\n\n// Countries by continent for a category\nexport function useCategoryCountriesByContinent(categoryId?: string, continent?: string) {\n  return useQuery({\n    queryKey: [\"category-countries-by-continent\", categoryId, continent],\n    queryFn: async () => {\n      if (!categoryId || !continent) return [];\n\n      const { data: listingIds } = await supabase\n        .from(\"listing_categories\")\n        .select(\"listing_id\")\n        .eq(\"category_id\", categoryId);\n\n      if (!listingIds || listingIds.length === 0) return [];\n\n      // Use listings_public view\n      const data = await fetchAllRows<{ country: string | null }>(() =>\n        supabase\n          .from(\"listings_public\")\n          .select(\"country\")\n          .eq(\"continent\", continent)\n          .in(\n            \"id\",\n            listingIds.map((l) => l.listing_id),\n          ),\n      );\n\n      const countries = [...new Set(data.map((d) => d.country).filter(Boolean))] as string[];\n      return countries.sort();\n    },\n    enabled: !!categoryId && !!continent,\n    staleTime: 5 * 60 * 1000,\n  });\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1896, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/contexts/AuthContext.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useState, useEffect, ReactNode } from \"react\";\r\nimport { User, Session } from \"@supabase/supabase-js\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\n\r\ninterface AuthContextType {\r\n  user: User | null;\r\n  session: Session | null;\r\n  loading: boolean;\r\n  isAdmin: boolean;\r\n  adminLoading: boolean;\r\n  signIn: (email: string, password: string) => Promise<void>;\r\n  signOut: () => Promise<void>;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport function AuthProvider({ children }: { children: ReactNode }) {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [session, setSession] = useState<Session | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n  const [adminLoading, setAdminLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    // Set up auth state listener FIRST\r\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(\r\n      (_event, session) => {\r\n        setSession(session);\r\n        setUser(session?.user ?? null);\r\n        setLoading(false);\r\n      }\r\n    );\r\n\r\n    // THEN check for existing session\r\n    supabase.auth.getSession().then(({ data: { session } }) => {\r\n      setSession(session);\r\n      setUser(session?.user ?? null);\r\n      setLoading(false);\r\n    });\r\n\r\n    return () => subscription.unsubscribe();\r\n  }, []);\r\n\r\n  // Check admin status when user changes\r\n  useEffect(() => {\r\n    if (!user) {\r\n      setIsAdmin(false);\r\n      setAdminLoading(false);\r\n      return;\r\n    }\r\n\r\n    const checkAdmin = async () => {\r\n      setAdminLoading(true);\r\n      console.log('[AuthContext] Checking admin for user:' , user.id);\n      const { data, error } = await supabase\r\n        .from(\"user_roles\")\r\n        .select(\"role\")\r\n        .eq(\"user_id\", user.id)\r\n        .eq(\"role\", \"admin\")\r\n        .maybeSingle();\r\n\r\n      console.log('[AuthContext] Admin check result:', { data, error, isAdmin: !error && !!data });\n      setIsAdmin(!error && !!data);\r\n      setAdminLoading(false);\r\n    };\r\n\r\n    checkAdmin();\r\n  }, [user]);\r\n\r\n  const signIn = async (email: string, password: string) => {\r\n    const { error } = await supabase.auth.signInWithPassword({ email, password });\r\n    if (error) throw error;\r\n  };\r\n\r\n  const signOut = async () => {\r\n    const { error } = await supabase.auth.signOut();\r\n    if (error) throw error;\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        user,\r\n        session,\r\n        loading,\r\n        isAdmin,\r\n        adminLoading,\r\n        signIn,\r\n        signOut,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useAuthContext() {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useAuthContext must be used within an AuthProvider\");\r\n  }\r\n  return context;\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AAEA;AAJA;;;;AAgBA,MAAM,4BAAc,IAAA,0OAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAA2B;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,qOAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,qOAAQ,EAAiB;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,qOAAQ,EAAC;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,qOAAQ,EAAC;IACvC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,qOAAQ,EAAC;IAEjD,IAAA,sOAAS,EAAC;QACR,mCAAmC;QACnC,MAAM,EAAE,MAAM,EAAE,YAAY,EAAE,EAAE,GAAG,yKAAQ,CAAC,IAAI,CAAC,iBAAiB,CAChE,CAAC,QAAQ;YACP,WAAW;YACX,QAAQ,SAAS,QAAQ;YACzB,WAAW;QACb;QAGF,kCAAkC;QAClC,yKAAQ,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE;YACpD,WAAW;YACX,QAAQ,SAAS,QAAQ;YACzB,WAAW;QACb;QAEA,OAAO,IAAM,aAAa,WAAW;IACvC,GAAG,EAAE;IAEL,uCAAuC;IACvC,IAAA,sOAAS,EAAC;QACR,IAAI,CAAC,MAAM;YACT,WAAW;YACX,gBAAgB;YAChB;QACF;QAEA,MAAM,aAAa;YACjB,gBAAgB;YAChB,QAAQ,GAAG,CAAC,0CAA2C,KAAK,EAAE;YAC9D,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,yKAAQ,CACnC,IAAI,CAAC,cACL,MAAM,CAAC,QACP,EAAE,CAAC,WAAW,KAAK,EAAE,EACrB,EAAE,CAAC,QAAQ,SACX,WAAW;YAEd,QAAQ,GAAG,CAAC,qCAAqC;gBAAE;gBAAM;gBAAO,SAAS,CAAC,SAAS,CAAC,CAAC;YAAK;YAC1F,WAAW,CAAC,SAAS,CAAC,CAAC;YACvB,gBAAgB;QAClB;QAEA;IACF,GAAG;QAAC;KAAK;IAET,MAAM,SAAS,OAAO,OAAe;QACnC,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,yKAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC;YAAE;YAAO;QAAS;QAC3E,IAAI,OAAO,MAAM;IACnB;IAEA,MAAM,UAAU;QACd,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,yKAAQ,CAAC,IAAI,CAAC,OAAO;QAC7C,IAAI,OAAO,MAAM;IACnB;IAEA,qBACE,kQAAC,YAAY,QAAQ;QACnB,OAAO;YACL;YACA;YACA;YACA;YACA;YACA;YACA;QACF;kBAEC;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,uOAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 1993, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/hooks/useAuth.ts"],"sourcesContent":["'use client';\n\nimport { useAuthContext } from \"@/contexts/AuthContext\";\r\n\r\nexport function useAuth() {\r\n  const { user, loading, signIn, signOut } = useAuthContext();\r\n  return { user, loading, signIn, signOut };\r\n}\r\n\r\nexport function useIsAdmin() {\r\n  const { isAdmin, adminLoading: loading } = useAuthContext();\r\n  return { isAdmin, loading };\r\n}\r\n"],"names":[],"mappings":";;;;;;AAEA;AAFA;;AAIO,SAAS;IACd,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,qKAAc;IACzD,OAAO;QAAE;QAAM;QAAS;QAAQ;IAAQ;AAC1C;AAEO,SAAS;IACd,MAAM,EAAE,OAAO,EAAE,cAAc,OAAO,EAAE,GAAG,IAAA,qKAAc;IACzD,OAAO;QAAE;QAAS;IAAQ;AAC5B","debugId":null}},
    {"offset": {"line": 2022, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/hooks/useCategories.ts"],"sourcesContent":["'use client';\n\nimport { useQuery } from \"@tanstack/react-query\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport { Category } from \"@/types/database\";\n\nexport function useCategories() {\n  return useQuery({\n    queryKey: [\"categories\"],\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from(\"categories\")\n        .select(\"*\")\n        .order(\"name\");\n\n      if (error) throw error;\n      return data as Category[];\n    },\n  });\n}\n\nexport function useCategoryBySlug(slug: string, initialData?: Category | null) {\n  return useQuery({\n    queryKey: [\"category\", slug],\n    queryFn: async () => {\n      // First try to find by url_slug, then fallback to slug\n      const { data: byUrlSlug, error: urlSlugError } = await supabase\n        .from(\"categories\")\n        .select(\"*\")\n        .eq(\"url_slug\", slug)\n        .maybeSingle();\n\n      if (urlSlugError) throw urlSlugError;\n      if (byUrlSlug) return byUrlSlug as Category;\n\n      // Fallback to regular slug\n      const { data, error } = await supabase\n        .from(\"categories\")\n        .select(\"*\")\n        .eq(\"slug\", slug)\n        .maybeSingle();\n\n      if (error) throw error;\n      return data as Category | null;\n    },\n    enabled: !!slug,\n    initialData,\n  });\n}\n\nexport function useSubcategories(parentId: string | null, initialData?: Category[]) {\n  return useQuery({\n    queryKey: [\"subcategories\", parentId],\n    queryFn: async () => {\n      const query = supabase.from(\"categories\").select(\"*\").order(\"name\");\n      \n      if (parentId) {\n        query.eq(\"parent_id\", parentId);\n      } else {\n        query.is(\"parent_id\", null);\n      }\n\n      const { data, error } = await query;\n      if (error) throw error;\n      return data as Category[];\n    },\n    initialData,\n  });\n}"],"names":[],"mappings":";;;;;;;;AAEA;AACA;AAHA;;;AAMO,SAAS;IACd,OAAO,IAAA,2MAAQ,EAAC;QACd,UAAU;YAAC;SAAa;QACxB,SAAS;YACP,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,yKAAQ,CACnC,IAAI,CAAC,cACL,MAAM,CAAC,KACP,KAAK,CAAC;YAET,IAAI,OAAO,MAAM;YACjB,OAAO;QACT;IACF;AACF;AAEO,SAAS,kBAAkB,IAAY,EAAE,WAA6B;IAC3E,OAAO,IAAA,2MAAQ,EAAC;QACd,UAAU;YAAC;YAAY;SAAK;QAC5B,SAAS;YACP,uDAAuD;YACvD,MAAM,EAAE,MAAM,SAAS,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,yKAAQ,CAC5D,IAAI,CAAC,cACL,MAAM,CAAC,KACP,EAAE,CAAC,YAAY,MACf,WAAW;YAEd,IAAI,cAAc,MAAM;YACxB,IAAI,WAAW,OAAO;YAEtB,2BAA2B;YAC3B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,yKAAQ,CACnC,IAAI,CAAC,cACL,MAAM,CAAC,KACP,EAAE,CAAC,QAAQ,MACX,WAAW;YAEd,IAAI,OAAO,MAAM;YACjB,OAAO;QACT;QACA,SAAS,CAAC,CAAC;QACX;IACF;AACF;AAEO,SAAS,iBAAiB,QAAuB,EAAE,WAAwB;IAChF,OAAO,IAAA,2MAAQ,EAAC;QACd,UAAU;YAAC;YAAiB;SAAS;QACrC,SAAS;YACP,MAAM,QAAQ,yKAAQ,CAAC,IAAI,CAAC,cAAc,MAAM,CAAC,KAAK,KAAK,CAAC;YAE5D,IAAI,UAAU;gBACZ,MAAM,EAAE,CAAC,aAAa;YACxB,OAAO;gBACL,MAAM,EAAE,CAAC,aAAa;YACxB;YAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM;YAC9B,IAAI,OAAO,MAAM;YACjB,OAAO;QACT;QACA;IACF;AACF","debugId":null}},
    {"offset": {"line": 2094, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/assets/showcase-logo.svg.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 500, height: 105, blurWidth: 0, blurHeight: 0};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,yJAAG;IAAE,OAAO;IAAK,QAAQ;IAAK,WAAW;IAAG,YAAY;AAAC","debugId":null}},
    {"offset": {"line": 2111, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,0LAAO,EAAC,IAAA,iKAAI,EAAC;AACtB","debugId":null}},
    {"offset": {"line": 2126, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-semibold ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"gradient-action text-primary-foreground hover:opacity-90 hover:shadow-glow-pink\",\n        destructive: \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline: \"border border-primary/50 bg-transparent text-primary hover:bg-primary/10 hover:border-primary\",\n        secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent/10 hover:text-primary\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n        gradient: \"gradient-brand text-primary-foreground hover:opacity-90 hover:shadow-glow-pink\",\n        \"gradient-outline\": \"border border-transparent bg-card text-foreground gradient-border hover:shadow-glow-pink\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean;\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\";\n    return <Comp className={cn(buttonVariants({ variant, size, className }))} ref={ref} {...props} />;\n  },\n);\nButton.displayName = \"Button\";\n\nexport { Button, buttonVariants };"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,2LAAG,EACxB,wWACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aAAa;YACb,SAAS;YACT,WAAW;YACX,OAAO;YACP,MAAM;YACN,UAAU;YACV,oBAAoB;QACtB;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,uOAAgB,CAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,4LAAI,GAAG;IAC9B,qBAAO,kQAAC;QAAK,WAAW,IAAA,6IAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QAAK,KAAK;QAAM,GAAG,KAAK;;;;;;AAC/F;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 2188, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/ui/sheet.tsx"],"sourcesContent":["import * as SheetPrimitive from \"@radix-ui/react-dialog\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\nimport { X } from \"lucide-react\";\nimport * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Sheet = SheetPrimitive.Root;\n\nconst SheetTrigger = SheetPrimitive.Trigger;\n\nconst SheetClose = SheetPrimitive.Close;\n\nconst SheetPortal = SheetPrimitive.Portal;\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className,\n    )}\n    {...props}\n    ref={ref}\n  />\n));\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName;\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  },\n);\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<React.ElementRef<typeof SheetPrimitive.Content>, SheetContentProps>(\n  ({ side = \"right\", className, children, ...props }, ref) => (\n    <SheetPortal>\n      <SheetOverlay />\n      <SheetPrimitive.Content ref={ref} className={cn(sheetVariants({ side }), className)} {...props}>\n        {children}\n        <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none\">\n          <X className=\"h-4 w-4\" />\n          <span className=\"sr-only\">Close</span>\n        </SheetPrimitive.Close>\n      </SheetPrimitive.Content>\n    </SheetPortal>\n  ),\n);\nSheetContent.displayName = SheetPrimitive.Content.displayName;\n\nconst SheetHeader = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (\n  <div className={cn(\"flex flex-col space-y-2 text-center sm:text-left\", className)} {...props} />\n);\nSheetHeader.displayName = \"SheetHeader\";\n\nconst SheetFooter = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (\n  <div className={cn(\"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\", className)} {...props} />\n);\nSheetFooter.displayName = \"SheetFooter\";\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title ref={ref} className={cn(\"text-lg font-semibold text-foreground\", className)} {...props} />\n));\nSheetTitle.displayName = SheetPrimitive.Title.displayName;\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description ref={ref} className={cn(\"text-sm text-muted-foreground\", className)} {...props} />\n));\nSheetDescription.displayName = SheetPrimitive.Description.displayName;\n\nexport {\n  Sheet,\n  SheetClose,\n  SheetContent,\n  SheetDescription,\n  SheetFooter,\n  SheetHeader,\n  SheetOverlay,\n  SheetPortal,\n  SheetTitle,\n  SheetTrigger,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;;;;;;;AAEA,MAAM,QAAQ,8LAAmB;AAEjC,MAAM,eAAe,iMAAsB;AAE3C,MAAM,aAAa,+LAAoB;AAEvC,MAAM,cAAc,gMAAqB;AAEzC,MAAM,6BAAe,uOAAgB,CAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,kQAAC,iMAAsB;QACrB,WAAW,IAAA,6IAAE,EACX,0JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;AAGT,aAAa,WAAW,GAAG,iMAAsB,CAAC,WAAW;AAE7D,MAAM,gBAAgB,IAAA,2LAAG,EACvB,oMACA;IACE,UAAU;QACR,MAAM;YACJ,KAAK;YACL,QACE;YACF,MAAM;YACN,OACE;QACJ;IACF;IACA,iBAAiB;QACf,MAAM;IACR;AACF;AAOF,MAAM,6BAAe,uOAAgB,CACnC,CAAC,EAAE,OAAO,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBAClD,kQAAC;;0BACC,kQAAC;;;;;0BACD,kQAAC,iMAAsB;gBAAC,KAAK;gBAAK,WAAW,IAAA,6IAAE,EAAC,cAAc;oBAAE;gBAAK,IAAI;gBAAa,GAAG,KAAK;;oBAC3F;kCACD,kQAAC,+LAAoB;wBAAC,WAAU;;0CAC9B,kQAAC,qNAAC;gCAAC,WAAU;;;;;;0CACb,kQAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMpC,aAAa,WAAW,GAAG,iMAAsB,CAAC,WAAW;AAE7D,MAAM,cAAc,CAAC,EAAE,SAAS,EAAE,GAAG,OAA6C,iBAChF,kQAAC;QAAI,WAAW,IAAA,6IAAE,EAAC,oDAAoD;QAAa,GAAG,KAAK;;;;;;AAE9F,YAAY,WAAW,GAAG;AAE1B,MAAM,cAAc,CAAC,EAAE,SAAS,EAAE,GAAG,OAA6C,iBAChF,kQAAC;QAAI,WAAW,IAAA,6IAAE,EAAC,iEAAiE;QAAa,GAAG,KAAK;;;;;;AAE3G,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,uOAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,kQAAC,+LAAoB;QAAC,KAAK;QAAK,WAAW,IAAA,6IAAE,EAAC,yCAAyC;QAAa,GAAG,KAAK;;;;;;AAE9G,WAAW,WAAW,GAAG,+LAAoB,CAAC,WAAW;AAEzD,MAAM,iCAAmB,uOAAgB,CAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,kQAAC,qMAA0B;QAAC,KAAK;QAAK,WAAW,IAAA,6IAAE,EAAC,iCAAiC;QAAa,GAAG,KAAK;;;;;;AAE5G,iBAAiB,WAAW,GAAG,qMAA0B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 2344, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/hooks/useFavourites.ts"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\r\n\r\nconst STORAGE_KEY = 'showcase-favourites';\r\nconst FAVOURITES_UPDATED_EVENT = 'favourites-updated';\r\n\r\n// Helper to read current favourites from localStorage\r\nconst getFavouritesFromStorage = (): string[] => {\r\n  try {\r\n    const stored = localStorage.getItem(STORAGE_KEY);\r\n    return stored ? JSON.parse(stored) : [];\r\n  } catch {\r\n    return [];\r\n  }\r\n};\r\n\r\n// Helper to save favourites to localStorage and dispatch event\r\nconst saveFavouritesToStorage = (favourites: string[]) => {\r\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(favourites));\r\n  window.dispatchEvent(new CustomEvent(FAVOURITES_UPDATED_EVENT));\r\n};\r\n\r\n// For components that only need to check one listing (FavouriteButton)\r\nexport function useIsFavourite(listingId: string) {\r\n  const [isFav, setIsFav] = useState(() => \r\n    getFavouritesFromStorage().includes(listingId)\r\n  );\r\n\r\n  useEffect(() => {\r\n    const handleUpdate = () => {\r\n      setIsFav(getFavouritesFromStorage().includes(listingId));\r\n    };\r\n    \r\n    window.addEventListener(FAVOURITES_UPDATED_EVENT, handleUpdate);\r\n    window.addEventListener('storage', handleUpdate);\r\n    \r\n    return () => {\r\n      window.removeEventListener(FAVOURITES_UPDATED_EVENT, handleUpdate);\r\n      window.removeEventListener('storage', handleUpdate);\r\n    };\r\n  }, [listingId]);\r\n\r\n  const toggle = useCallback(() => {\r\n    const currentFavourites = getFavouritesFromStorage();\r\n    let newFavourites: string[];\r\n    \r\n    if (currentFavourites.includes(listingId)) {\r\n      newFavourites = currentFavourites.filter(id => id !== listingId);\r\n    } else {\r\n      newFavourites = [...currentFavourites, listingId];\r\n    }\r\n    \r\n    saveFavouritesToStorage(newFavourites);\r\n  }, [listingId]);\r\n\r\n  return { isFavourite: isFav, toggle };\r\n}\r\n\r\n// For components that need the full list (Favourites page, Header count)\r\nexport function useFavourites() {\r\n  const [favourites, setFavourites] = useState<string[]>(getFavouritesFromStorage);\r\n\r\n  useEffect(() => {\r\n    const handleUpdate = () => {\r\n      setFavourites(getFavouritesFromStorage());\r\n    };\r\n    \r\n    window.addEventListener(FAVOURITES_UPDATED_EVENT, handleUpdate);\r\n    window.addEventListener('storage', handleUpdate);\r\n    \r\n    return () => {\r\n      window.removeEventListener(FAVOURITES_UPDATED_EVENT, handleUpdate);\r\n      window.removeEventListener('storage', handleUpdate);\r\n    };\r\n  }, []);\r\n\r\n  const toggleFavourite = useCallback((listingId: string) => {\r\n    const currentFavourites = getFavouritesFromStorage();\r\n    let newFavourites: string[];\r\n    \r\n    if (currentFavourites.includes(listingId)) {\r\n      newFavourites = currentFavourites.filter(id => id !== listingId);\r\n    } else {\r\n      newFavourites = [...currentFavourites, listingId];\r\n    }\r\n    \r\n    saveFavouritesToStorage(newFavourites);\r\n  }, []);\r\n\r\n  const removeFavourite = useCallback((listingId: string) => {\r\n    const currentFavourites = getFavouritesFromStorage();\r\n    const newFavourites = currentFavourites.filter(id => id !== listingId);\r\n    saveFavouritesToStorage(newFavourites);\r\n  }, []);\r\n\r\n  return {\r\n    favourites,\r\n    toggleFavourite,\r\n    removeFavourite,\r\n    count: favourites.length,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;;;AAEA;AAFA;;AAIA,MAAM,cAAc;AACpB,MAAM,2BAA2B;AAEjC,sDAAsD;AACtD,MAAM,2BAA2B;IAC/B,IAAI;QACF,MAAM,SAAS,aAAa,OAAO,CAAC;QACpC,OAAO,SAAS,KAAK,KAAK,CAAC,UAAU,EAAE;IACzC,EAAE,OAAM;QACN,OAAO,EAAE;IACX;AACF;AAEA,+DAA+D;AAC/D,MAAM,0BAA0B,CAAC;IAC/B,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;IACjD,OAAO,aAAa,CAAC,IAAI,YAAY;AACvC;AAGO,SAAS,eAAe,SAAiB;IAC9C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,qOAAQ,EAAC,IACjC,2BAA2B,QAAQ,CAAC;IAGtC,IAAA,sOAAS,EAAC;QACR,MAAM,eAAe;YACnB,SAAS,2BAA2B,QAAQ,CAAC;QAC/C;QAEA,OAAO,gBAAgB,CAAC,0BAA0B;QAClD,OAAO,gBAAgB,CAAC,WAAW;QAEnC,OAAO;YACL,OAAO,mBAAmB,CAAC,0BAA0B;YACrD,OAAO,mBAAmB,CAAC,WAAW;QACxC;IACF,GAAG;QAAC;KAAU;IAEd,MAAM,SAAS,IAAA,wOAAW,EAAC;QACzB,MAAM,oBAAoB;QAC1B,IAAI;QAEJ,IAAI,kBAAkB,QAAQ,CAAC,YAAY;YACzC,gBAAgB,kBAAkB,MAAM,CAAC,CAAA,KAAM,OAAO;QACxD,OAAO;YACL,gBAAgB;mBAAI;gBAAmB;aAAU;QACnD;QAEA,wBAAwB;IAC1B,GAAG;QAAC;KAAU;IAEd,OAAO;QAAE,aAAa;QAAO;IAAO;AACtC;AAGO,SAAS;IACd,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,qOAAQ,EAAW;IAEvD,IAAA,sOAAS,EAAC;QACR,MAAM,eAAe;YACnB,cAAc;QAChB;QAEA,OAAO,gBAAgB,CAAC,0BAA0B;QAClD,OAAO,gBAAgB,CAAC,WAAW;QAEnC,OAAO;YACL,OAAO,mBAAmB,CAAC,0BAA0B;YACrD,OAAO,mBAAmB,CAAC,WAAW;QACxC;IACF,GAAG,EAAE;IAEL,MAAM,kBAAkB,IAAA,wOAAW,EAAC,CAAC;QACnC,MAAM,oBAAoB;QAC1B,IAAI;QAEJ,IAAI,kBAAkB,QAAQ,CAAC,YAAY;YACzC,gBAAgB,kBAAkB,MAAM,CAAC,CAAA,KAAM,OAAO;QACxD,OAAO;YACL,gBAAgB;mBAAI;gBAAmB;aAAU;QACnD;QAEA,wBAAwB;IAC1B,GAAG,EAAE;IAEL,MAAM,kBAAkB,IAAA,wOAAW,EAAC,CAAC;QACnC,MAAM,oBAAoB;QAC1B,MAAM,gBAAgB,kBAAkB,MAAM,CAAC,CAAA,KAAM,OAAO;QAC5D,wBAAwB;IAC1B,GAAG,EAAE;IAEL,OAAO;QACL;QACA;QACA;QACA,OAAO,WAAW,MAAM;IAC1B;AACF","debugId":null}},
    {"offset": {"line": 2446, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/header/MobileMenuButton.tsx"],"sourcesContent":["'use client';\r\n\r\nimport Link from 'next/link';\r\nimport { Menu, Heart } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Sheet, SheetContent, SheetTrigger } from \"@/components/ui/sheet\";\r\nimport { useFavourites } from \"@/hooks/useFavourites\";\r\nimport { useState } from \"react\";\r\n\r\nconst navItems = [\r\n  { label: \"HOME\", to: \"/\" },\r\n  { label: \"CATEGORIES\", to: \"/categories\" },\r\n];\r\n\r\nexport function MobileMenuButton() {\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n  const { count: favouritesCount } = useFavourites();\r\n\r\n  return (\r\n    <Sheet open={mobileMenuOpen} onOpenChange={setMobileMenuOpen}>\r\n      <SheetTrigger asChild className=\"md:hidden\">\r\n        <Button variant=\"ghost\" size=\"icon\">\r\n          <Menu className=\"h-6 w-6\" />\r\n        </Button>\r\n      </SheetTrigger>\r\n      <SheetContent side=\"right\" className=\"w-[280px] bg-card border-border\">\r\n        <nav className=\"flex flex-col gap-4 mt-8\">\r\n          {navItems.map((item) => (\r\n            <Link\r\n              key={item.to}\r\n              href={item.to}\r\n              className=\"text-lg font-medium text-foreground hover:text-primary transition-colors py-2\"\r\n              onClick={() => setMobileMenuOpen(false)}\r\n            >\r\n              {item.label}\r\n            </Link>\r\n          ))}\r\n          <Link\r\n            href=\"/favourites\"\r\n            className=\"text-lg font-medium text-foreground hover:text-primary transition-colors py-2 flex items-center gap-2\"\r\n            onClick={() => setMobileMenuOpen(false)}\r\n          >\r\n            <Heart className=\"h-5 w-5\" />\r\n            FAVOURITES\r\n            {favouritesCount > 0 && (\r\n              <span className=\"bg-primary text-primary-foreground text-xs px-1.5 py-0.5 rounded-full\">\r\n                {favouritesCount}\r\n              </span>\r\n            )}\r\n          </Link>\r\n        </nav>\r\n      </SheetContent>\r\n    </Sheet>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;AASA,MAAM,WAAW;IACf;QAAE,OAAO;QAAQ,IAAI;IAAI;IACzB;QAAE,OAAO;QAAc,IAAI;IAAc;CAC1C;AAEM,SAAS;IACd,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,qOAAQ,EAAC;IACrD,MAAM,EAAE,OAAO,eAAe,EAAE,GAAG,IAAA,kKAAa;IAEhD,qBACE,kQAAC,8JAAK;QAAC,MAAM;QAAgB,cAAc;;0BACzC,kQAAC,qKAAY;gBAAC,OAAO;gBAAC,WAAU;0BAC9B,cAAA,kQAAC,gKAAM;oBAAC,SAAQ;oBAAQ,MAAK;8BAC3B,cAAA,kQAAC,8NAAI;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGpB,kQAAC,qKAAY;gBAAC,MAAK;gBAAQ,WAAU;0BACnC,cAAA,kQAAC;oBAAI,WAAU;;wBACZ,SAAS,GAAG,CAAC,CAAC,qBACb,kQAAC,2LAAI;gCAEH,MAAM,KAAK,EAAE;gCACb,WAAU;gCACV,SAAS,IAAM,kBAAkB;0CAEhC,KAAK,KAAK;+BALN,KAAK,EAAE;;;;;sCAQhB,kQAAC,2LAAI;4BACH,MAAK;4BACL,WAAU;4BACV,SAAS,IAAM,kBAAkB;;8CAEjC,kQAAC,iOAAK;oCAAC,WAAU;;;;;;gCAAY;gCAE5B,kBAAkB,mBACjB,kQAAC;oCAAK,WAAU;8CACb;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQjB","debugId":null}},
    {"offset": {"line": 2571, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/header/TopBar.tsx"],"sourcesContent":["import Link from 'next/link';\r\nimport showcaseLogo from \"@/assets/showcase-logo.svg\";\r\nimport { MobileMenuButton } from './MobileMenuButton';\r\n\r\ninterface Ad {\r\n  id: string;\r\n  name: string;\r\n  image_url: string;\r\n  link_url: string | null;\r\n  alt_text: string | null;\r\n}\r\n\r\ninterface TopBarProps {\r\n  sponsorAd: Ad | null;\r\n}\r\n\r\nexport function TopBar({ sponsorAd }: TopBarProps) {\r\n  return (\r\n    <div className=\"bg-card/50 border-b border-border\">\r\n      <div className=\"container py-4\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <Link href=\"/\">\r\n            <img\r\n              src={showcaseLogo}\r\n              alt=\"Showcase Music - The International Music Business Guide\"\r\n              className=\"h-14 w-auto\"\r\n            />\r\n          </Link>\r\n\r\n          <div className=\"hidden md:flex items-center gap-3\">\r\n            <span className=\"text-xs text-muted-foreground uppercase tracking-wide\">Sponsored By</span>\r\n            {sponsorAd ? (\r\n              <a href={sponsorAd.link_url || \"#\"} target=\"_blank\" rel=\"noopener noreferrer\" className=\"block hover:opacity-80 transition-opacity\">\r\n                <img src={sponsorAd.image_url} alt={sponsorAd.alt_text || sponsorAd.name} className=\"h-14 w-auto max-w-48 object-contain\" />\r\n              </a>\r\n            ) : (\r\n              <div className=\"w-48 h-14 bg-secondary border border-dashed border-border rounded-lg flex items-center justify-center\">\r\n                <span className=\"text-xs text-muted-foreground\">Your Logo Here</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <MobileMenuButton />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAcO,SAAS,OAAO,EAAE,SAAS,EAAe;IAC/C,qBACE,kQAAC;QAAI,WAAU;kBACb,cAAA,kQAAC;YAAI,WAAU;sBACb,cAAA,kQAAC;gBAAI,WAAU;;kCACb,kQAAC,2LAAI;wBAAC,MAAK;kCACT,cAAA,kQAAC;4BACC,KAAK,sWAAY;4BACjB,KAAI;4BACJ,WAAU;;;;;;;;;;;kCAId,kQAAC;wBAAI,WAAU;;0CACb,kQAAC;gCAAK,WAAU;0CAAwD;;;;;;4BACvE,0BACC,kQAAC;gCAAE,MAAM,UAAU,QAAQ,IAAI;gCAAK,QAAO;gCAAS,KAAI;gCAAsB,WAAU;0CACtF,cAAA,kQAAC;oCAAI,KAAK,UAAU,SAAS;oCAAE,KAAK,UAAU,QAAQ,IAAI,UAAU,IAAI;oCAAE,WAAU;;;;;;;;;;qDAGtF,kQAAC;gCAAI,WAAU;0CACb,cAAA,kQAAC;oCAAK,WAAU;8CAAgC;;;;;;;;;;;;;;;;;kCAKtD,kQAAC,wLAAgB;;;;;;;;;;;;;;;;;;;;;AAK3B","debugId":null}},
    {"offset": {"line": 2683, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/NavLink.tsx"],"sourcesContent":["'use client';\n\nimport { forwardRef } from \"react\";\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport { cn } from \"@/lib/utils\";\n\ninterface NavLinkProps extends Omit<React.ComponentPropsWithoutRef<typeof Link>, 'href'> {\n  className?: string;\n  activeClassName?: string;\n  href?: string;\n  to?: string; // Legacy React Router prop\n}\n\nconst NavLink = forwardRef<HTMLAnchorElement, NavLinkProps>(\n  ({ className, activeClassName, href, to, ...props }, ref) => {\n    const pathname = usePathname();\n    const linkHref = href || to || '/'; // Use href or to, fallback to '/'\n    const isActive = pathname === linkHref || pathname?.startsWith(linkHref + '/');\n    \n    return (\n      <Link\n        ref={ref}\n        href={linkHref}\n        className={cn(className, isActive && activeClassName)}\n        {...props}\n      />\n    );\n  },\n);\n\nNavLink.displayName = \"NavLink\";\n\nexport { NavLink };"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAcA,MAAM,wBAAU,IAAA,uOAAU,EACxB,CAAC,EAAE,SAAS,EAAE,eAAe,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,OAAO,EAAE;IACnD,MAAM,WAAW,IAAA,qKAAW;IAC5B,MAAM,WAAW,QAAQ,MAAM,KAAK,kCAAkC;IACtE,MAAM,WAAW,aAAa,YAAY,UAAU,WAAW,WAAW;IAE1E,qBACE,kQAAC,2LAAI;QACH,KAAK;QACL,MAAM;QACN,WAAW,IAAA,6IAAE,EAAC,WAAW,YAAY;QACpC,GAAG,KAAK;;;;;;AAGf;AAGF,QAAQ,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 2719, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/header/NavBar.tsx"],"sourcesContent":["'use client';\r\n\r\nimport Link from 'next/link';\r\nimport { usePathname } from 'next/navigation';\r\nimport { Heart, ChevronRight } from \"lucide-react\";\r\nimport { NavLink } from \"@/components/NavLink\";\r\nimport { useFavourites } from \"@/hooks/useFavourites\";\r\nimport { ReactNode } from \"react\";\r\n\r\nconst navItems = [\r\n  { label: \"HOME\", to: \"/\" },\r\n  { label: \"CATEGORIES\", to: \"/categories\" },\r\n];\r\n\r\nexport interface BreadcrumbItem {\r\n  label: string;\r\n  to?: string;\r\n}\r\n\r\ninterface NavBarProps {\r\n  breadcrumbs?: BreadcrumbItem[];\r\n  rightContent?: ReactNode;\r\n  customNavContent?: ReactNode;\r\n}\r\n\r\nexport function NavBar({ breadcrumbs, rightContent, customNavContent }: NavBarProps) {\r\n  const { count: favouritesCount } = useFavourites();\r\n\r\n  const showBreadcrumbs = breadcrumbs && breadcrumbs.length > 0;\r\n  const showCustomNav = !!customNavContent;\r\n\r\n  return (\r\n    <nav className=\"hidden md:block bg-secondary/50\">\r\n      <div className=\"container\">\r\n        <div className=\"flex items-center justify-between py-2\">\r\n          <div className=\"flex items-center justify-between w-full\">\r\n            {showCustomNav ? (\r\n              <div className=\"flex items-center gap-1.5 text-xs lg:text-sm min-w-0 overflow-hidden\">\r\n                {customNavContent}\r\n              </div>\r\n            ) : showBreadcrumbs ? (\r\n              <div className=\"flex items-center gap-1 lg:gap-1.5 text-xs lg:text-sm text-muted-foreground min-w-0 overflow-hidden\">\r\n                {breadcrumbs.map((crumb, index) => {\r\n                  const isFirst = index === 0;\r\n                  const isLast = index === breadcrumbs.length - 1;\r\n                  const isSecondLast = index === breadcrumbs.length - 2;\r\n                  const totalItems = breadcrumbs.length;\r\n\r\n                  const isMiddleItem = !isFirst && !isLast && !isSecondLast;\r\n                  const shouldHideOnMobile = isMiddleItem && totalItems > 3;\r\n                  const showEllipsis = isSecondLast && totalItems > 3;\r\n\r\n                  return (\r\n                    <div\r\n                      key={index}\r\n                      className={`flex items-center gap-1 lg:gap-1.5 min-w-0 ${shouldHideOnMobile ? \"hidden lg:flex\" : \"\"}`}\r\n                    >\r\n                      {index > 0 && (\r\n                        <ChevronRight\r\n                          className={`h-3 w-3 lg:h-4 lg:w-4 flex-shrink-0 ${shouldHideOnMobile ? \"hidden lg:block\" : \"\"}`}\r\n                        />\r\n                      )}\r\n                      {showEllipsis && (\r\n                        <span className=\"lg:hidden flex items-center gap-1\">\r\n                          <span>...</span>\r\n                          <ChevronRight className=\"h-3 w-3 flex-shrink-0\" />\r\n                        </span>\r\n                      )}\r\n                      {crumb.to ? (\r\n                        <Link\r\n                          href={crumb.to}\r\n                          className=\"hover:text-primary transition-colors whitespace-nowrap max-w-[120px] lg:max-w-[200px] truncate\"\r\n                        >\r\n                          {crumb.label}\r\n                        </Link>\r\n                      ) : (\r\n                        <span className=\"text-foreground truncate max-w-[150px] lg:max-w-[250px]\">{crumb.label}</span>\r\n                      )}\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            ) : (\r\n              <div className=\"flex items-center\">\r\n                {navItems.map((item, index) => (\r\n                  <div key={item.to} className=\"flex items-center\">\r\n                    <NavLink\r\n                      to={item.to}\r\n                      className=\"text-xs lg:text-sm font-medium text-muted-foreground hover:text-primary transition-colors px-2 lg:px-3 py-1 whitespace-nowrap\"\r\n                      activeClassName=\"text-primary\"\r\n                    >\r\n                      {item.label}\r\n                    </NavLink>\r\n                    {index < navItems.length - 1 && <span className=\"text-border\">|</span>}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n\r\n            {/* Right side: optional content + Favourites */}\r\n            <div className=\"flex items-center gap-2 lg:gap-3\">\r\n              {rightContent}\r\n              <NavLink\r\n                to=\"/favourites\"\r\n                className=\"text-xs lg:text-sm font-medium text-muted-foreground hover:text-primary transition-colors px-2 lg:px-3 py-1 flex items-center gap-1 lg:gap-1.5 whitespace-nowrap\"\r\n                activeClassName=\"text-primary\"\r\n              >\r\n                <Heart className=\"h-4 w-4\" />\r\n                FAVOURITES\r\n                {favouritesCount > 0 && (\r\n                  <span className=\"bg-primary text-primary-foreground text-xs px-1.5 py-0.5 rounded-full\">\r\n                    {favouritesCount}\r\n                  </span>\r\n                )}\r\n              </NavLink>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AAEA;AAAA;AACA;AACA;AANA;;;;;;AASA,MAAM,WAAW;IACf;QAAE,OAAO;QAAQ,IAAI;IAAI;IACzB;QAAE,OAAO;QAAc,IAAI;IAAc;CAC1C;AAaM,SAAS,OAAO,EAAE,WAAW,EAAE,YAAY,EAAE,gBAAgB,EAAe;IACjF,MAAM,EAAE,OAAO,eAAe,EAAE,GAAG,IAAA,kKAAa;IAEhD,MAAM,kBAAkB,eAAe,YAAY,MAAM,GAAG;IAC5D,MAAM,gBAAgB,CAAC,CAAC;IAExB,qBACE,kQAAC;QAAI,WAAU;kBACb,cAAA,kQAAC;YAAI,WAAU;sBACb,cAAA,kQAAC;gBAAI,WAAU;0BACb,cAAA,kQAAC;oBAAI,WAAU;;wBACZ,8BACC,kQAAC;4BAAI,WAAU;sCACZ;;;;;mCAED,gCACF,kQAAC;4BAAI,WAAU;sCACZ,YAAY,GAAG,CAAC,CAAC,OAAO;gCACvB,MAAM,UAAU,UAAU;gCAC1B,MAAM,SAAS,UAAU,YAAY,MAAM,GAAG;gCAC9C,MAAM,eAAe,UAAU,YAAY,MAAM,GAAG;gCACpD,MAAM,aAAa,YAAY,MAAM;gCAErC,MAAM,eAAe,CAAC,WAAW,CAAC,UAAU,CAAC;gCAC7C,MAAM,qBAAqB,gBAAgB,aAAa;gCACxD,MAAM,eAAe,gBAAgB,aAAa;gCAElD,qBACE,kQAAC;oCAEC,WAAW,CAAC,2CAA2C,EAAE,qBAAqB,mBAAmB,IAAI;;wCAEpG,QAAQ,mBACP,kQAAC,0PAAY;4CACX,WAAW,CAAC,oCAAoC,EAAE,qBAAqB,oBAAoB,IAAI;;;;;;wCAGlG,8BACC,kQAAC;4CAAK,WAAU;;8DACd,kQAAC;8DAAK;;;;;;8DACN,kQAAC,0PAAY;oDAAC,WAAU;;;;;;;;;;;;wCAG3B,MAAM,EAAE,iBACP,kQAAC,2LAAI;4CACH,MAAM,MAAM,EAAE;4CACd,WAAU;sDAET,MAAM,KAAK;;;;;iEAGd,kQAAC;4CAAK,WAAU;sDAA2D,MAAM,KAAK;;;;;;;mCAtBnF;;;;;4BA0BX;;;;;iDAGF,kQAAC;4BAAI,WAAU;sCACZ,SAAS,GAAG,CAAC,CAAC,MAAM,sBACnB,kQAAC;oCAAkB,WAAU;;sDAC3B,kQAAC,4JAAO;4CACN,IAAI,KAAK,EAAE;4CACX,WAAU;4CACV,iBAAgB;sDAEf,KAAK,KAAK;;;;;;wCAEZ,QAAQ,SAAS,MAAM,GAAG,mBAAK,kQAAC;4CAAK,WAAU;sDAAc;;;;;;;mCARtD,KAAK,EAAE;;;;;;;;;;sCAevB,kQAAC;4BAAI,WAAU;;gCACZ;8CACD,kQAAC,4JAAO;oCACN,IAAG;oCACH,WAAU;oCACV,iBAAgB;;sDAEhB,kQAAC,iOAAK;4CAAC,WAAU;;;;;;wCAAY;wCAE5B,kBAAkB,mBACjB,kQAAC;4CAAK,WAAU;sDACb;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUrB","debugId":null}},
    {"offset": {"line": 2932, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/hooks/useAds.ts"],"sourcesContent":["'use client';\n\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { supabase } from '@/integrations/supabase/client';\r\n\r\nexport interface Ad {\r\n  id: string;\r\n  name: string;\r\n  position: 'sponsor-logo' | 'featured';\r\n  image_url: string;\r\n  link_url: string | null;\r\n  alt_text: string | null;\r\n  is_active: boolean;\r\n  start_date: string | null;\r\n  end_date: string | null;\r\n  target_category_ids: string[];\r\n  target_countries: string[];\r\n  target_pages: string[];\r\n  rotation_interval: number | null;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport const useAds = () => {\r\n  return useQuery({\r\n    queryKey: ['ads'],\r\n    queryFn: async () => {\r\n      const { data, error } = await supabase\r\n        .from('ads')\r\n        .select('*')\r\n        .order('created_at', { ascending: false });\r\n      \r\n      if (error) throw error;\r\n      return data as Ad[];\r\n    },\r\n  });\r\n};\r\n\r\nexport const useActiveAdsByPosition = (\r\n  position: string, \r\n  categoryId?: string | null, \r\n  country?: string | null\r\n) => {\r\n  return useQuery({\r\n    queryKey: ['active-ads', position, categoryId, country],\r\n    queryFn: async () => {\r\n      const now = new Date().toISOString();\r\n      \r\n      // Build query with targeting priority\r\n      let query = supabase\r\n        .from('ads')\r\n        .select('*')\r\n        .eq('position', position)\r\n        .eq('is_active', true)\r\n        .or(`start_date.is.null,start_date.lte.${now}`)\r\n        .or(`end_date.is.null,end_date.gte.${now}`);\r\n      \r\n      const { data, error } = await query;\r\n      if (error) throw error;\r\n      \r\n      const ads = data as Ad[];\r\n      \r\n      // Helper functions\r\n      const hasTargetCategories = (ad: Ad) => ad.target_category_ids && ad.target_category_ids.length > 0;\r\n      const hasTargetCountries = (ad: Ad) => ad.target_countries && ad.target_countries.length > 0;\r\n      const categoryMatches = (ad: Ad) => categoryId && ad.target_category_ids?.includes(categoryId);\r\n      const countryMatches = (ad: Ad) => country && ad.target_countries?.includes(country);\r\n      \r\n      // Prioritize: exact match > category only > country only > site-wide\r\n      const exactMatch = ads.find(ad => \r\n        categoryMatches(ad) && countryMatches(ad)\r\n      );\r\n      if (exactMatch) return exactMatch;\r\n      \r\n      const categoryMatch = ads.find(ad => \r\n        categoryMatches(ad) && !hasTargetCountries(ad)\r\n      );\r\n      if (categoryMatch) return categoryMatch;\r\n      \r\n      const countryMatch = ads.find(ad => \r\n        !hasTargetCategories(ad) && countryMatches(ad)\r\n      );\r\n      if (countryMatch) return countryMatch;\r\n      \r\n      // Fall back to site-wide ad\r\n      return ads.find(ad => !hasTargetCategories(ad) && !hasTargetCountries(ad));\r\n    },\r\n  });\r\n};\r\n\r\n// New hook for rotating banners - fetches ALL active ads for a position with targeting\r\nexport const useRotatingAds = (\r\n  position: string,\r\n  categoryId?: string | null,\r\n  country?: string | null\r\n) => {\r\n  return useQuery({\r\n    queryKey: ['rotating-ads', position, categoryId, country],\r\n    queryFn: async () => {\r\n      const now = new Date().toISOString();\r\n      \r\n      const { data, error } = await supabase\r\n        .from('ads')\r\n        .select('*')\r\n        .eq('position', position)\r\n        .eq('is_active', true)\r\n        .or(`start_date.is.null,start_date.lte.${now}`)\r\n        .or(`end_date.is.null,end_date.gte.${now}`)\r\n        .order('created_at', { ascending: false });\r\n      \r\n      if (error) throw error;\r\n      \r\n      const ads = data as Ad[];\r\n      \r\n      // Filter ads by targeting with AND logic:\r\n      // - If ad has both categories AND countries: at least one category must match AND country must match\r\n      // - If ad has only categories: at least one category must match (any country)\r\n      // - If ad has only countries: country must match (any category)\r\n      // - If ad has neither: site-wide (always show)\r\n      return ads.filter(ad => {\r\n        const hasCategories = ad.target_category_ids && ad.target_category_ids.length > 0;\r\n        const hasTargetCountries = ad.target_countries && ad.target_countries.length > 0;\r\n        const categoryMatches = categoryId && ad.target_category_ids?.includes(categoryId);\r\n        const countryMatches = country && ad.target_countries?.includes(country);\r\n\r\n        // Site-wide ad (no targeting)\r\n        if (!hasCategories && !hasTargetCountries) return true;\r\n        \r\n        // Both categories and country specified: both must match\r\n        if (hasCategories && hasTargetCountries) {\r\n          return categoryMatches && countryMatches;\r\n        }\r\n        \r\n        // Only categories specified\r\n        if (hasCategories && !hasTargetCountries) {\r\n          return categoryMatches;\r\n        }\r\n        \r\n        // Only countries specified\r\n        if (!hasCategories && hasTargetCountries) {\r\n          return countryMatches;\r\n        }\r\n        \r\n        return false;\r\n      });\r\n    },\r\n  });\r\n};\r\n\r\n// New hook for featured ads with category, page, parent category priority and country filtering\r\nexport const useFeaturedAds = (categoryId?: string, pageId?: string, parentCategoryId?: string, country?: string) => {\r\n  return useQuery({\r\n    queryKey: ['featured-ads', categoryId, pageId, parentCategoryId, country],\r\n    queryFn: async () => {\r\n      const now = new Date().toISOString();\r\n      \r\n      // Fetch all featured ads\r\n      const { data, error } = await supabase\r\n        .from('ads')\r\n        .select('*')\r\n        .eq('position', 'featured')\r\n        .eq('is_active', true)\r\n        .or(`start_date.is.null,start_date.lte.${now}`)\r\n        .or(`end_date.is.null,end_date.gte.${now}`);\r\n      \r\n      if (error) throw error;\r\n      \r\n      const ads = data as Ad[];\r\n      \r\n      // Filter by country if ad has country targeting\r\n      const filterByCountry = (adsToFilter: Ad[]) => {\r\n        return adsToFilter.filter(ad => {\r\n          // If ad has no country targeting, it shows everywhere\r\n          if (!ad.target_countries || ad.target_countries.length === 0) return true;\r\n          // If ad has country targeting, only show if current country matches\r\n          return country && ad.target_countries.includes(country);\r\n        });\r\n      };\r\n      \r\n      // Site-wide ads (no category, no page targeting)\r\n      const siteWideAds = ads.filter(ad => \r\n        (!ad.target_category_ids || ad.target_category_ids.length === 0) &&\r\n        (!ad.target_pages || ad.target_pages.length === 0)\r\n      );\r\n      \r\n      // Page-specific ads\r\n      const pageAds = pageId \r\n        ? ads.filter(ad => ad.target_pages?.includes(pageId))\r\n        : [];\r\n      \r\n      // Exact match ads: category AND country both specified and matching\r\n      const exactMatchAds = categoryId && country\r\n        ? ads.filter(ad => \r\n            ad.target_category_ids?.includes(categoryId) && \r\n            ad.target_countries?.includes(country)\r\n          )\r\n        : [];\r\n      \r\n      // Category-only ads: category matches but NO country targeting\r\n      const categoryOnlyAds = categoryId \r\n        ? ads.filter(ad => \r\n            ad.target_category_ids?.includes(categoryId) &&\r\n            (!ad.target_countries || ad.target_countries.length === 0)\r\n          )\r\n        : [];\r\n      \r\n      // Child category ads (for parent pages) - fetch child category IDs\r\n      let childCategoryAds: Ad[] = [];\r\n      if (parentCategoryId) {\r\n        const { data: childCategories } = await supabase\r\n          .from('categories')\r\n          .select('id')\r\n          .eq('parent_id', parentCategoryId);\r\n        \r\n        const childIds = childCategories?.map(c => c.id) || [];\r\n        childCategoryAds = ads.filter(ad => \r\n          ad.target_category_ids?.some(catId => childIds.includes(catId))\r\n        );\r\n      }\r\n      \r\n      // Apply country filter to page, child, and site-wide ads\r\n      return {\r\n        exactMatchAds,  // Already filtered by category + country\r\n        categoryOnlyAds, // No country targeting, so no filter needed\r\n        pageAds: filterByCountry(pageAds),\r\n        childCategoryAds: filterByCountry(childCategoryAds),\r\n        siteWideAds: filterByCountry(siteWideAds),\r\n      };\r\n    },\r\n  });\r\n};\r\n\r\nexport const useCreateAd = () => {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async (ad: Omit<Ad, 'id' | 'created_at' | 'updated_at'>) => {\r\n      const { data, error } = await supabase\r\n        .from('ads')\r\n        .insert(ad)\r\n        .select()\r\n        .single();\r\n      \r\n      if (error) throw error;\r\n      return data;\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['ads'] });\r\n    },\r\n  });\r\n};\r\n\r\nexport const useUpdateAd = () => {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async ({ id, ...ad }: Partial<Ad> & { id: string }) => {\r\n      const { data, error } = await supabase\r\n        .from('ads')\r\n        .update(ad)\r\n        .eq('id', id)\r\n        .select()\r\n        .single();\r\n      \r\n      if (error) throw error;\r\n      return data;\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['ads'] });\r\n      queryClient.invalidateQueries({ queryKey: ['active-ads'] });\r\n      queryClient.invalidateQueries({ queryKey: ['rotating-ads'] });\r\n      queryClient.invalidateQueries({ queryKey: ['featured-ads'] });\r\n    },\r\n  });\r\n};\r\n\r\nexport const useDeleteAd = () => {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async (id: string) => {\r\n      const { error } = await supabase\r\n        .from('ads')\r\n        .delete()\r\n        .eq('id', id);\r\n      \r\n      if (error) throw error;\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['ads'] });\r\n      queryClient.invalidateQueries({ queryKey: ['active-ads'] });\r\n      queryClient.invalidateQueries({ queryKey: ['rotating-ads'] });\r\n      queryClient.invalidateQueries({ queryKey: ['featured-ads'] });\r\n    },\r\n  });\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAEA;AAAA;AAAA;AACA;AAHA;;;AAuBO,MAAM,SAAS;IACpB,OAAO,IAAA,2MAAQ,EAAC;QACd,UAAU;YAAC;SAAM;QACjB,SAAS;YACP,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,yKAAQ,CACnC,IAAI,CAAC,OACL,MAAM,CAAC,KACP,KAAK,CAAC,cAAc;gBAAE,WAAW;YAAM;YAE1C,IAAI,OAAO,MAAM;YACjB,OAAO;QACT;IACF;AACF;AAEO,MAAM,yBAAyB,CACpC,UACA,YACA;IAEA,OAAO,IAAA,2MAAQ,EAAC;QACd,UAAU;YAAC;YAAc;YAAU;YAAY;SAAQ;QACvD,SAAS;YACP,MAAM,MAAM,IAAI,OAAO,WAAW;YAElC,sCAAsC;YACtC,IAAI,QAAQ,yKAAQ,CACjB,IAAI,CAAC,OACL,MAAM,CAAC,KACP,EAAE,CAAC,YAAY,UACf,EAAE,CAAC,aAAa,MAChB,EAAE,CAAC,CAAC,kCAAkC,EAAE,KAAK,EAC7C,EAAE,CAAC,CAAC,8BAA8B,EAAE,KAAK;YAE5C,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM;YAC9B,IAAI,OAAO,MAAM;YAEjB,MAAM,MAAM;YAEZ,mBAAmB;YACnB,MAAM,sBAAsB,CAAC,KAAW,GAAG,mBAAmB,IAAI,GAAG,mBAAmB,CAAC,MAAM,GAAG;YAClG,MAAM,qBAAqB,CAAC,KAAW,GAAG,gBAAgB,IAAI,GAAG,gBAAgB,CAAC,MAAM,GAAG;YAC3F,MAAM,kBAAkB,CAAC,KAAW,cAAc,GAAG,mBAAmB,EAAE,SAAS;YACnF,MAAM,iBAAiB,CAAC,KAAW,WAAW,GAAG,gBAAgB,EAAE,SAAS;YAE5E,qEAAqE;YACrE,MAAM,aAAa,IAAI,IAAI,CAAC,CAAA,KAC1B,gBAAgB,OAAO,eAAe;YAExC,IAAI,YAAY,OAAO;YAEvB,MAAM,gBAAgB,IAAI,IAAI,CAAC,CAAA,KAC7B,gBAAgB,OAAO,CAAC,mBAAmB;YAE7C,IAAI,eAAe,OAAO;YAE1B,MAAM,eAAe,IAAI,IAAI,CAAC,CAAA,KAC5B,CAAC,oBAAoB,OAAO,eAAe;YAE7C,IAAI,cAAc,OAAO;YAEzB,4BAA4B;YAC5B,OAAO,IAAI,IAAI,CAAC,CAAA,KAAM,CAAC,oBAAoB,OAAO,CAAC,mBAAmB;QACxE;IACF;AACF;AAGO,MAAM,iBAAiB,CAC5B,UACA,YACA;IAEA,OAAO,IAAA,2MAAQ,EAAC;QACd,UAAU;YAAC;YAAgB;YAAU;YAAY;SAAQ;QACzD,SAAS;YACP,MAAM,MAAM,IAAI,OAAO,WAAW;YAElC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,yKAAQ,CACnC,IAAI,CAAC,OACL,MAAM,CAAC,KACP,EAAE,CAAC,YAAY,UACf,EAAE,CAAC,aAAa,MAChB,EAAE,CAAC,CAAC,kCAAkC,EAAE,KAAK,EAC7C,EAAE,CAAC,CAAC,8BAA8B,EAAE,KAAK,EACzC,KAAK,CAAC,cAAc;gBAAE,WAAW;YAAM;YAE1C,IAAI,OAAO,MAAM;YAEjB,MAAM,MAAM;YAEZ,0CAA0C;YAC1C,qGAAqG;YACrG,8EAA8E;YAC9E,gEAAgE;YAChE,+CAA+C;YAC/C,OAAO,IAAI,MAAM,CAAC,CAAA;gBAChB,MAAM,gBAAgB,GAAG,mBAAmB,IAAI,GAAG,mBAAmB,CAAC,MAAM,GAAG;gBAChF,MAAM,qBAAqB,GAAG,gBAAgB,IAAI,GAAG,gBAAgB,CAAC,MAAM,GAAG;gBAC/E,MAAM,kBAAkB,cAAc,GAAG,mBAAmB,EAAE,SAAS;gBACvE,MAAM,iBAAiB,WAAW,GAAG,gBAAgB,EAAE,SAAS;gBAEhE,8BAA8B;gBAC9B,IAAI,CAAC,iBAAiB,CAAC,oBAAoB,OAAO;gBAElD,yDAAyD;gBACzD,IAAI,iBAAiB,oBAAoB;oBACvC,OAAO,mBAAmB;gBAC5B;gBAEA,4BAA4B;gBAC5B,IAAI,iBAAiB,CAAC,oBAAoB;oBACxC,OAAO;gBACT;gBAEA,2BAA2B;gBAC3B,IAAI,CAAC,iBAAiB,oBAAoB;oBACxC,OAAO;gBACT;gBAEA,OAAO;YACT;QACF;IACF;AACF;AAGO,MAAM,iBAAiB,CAAC,YAAqB,QAAiB,kBAA2B;IAC9F,OAAO,IAAA,2MAAQ,EAAC;QACd,UAAU;YAAC;YAAgB;YAAY;YAAQ;YAAkB;SAAQ;QACzE,SAAS;YACP,MAAM,MAAM,IAAI,OAAO,WAAW;YAElC,yBAAyB;YACzB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,yKAAQ,CACnC,IAAI,CAAC,OACL,MAAM,CAAC,KACP,EAAE,CAAC,YAAY,YACf,EAAE,CAAC,aAAa,MAChB,EAAE,CAAC,CAAC,kCAAkC,EAAE,KAAK,EAC7C,EAAE,CAAC,CAAC,8BAA8B,EAAE,KAAK;YAE5C,IAAI,OAAO,MAAM;YAEjB,MAAM,MAAM;YAEZ,gDAAgD;YAChD,MAAM,kBAAkB,CAAC;gBACvB,OAAO,YAAY,MAAM,CAAC,CAAA;oBACxB,sDAAsD;oBACtD,IAAI,CAAC,GAAG,gBAAgB,IAAI,GAAG,gBAAgB,CAAC,MAAM,KAAK,GAAG,OAAO;oBACrE,oEAAoE;oBACpE,OAAO,WAAW,GAAG,gBAAgB,CAAC,QAAQ,CAAC;gBACjD;YACF;YAEA,iDAAiD;YACjD,MAAM,cAAc,IAAI,MAAM,CAAC,CAAA,KAC7B,CAAC,CAAC,GAAG,mBAAmB,IAAI,GAAG,mBAAmB,CAAC,MAAM,KAAK,CAAC,KAC/D,CAAC,CAAC,GAAG,YAAY,IAAI,GAAG,YAAY,CAAC,MAAM,KAAK,CAAC;YAGnD,oBAAoB;YACpB,MAAM,UAAU,SACZ,IAAI,MAAM,CAAC,CAAA,KAAM,GAAG,YAAY,EAAE,SAAS,WAC3C,EAAE;YAEN,oEAAoE;YACpE,MAAM,gBAAgB,cAAc,UAChC,IAAI,MAAM,CAAC,CAAA,KACT,GAAG,mBAAmB,EAAE,SAAS,eACjC,GAAG,gBAAgB,EAAE,SAAS,YAEhC,EAAE;YAEN,+DAA+D;YAC/D,MAAM,kBAAkB,aACpB,IAAI,MAAM,CAAC,CAAA,KACT,GAAG,mBAAmB,EAAE,SAAS,eACjC,CAAC,CAAC,GAAG,gBAAgB,IAAI,GAAG,gBAAgB,CAAC,MAAM,KAAK,CAAC,KAE3D,EAAE;YAEN,mEAAmE;YACnE,IAAI,mBAAyB,EAAE;YAC/B,IAAI,kBAAkB;gBACpB,MAAM,EAAE,MAAM,eAAe,EAAE,GAAG,MAAM,yKAAQ,CAC7C,IAAI,CAAC,cACL,MAAM,CAAC,MACP,EAAE,CAAC,aAAa;gBAEnB,MAAM,WAAW,iBAAiB,IAAI,CAAA,IAAK,EAAE,EAAE,KAAK,EAAE;gBACtD,mBAAmB,IAAI,MAAM,CAAC,CAAA,KAC5B,GAAG,mBAAmB,EAAE,KAAK,CAAA,QAAS,SAAS,QAAQ,CAAC;YAE5D;YAEA,yDAAyD;YACzD,OAAO;gBACL;gBACA;gBACA,SAAS,gBAAgB;gBACzB,kBAAkB,gBAAgB;gBAClC,aAAa,gBAAgB;YAC/B;QACF;IACF;AACF;AAEO,MAAM,cAAc;IACzB,MAAM,cAAc,IAAA,4NAAc;IAElC,OAAO,IAAA,iNAAW,EAAC;QACjB,YAAY,OAAO;YACjB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,yKAAQ,CACnC,IAAI,CAAC,OACL,MAAM,CAAC,IACP,MAAM,GACN,MAAM;YAET,IAAI,OAAO,MAAM;YACjB,OAAO;QACT;QACA,WAAW;YACT,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAM;YAAC;QACpD;IACF;AACF;AAEO,MAAM,cAAc;IACzB,MAAM,cAAc,IAAA,4NAAc;IAElC,OAAO,IAAA,iNAAW,EAAC;QACjB,YAAY,OAAO,EAAE,EAAE,EAAE,GAAG,IAAkC;YAC5D,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,yKAAQ,CACnC,IAAI,CAAC,OACL,MAAM,CAAC,IACP,EAAE,CAAC,MAAM,IACT,MAAM,GACN,MAAM;YAET,IAAI,OAAO,MAAM;YACjB,OAAO;QACT;QACA,WAAW;YACT,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAM;YAAC;YAClD,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAa;YAAC;YACzD,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAe;YAAC;YAC3D,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAe;YAAC;QAC7D;IACF;AACF;AAEO,MAAM,cAAc;IACzB,MAAM,cAAc,IAAA,4NAAc;IAElC,OAAO,IAAA,iNAAW,EAAC;QACjB,YAAY,OAAO;YACjB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,yKAAQ,CAC7B,IAAI,CAAC,OACL,MAAM,GACN,EAAE,CAAC,MAAM;YAEZ,IAAI,OAAO,MAAM;QACnB;QACA,WAAW;YACT,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAM;YAAC;YAClD,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAa;YAAC;YACzD,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAe;YAAC;YAC3D,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAe;YAAC;QAC7D;IACF;AACF","debugId":null}},
    {"offset": {"line": 3179, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/Header.tsx"],"sourcesContent":["'use client';\n\nimport { TopBar } from './header/TopBar';\nimport { NavBar, BreadcrumbItem } from './header/NavBar';\nimport { useActiveAdsByPosition } from '@/hooks/useAds';\nimport { ReactNode } from 'react';\n\ninterface HeaderProps {\n  breadcrumbs?: BreadcrumbItem[];\n  rightContent?: ReactNode;\n  customNavContent?: ReactNode;\n}\n\nexport function Header({ breadcrumbs, rightContent, customNavContent }: HeaderProps) {\n  const { data: sponsorAd } = useActiveAdsByPosition(\"sponsor-logo\");\n\n  return (\n    <header className=\"sticky top-0 z-50 w-full bg-background/95 backdrop-blur-sm border-b border-border\">\n      <TopBar sponsorAd={sponsorAd || null} />\n      <NavBar breadcrumbs={breadcrumbs} rightContent={rightContent} customNavContent={customNavContent} />\n    </header>\n  );\n}\n\nexport type { BreadcrumbItem };"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAaO,SAAS,OAAO,EAAE,WAAW,EAAE,YAAY,EAAE,gBAAgB,EAAe;IACjF,MAAM,EAAE,MAAM,SAAS,EAAE,GAAG,IAAA,oKAAsB,EAAC;IAEnD,qBACE,kQAAC;QAAO,WAAU;;0BAChB,kQAAC,oKAAM;gBAAC,WAAW,aAAa;;;;;;0BAChC,kQAAC,oKAAM;gBAAC,aAAa;gBAAa,cAAc;gBAAc,kBAAkB;;;;;;;;;;;;AAGtF","debugId":null}},
    {"offset": {"line": 3224, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/Footer.tsx"],"sourcesContent":["import Link from 'next/link';\n\nconst categories = [\n  { name: \"Live Event Services\", slug: \"/live-event-services\" },\n  { name: \"The Business\", slug: \"/the-business\" },\n  { name: \"Venues\", slug: \"/venues\" },\n  { name: \"Equipment\", slug: \"/equipment\" },\n  { name: \"Studios\", slug: \"/studios\" },\n  { name: \"UK Recording Services\", slug: \"/uk-recording-services\" },\n];\n\nconst quickLinks = [\n  { name: \"Home\", slug: \"/\" },\n  { name: \"Categories\", slug: \"/categories\" },\n  { name: \"About Us\", slug: \"/about\" },\n  { name: \"Promote\", slug: \"/promote\" },\n  { name: \"Get Listed\", slug: \"/get-listed\" },\n  { name: \"Contact\", slug: \"/contact\" },\n];\n\nexport function Footer() {\n  return (\n    <footer className=\"bg-card mt-auto\">\n      {/* Gradient accent line at top */}\n      <div className=\"h-px gradient-brand\" />\n      {/* Main Footer */}\n      <div className=\"container pt-8 pb-5\">\n        {/* Desktop: 3 columns in one row (xl and up) */}\n        <div className=\"hidden xl:grid xl:grid-cols-3 gap-6\">\n          {/* Categories */}\n          <div>\n            <h3 className=\"font-semibold mb-2 text-foreground text-sm\">Categories</h3>\n            <ul className=\"space-y-1 text-xs text-muted-foreground\">\n              {categories.map((category) => (\n                <li key={category.slug}>\n                  <Link href={category.slug} className=\"hover:text-primary transition-colors\">\n                    {category.name}\n                  </Link>\n                </li>\n              ))}\n            </ul>\n          </div>\n\n          {/* Quick Links */}\n          <div>\n            <h3 className=\"font-semibold mb-2 text-foreground text-sm\">Quick Links</h3>\n            <ul className=\"space-y-1 text-xs text-muted-foreground\">\n              {quickLinks.map((link) => (\n                <li key={link.slug}>\n                  <Link href={link.slug} className=\"hover:text-primary transition-colors\">\n                    {link.name}\n                  </Link>\n                </li>\n              ))}\n            </ul>\n          </div>\n\n          {/* Contact */}\n          <div>\n            <h3 className=\"font-semibold mb-2 text-foreground text-sm\">Contact</h3>\n            <ul className=\"space-y-1 text-xs text-muted-foreground\">\n              <li>info@entourage-pro.com</li>\n              <li>United Kingdom</li>\n            </ul>\n          </div>\n        </div>\n\n        {/* Tablet/Mobile: 3 columns (below xl) */}\n        <div className=\"xl:hidden\">\n          <div className=\"grid grid-cols-3 gap-4\">\n            {/* Categories */}\n            <div>\n              <h3 className=\"font-semibold mb-1.5 text-foreground text-xs sm:text-sm\">Categories</h3>\n              <ul className=\"space-y-1 text-xs text-muted-foreground\">\n                {categories.map((category) => (\n                  <li key={category.slug}>\n                    <Link href={category.slug} className=\"hover:text-primary transition-colors\">\n                      {category.name}\n                    </Link>\n                  </li>\n                ))}\n              </ul>\n            </div>\n\n            {/* Quick Links */}\n            <div>\n              <h3 className=\"font-semibold mb-1.5 text-foreground text-xs sm:text-sm\">Quick Links</h3>\n              <ul className=\"space-y-1 text-xs text-muted-foreground\">\n                {quickLinks.map((link) => (\n                  <li key={link.slug}>\n                    <Link href={link.slug} className=\"hover:text-primary transition-colors\">\n                      {link.name}\n                    </Link>\n                  </li>\n                ))}\n              </ul>\n            </div>\n\n            {/* Contact */}\n            <div>\n              <h3 className=\"font-semibold mb-1.5 text-foreground text-xs sm:text-sm\">Contact</h3>\n              <ul className=\"space-y-1 text-xs text-muted-foreground\">\n                <li>info@entourage-pro.com</li>\n                <li>United Kingdom</li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n      {/* Copyright Bar */}\n      <div className=\"border-t border-border bg-background/50\">\n        <div className=\"container py-3\">\n          <p className=\"text-xs text-muted-foreground mb-1\">\n             2025 Showcase Music. All rights reserved.\n          </p>\n          <p className=\"text-[10px] text-muted-foreground/50 max-w-5xl leading-relaxed\">\n            No part of this website may be reproduced in any material form, by any means, whether graphic, electronic, mechanical or other, including information storage and retrieval systems, without the written permission of the publisher and where necessary any relevant other copyright owner. This website in whole or in part may not be used to prepare or compile other directories or mailing lists without written permission from the publisher. Measures have been adopted during preparation of this publication which will assist the publisher to protect its copyright. Any unauthorised use of this data will result in immediate legal proceedings. The greatest care has been taken to ensure accuracy but the publisher can accept no responsibility for errors or omissions nor for any liability occasioned by relying on its content.\n          </p>\n        </div>\n      </div>\n    </footer>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;;AAEA,MAAM,aAAa;IACjB;QAAE,MAAM;QAAuB,MAAM;IAAuB;IAC5D;QAAE,MAAM;QAAgB,MAAM;IAAgB;IAC9C;QAAE,MAAM;QAAU,MAAM;IAAU;IAClC;QAAE,MAAM;QAAa,MAAM;IAAa;IACxC;QAAE,MAAM;QAAW,MAAM;IAAW;IACpC;QAAE,MAAM;QAAyB,MAAM;IAAyB;CACjE;AAED,MAAM,aAAa;IACjB;QAAE,MAAM;QAAQ,MAAM;IAAI;IAC1B;QAAE,MAAM;QAAc,MAAM;IAAc;IAC1C;QAAE,MAAM;QAAY,MAAM;IAAS;IACnC;QAAE,MAAM;QAAW,MAAM;IAAW;IACpC;QAAE,MAAM;QAAc,MAAM;IAAc;IAC1C;QAAE,MAAM;QAAW,MAAM;IAAW;CACrC;AAEM,SAAS;IACd,qBACE,kQAAC;QAAO,WAAU;;0BAEhB,kQAAC;gBAAI,WAAU;;;;;;0BAEf,kQAAC;gBAAI,WAAU;;kCAEb,kQAAC;wBAAI,WAAU;;0CAEb,kQAAC;;kDACC,kQAAC;wCAAG,WAAU;kDAA6C;;;;;;kDAC3D,kQAAC;wCAAG,WAAU;kDACX,WAAW,GAAG,CAAC,CAAC,yBACf,kQAAC;0DACC,cAAA,kQAAC,2LAAI;oDAAC,MAAM,SAAS,IAAI;oDAAE,WAAU;8DAClC,SAAS,IAAI;;;;;;+CAFT,SAAS,IAAI;;;;;;;;;;;;;;;;0CAU5B,kQAAC;;kDACC,kQAAC;wCAAG,WAAU;kDAA6C;;;;;;kDAC3D,kQAAC;wCAAG,WAAU;kDACX,WAAW,GAAG,CAAC,CAAC,qBACf,kQAAC;0DACC,cAAA,kQAAC,2LAAI;oDAAC,MAAM,KAAK,IAAI;oDAAE,WAAU;8DAC9B,KAAK,IAAI;;;;;;+CAFL,KAAK,IAAI;;;;;;;;;;;;;;;;0CAUxB,kQAAC;;kDACC,kQAAC;wCAAG,WAAU;kDAA6C;;;;;;kDAC3D,kQAAC;wCAAG,WAAU;;0DACZ,kQAAC;0DAAG;;;;;;0DACJ,kQAAC;0DAAG;;;;;;;;;;;;;;;;;;;;;;;;kCAMV,kQAAC;wBAAI,WAAU;kCACb,cAAA,kQAAC;4BAAI,WAAU;;8CAEb,kQAAC;;sDACC,kQAAC;4CAAG,WAAU;sDAA0D;;;;;;sDACxE,kQAAC;4CAAG,WAAU;sDACX,WAAW,GAAG,CAAC,CAAC,yBACf,kQAAC;8DACC,cAAA,kQAAC,2LAAI;wDAAC,MAAM,SAAS,IAAI;wDAAE,WAAU;kEAClC,SAAS,IAAI;;;;;;mDAFT,SAAS,IAAI;;;;;;;;;;;;;;;;8CAU5B,kQAAC;;sDACC,kQAAC;4CAAG,WAAU;sDAA0D;;;;;;sDACxE,kQAAC;4CAAG,WAAU;sDACX,WAAW,GAAG,CAAC,CAAC,qBACf,kQAAC;8DACC,cAAA,kQAAC,2LAAI;wDAAC,MAAM,KAAK,IAAI;wDAAE,WAAU;kEAC9B,KAAK,IAAI;;;;;;mDAFL,KAAK,IAAI;;;;;;;;;;;;;;;;8CAUxB,kQAAC;;sDACC,kQAAC;4CAAG,WAAU;sDAA0D;;;;;;sDACxE,kQAAC;4CAAG,WAAU;;8DACZ,kQAAC;8DAAG;;;;;;8DACJ,kQAAC;8DAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAOd,kQAAC;gBAAI,WAAU;0BACb,cAAA,kQAAC;oBAAI,WAAU;;sCACb,kQAAC;4BAAE,WAAU;sCAAqC;;;;;;sCAGlD,kQAAC;4BAAE,WAAU;sCAAiE;;;;;;;;;;;;;;;;;;;;;;;AAOxF","debugId":null}},
    {"offset": {"line": 3602, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/hooks/useAnalytics.ts"],"sourcesContent":["'use client';\n\nimport { usePathname, useSearchParams } from 'next/navigation';\nimport { useQuery } from '@tanstack/react-query';\nimport { supabase } from '@/integrations/supabase/client';\nimport { useEffect, useRef } from 'react';\n\nconst SUPABASE_URL = process.env.NEXT_PUBLIC_SUPABASE_URL;\n\n// Helper to track events directly to database\nasync function trackEvent(eventType: string, data: Record<string, unknown>) {\n  try {\n    // Map event types to their respective tables\n    const tableMap: Record<string, string> = {\n      'page_view': 'page_views',\n      'category_view': 'category_page_views',\n      'ad_view': 'ad_views',\n      'ad_click': 'ad_clicks',\n      'listing_view': 'listing_views',\n      'link_click': 'listing_link_clicks',\n    };\n\n    const tableName = tableMap[eventType];\n    if (!tableName) {\n      console.warn(`Unknown event type: ${eventType}`);\n      return;\n    }\n\n    console.log('Attempting to insert:', { tableName, data });\n    const { data: result, error } = await supabase.from(tableName).insert(data);\n    \n    if (error) {\n      console.error(`Failed to track ${eventType}:`, {\n        message: error.message,\n        code: error.code,\n        details: error.details,\n        hint: error.hint,\n        tableName: tableName,\n        eventType: eventType\n      });\n    } else {\n      console.log('Successfully tracked:', eventType);\n    }\n  } catch (error) {\n    console.error(`Failed to track ${eventType}:`, {\n      message: error instanceof Error ? error.message : String(error),\n      stack: error instanceof Error ? error.stack : undefined,\n      eventType: eventType\n    });\n  }\n}\n\n// Track page view\nexport const usePageViewTracking = () => {\n  const pathname = usePathname();\n  const trackedRef = useRef<string | null>(null);\n\n  useEffect(() => {\n    // Don't track admin pages or dashboard-login\n    if (pathname.startsWith('/admin') || pathname.startsWith('/dashboard-login')) {\n      return;\n    }\n\n    // Only track once per page\n    if (trackedRef.current === pathname) {\n      return;\n    }\n\n    trackedRef.current = pathname;\n\n    trackEvent('page_view', {\n      page_url: pathname,\n      referrer: document.referrer || null,\n      user_agent: navigator.userAgent,\n    });\n  }, [pathname]);\n};\n\n// Track category page views\nexport const useCategoryViewTracking = (categoryId: string | null, categoryName: string | null) => {\n  const trackedRef = useRef<string | null>(null);\n\n  useEffect(() => {\n    if (!categoryId || trackedRef.current === categoryId) {\n      return;\n    }\n\n    trackedRef.current = categoryId;\n\n    trackEvent('category_view', {\n      category_id: categoryId,\n      category_name: categoryName,\n    });\n  }, [categoryId, categoryName]);\n};\n\n// Direct tracking function for category page views with location\nexport const trackCategoryPageView = (\n  categoryId: string,\n  categoryName: string,\n  country: string | null = null,\n  city: string | null = null\n) => {\n  trackEvent('category_view', {\n    category_id: categoryId,\n    category_name: categoryName,\n    country: country,\n    city: city,\n  });\n};\n\n// Track ad view\nexport const trackAdView = (adId: string) => {\n  trackEvent('ad_view', { ad_id: adId });\n};\n\n// Track ad click\nexport const trackAdClick = (adId: string, targetUrl: string) => {\n  trackEvent('ad_click', { ad_id: adId, target_url: targetUrl });\n};\n\n// Track listing view\nexport const trackListingView = (listingId: string) => {\n  trackEvent('listing_view', { listing_id: listingId });\n};\n\n// Track link clicks from listing pages\nexport const trackLinkClick = (listingId: string, linkType: string, linkUrl?: string) => {\n  trackEvent('link_click', {\n    listing_id: listingId,\n    link_type: linkType,\n    link_url: linkUrl || null,\n  });\n};\n\n// Fetch analytics data - Page Views (with count)\nexport function usePageViews(startDate?: string, endDate?: string) {\n  return useQuery({\n    queryKey: ['analytics', 'page-views', startDate, endDate],\n    queryFn: async () => {\n      let query = supabase\n        .from('page_views')\n        .select('*', { count: 'exact', head: false })\n        .order('viewed_at', { ascending: false })\n        .limit(1000);\n\n      if (startDate) {\n        query = query.gte('viewed_at', startDate);\n      }\n      if (endDate) {\n        query = query.lte('viewed_at', endDate);\n      }\n\n      const { data, count, error } = await query;\n      if (error) throw error;\n      return { data: data || [], count: count || 0 };\n    },\n  });\n}\n\n// Fetch analytics data - Category Views (with count)\nexport function useCategoryViews(startDate?: string, endDate?: string) {\n  return useQuery({\n    queryKey: ['analytics', 'category-views', startDate, endDate],\n    queryFn: async () => {\n      let query = supabase\n        .from('category_page_views')\n        .select('*', { count: 'exact', head: false })\n        .order('viewed_at', { ascending: false })\n        .limit(1000);\n\n      if (startDate) {\n        query = query.gte('viewed_at', startDate);\n      }\n      if (endDate) {\n        query = query.lte('viewed_at', endDate);\n      }\n\n      const { data, count, error } = await query;\n      if (error) throw error;\n      return { data: data || [], count: count || 0 };\n    },\n  });\n}\n\n// Fetch analytics data - Ad Views (with count)\nexport function useAdViews(startDate?: string, endDate?: string) {\n  return useQuery({\n    queryKey: ['analytics', 'ad-views', startDate, endDate],\n    queryFn: async () => {\n      let query = supabase\n        .from('ad_views')\n        .select('*', { count: 'exact', head: false })\n        .order('viewed_at', { ascending: false })\n        .limit(1000);\n\n      if (startDate) {\n        query = query.gte('viewed_at', startDate);\n      }\n      if (endDate) {\n        query = query.lte('viewed_at', endDate);\n      }\n\n      const { data, count, error } = await query;\n      if (error) throw error;\n      return { data: data || [], count: count || 0 };\n    },\n  });\n}\n\n// Fetch analytics data - Ad Clicks (with count)\nexport function useAdClicks(startDate?: string, endDate?: string) {\n  return useQuery({\n    queryKey: ['analytics', 'ad-clicks', startDate, endDate],\n    queryFn: async () => {\n      let query = supabase\n        .from('ad_clicks')\n        .select('*', { count: 'exact', head: false })\n        .order('clicked_at', { ascending: false })\n        .limit(1000);\n\n      if (startDate) {\n        query = query.gte('clicked_at', startDate);\n      }\n      if (endDate) {\n        query = query.lte('clicked_at', endDate);\n      }\n\n      const { data, count, error } = await query;\n      if (error) throw error;\n      return { data: data || [], count: count || 0 };\n    },\n  });\n}\n\n// Fetch analytics data - Listing Views (with count)\nexport function useListingViews(startDate?: string, endDate?: string) {\n  return useQuery({\n    queryKey: ['analytics', 'listing-views', startDate, endDate],\n    queryFn: async () => {\n      let query = supabase\n        .from('listing_views')\n        .select('*', { count: 'exact', head: false })\n        .order('viewed_at', { ascending: false })\n        .limit(1000);\n\n      if (startDate) {\n        query = query.gte('viewed_at', startDate);\n      }\n      if (endDate) {\n        query = query.lte('viewed_at', endDate);\n      }\n\n      const { data, count, error } = await query;\n      if (error) throw error;\n      return { data: data || [], count: count || 0 };\n    },\n  });\n}\n\n// Fetch analytics data - Link Clicks (with count)\nexport function useLinkClicks(startDate?: string, endDate?: string) {\n  return useQuery({\n    queryKey: ['analytics', 'link-clicks', startDate, endDate],\n    queryFn: async () => {\n      let query = supabase\n        .from('listing_link_clicks')\n        .select('*', { count: 'exact', head: false })\n        .order('clicked_at', { ascending: false })\n        .limit(1000);\n\n      if (startDate) {\n        query = query.gte('clicked_at', startDate);\n      }\n      if (endDate) {\n        query = query.lte('clicked_at', endDate);\n      }\n\n      const { data, count, error } = await query;\n      if (error) throw error;\n      return { data: data || [], count: count || 0 };\n    },\n  });\n}\n\n// Aggregated analytics for dashboard\nexport function useAnalyticsSummary(startDate?: string, endDate?: string) {\n  const { data: pageViews } = usePageViews(startDate, endDate);\n  const { data: categoryViews } = useCategoryViews(startDate, endDate);\n  const { data: adViews } = useAdViews(startDate, endDate);\n  const { data: adClicks } = useAdClicks(startDate, endDate);\n  const { data: listingViews } = useListingViews(startDate, endDate);\n  const { data: linkClicks } = useLinkClicks(startDate, endDate);\n\n  return {\n    pageViews: pageViews?.count || 0,\n    categoryViews: categoryViews?.count || 0,\n    adViews: adViews?.count || 0,\n    adClicks: adClicks?.count || 0,\n    listingViews: listingViews?.count || 0,\n    linkClicks: linkClicks?.count || 0,\n  };\n}\n\n// Top performing listings by views\nexport function useTopListings(limit: number = 10, startDate?: string, endDate?: string) {\n  return useQuery({\n    queryKey: ['analytics', 'top-listings', limit, startDate, endDate],\n    queryFn: async () => {\n      let query = supabase\n        .from('listing_views')\n        .select('listing_id');\n\n      if (startDate) {\n        query = query.gte('viewed_at', startDate);\n      }\n      if (endDate) {\n        query = query.lte('viewed_at', endDate);\n      }\n\n      const { data, error } = await query;\n      if (error) throw error;\n\n      // Count views per listing\n      const viewCounts = data.reduce((acc: Record<string, number>, view) => {\n        acc[view.listing_id] = (acc[view.listing_id] || 0) + 1;\n        return acc;\n      }, {});\n\n      // Sort and limit\n      const sorted = Object.entries(viewCounts)\n        .sort(([, a], [, b]) => b - a)\n        .slice(0, limit)\n        .map(([listing_id, views]) => ({ listing_id, views }));\n\n      return sorted;\n    },\n  });\n}\n\n// Top performing categories by views\nexport function useTopCategories(limit: number = 10, startDate?: string, endDate?: string) {\n  return useQuery({\n    queryKey: ['analytics', 'top-categories', limit, startDate, endDate],\n    queryFn: async () => {\n      let query = supabase\n        .from('category_page_views')\n        .select('category_id, category_name');\n\n      if (startDate) {\n        query = query.gte('viewed_at', startDate);\n      }\n      if (endDate) {\n        query = query.lte('viewed_at', endDate);\n      }\n\n      const { data, error } = await query;\n      if (error) throw error;\n\n      // Count views per category\n      const viewCounts = data.reduce((acc: Record<string, { name: string; views: number }>, view) => {\n        if (!acc[view.category_id]) {\n          acc[view.category_id] = { name: view.category_name || 'Unknown', views: 0 };\n        }\n        acc[view.category_id].views++;\n        return acc;\n      }, {});\n\n      // Sort and limit\n      const sorted = Object.entries(viewCounts)\n        .sort(([, a], [, b]) => b.views - a.views)\n        .slice(0, limit)\n        .map(([category_id, data]) => ({ category_id, ...data }));\n\n      return sorted;\n    },\n  });\n}\n\n// Analytics Overview\nexport function useAnalyticsOverview(startDate?: string, endDate?: string) {\n  const { data: pageViews, isLoading: pageViewsLoading } = usePageViews(startDate, endDate);\n  const { data: categoryViews, isLoading: categoryViewsLoading } = useCategoryViews(startDate, endDate);\n  const { data: adViews, isLoading: adViewsLoading } = useAdViews(startDate, endDate);\n  const { data: adClicks, isLoading: adClicksLoading } = useAdClicks(startDate, endDate);\n  const { data: listingViews, isLoading: listingViewsLoading } = useListingViews(startDate, endDate);\n  const { data: linkClicks, isLoading: linkClicksLoading } = useLinkClicks(startDate, endDate);\n\n  const isLoading = pageViewsLoading || categoryViewsLoading || adViewsLoading || \n                    adClicksLoading || listingViewsLoading || linkClicksLoading;\n\n  const totalAdViews = adViews?.count || 0;\n  const totalAdClicks = adClicks?.count || 0;\n  const ctr = totalAdViews > 0 ? ((totalAdClicks / totalAdViews) * 100).toFixed(2) : '0.00';\n\n  return {\n    data: {\n      pageViews: pageViews?.count || 0,\n      categoryViews: categoryViews?.count || 0,\n      adViews: totalAdViews,\n      adClicks: totalAdClicks,\n      ctr: ctr,\n      listingViews: listingViews?.count || 0,\n      linkClicks: linkClicks?.count || 0,\n    },\n    isLoading,\n    error: null\n  };\n}\n\n// Ad Analytics - aggregated by ad\nexport function useAdAnalytics() {\n  return useQuery({\n    queryKey: ['ad-analytics'],\n    queryFn: async () => {\n      // Get all ads\n      const { data: ads, error: adsError } = await supabase\n        .from('ads')\n        .select('id, name, position')\n        .order('name');\n\n      if (adsError) throw adsError;\n\n      // Get views and clicks for each ad\n      const results = await Promise.all(\n        ads.map(async (ad) => {\n          const [viewsRes, clicksRes] = await Promise.all([\n            supabase.from('ad_views').select('id', { count: 'exact', head: true }).eq('ad_id', ad.id),\n            supabase.from('ad_clicks').select('id', { count: 'exact', head: true }).eq('ad_id', ad.id)\n          ]);\n\n          const views = viewsRes.count || 0;\n          const clicks = clicksRes.count || 0;\n          const ctr = views > 0 ? ((clicks / views) * 100).toFixed(2) : '0.00';\n\n          return {\n            id: ad.id,\n            name: ad.name,\n            position: ad.position,\n            views,\n            clicks,\n            ctr\n          };\n        })\n      );\n\n      return results;\n    },\n  });\n}\n\n// Time series analytics\nexport function useAnalyticsTimeSeries(startDate?: string, endDate?: string) {\n  return useQuery({\n    queryKey: ['analytics-timeseries', startDate, endDate],\n    queryFn: async () => {\n      const start = startDate || new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString();\n      const end = endDate || new Date().toISOString();\n\n      // Get page views\n      const { data: pageViews } = await supabase\n        .from('page_views')\n        .select('viewed_at')\n        .gte('viewed_at', start)\n        .lte('viewed_at', end);\n\n      // Get ad views\n      const { data: adViews } = await supabase\n        .from('ad_views')\n        .select('viewed_at')\n        .gte('viewed_at', start)\n        .lte('viewed_at', end);\n\n      // Get ad clicks\n      const { data: adClicks } = await supabase\n        .from('ad_clicks')\n        .select('clicked_at')\n        .gte('clicked_at', start)\n        .lte('clicked_at', end);\n\n      // Group by date\n      const dateMap: Record<string, { pageViews: number; adViews: number; adClicks: number }> = {};\n\n      pageViews?.forEach((view) => {\n        const date = view.viewed_at.split('T')[0];\n        if (!dateMap[date]) dateMap[date] = { pageViews: 0, adViews: 0, adClicks: 0 };\n        dateMap[date].pageViews++;\n      });\n\n      adViews?.forEach((view) => {\n        const date = view.viewed_at.split('T')[0];\n        if (!dateMap[date]) dateMap[date] = { pageViews: 0, adViews: 0, adClicks: 0 };\n        dateMap[date].adViews++;\n      });\n\n      adClicks?.forEach((click) => {\n        const date = click.clicked_at.split('T')[0];\n        if (!dateMap[date]) dateMap[date] = { pageViews: 0, adViews: 0, adClicks: 0 };\n        dateMap[date].adClicks++;\n      });\n\n      // Convert to array and sort\n      return Object.entries(dateMap)\n        .map(([date, counts]) => ({ date, ...counts }))\n        .sort((a, b) => a.date.localeCompare(b.date));\n    },\n  });\n}\n\n// Category views analytics with search\nexport function useCategoryViewsAnalytics(search?: string) {\n  return useQuery({\n    queryKey: ['category-views-analytics', search],\n    queryFn: async () => {\n      let query = supabase\n        .from('category_page_views')\n        .select('category_name, country, city');\n\n      const { data, error } = await query;\n      if (error) throw error;\n\n      // Group by category + location\n      const grouped: Record<string, { category: string; country: string | null; city: string | null; views: number }> = {};\n      \n      data?.forEach((view) => {\n        const key = `${view.category_name}-${view.country}-${view.city}`;\n        if (!grouped[key]) {\n          grouped[key] = {\n            category: view.category_name,\n            country: view.country,\n            city: view.city,\n            views: 0\n          };\n        }\n        grouped[key].views++;\n      });\n\n      let results = Object.values(grouped);\n\n      // Filter by search\n      if (search) {\n        const searchLower = search.toLowerCase();\n        results = results.filter(item => \n          item.category.toLowerCase().includes(searchLower) ||\n          item.country?.toLowerCase().includes(searchLower) ||\n          item.city?.toLowerCase().includes(searchLower)\n        );\n      }\n\n      // Sort by views descending\n      return results.sort((a, b) => b.views - a.views);\n    },\n  });\n}\n\n// Company views analytics with search\nexport function useCompanyViewsAnalytics(search?: string) {\n  return useQuery({\n    queryKey: ['company-views-analytics', search],\n    queryFn: async () => {\n      const { data: views, error: viewsError } = await supabase\n        .from('listing_views')\n        .select('listing_id');\n\n      if (viewsError) throw viewsError;\n\n      // Count views per listing\n      const viewCounts: Record<string, number> = {};\n      views?.forEach((view) => {\n        viewCounts[view.listing_id] = (viewCounts[view.listing_id] || 0) + 1;\n      });\n\n      // Get listing details\n      const listingIds = Object.keys(viewCounts);\n      if (listingIds.length === 0) return [];\n\n      let query = supabase\n        .from('listings')\n        .select('id, name, slug')\n        .in('id', listingIds);\n\n      if (search) {\n        query = query.ilike('name', `%${search}%`);\n      }\n\n      const { data: listings, error: listingsError } = await query;\n      if (listingsError) throw listingsError;\n\n      // Combine data\n      const results = listings?.map((listing) => ({\n        id: listing.id,\n        name: listing.name,\n        slug: listing.slug,\n        views: viewCounts[listing.id] || 0\n      })) || [];\n\n      // Sort by views descending\n      return results.sort((a, b) => b.views - a.views);\n    },\n  });\n}\n\n// Link clicks analytics with search\nexport function useLinkClicksAnalytics(search?: string) {\n  return useQuery({\n    queryKey: ['link-clicks-analytics', search],\n    queryFn: async () => {\n      const { data: clicks, error: clicksError } = await supabase\n        .from('listing_link_clicks')\n        .select('listing_id, link_type');\n\n      if (clicksError) throw clicksError;\n\n      // Group by listing + link type\n      const grouped: Record<string, { listingId: string; linkType: string; clicks: number }> = {};\n      \n      clicks?.forEach((click) => {\n        const key = `${click.listing_id}-${click.link_type}`;\n        if (!grouped[key]) {\n          grouped[key] = {\n            listingId: click.listing_id,\n            linkType: click.link_type,\n            clicks: 0\n          };\n        }\n        grouped[key].clicks++;\n      });\n\n      // Get listing details\n      const listingIds = [...new Set(Object.values(grouped).map(g => g.listingId))];\n      if (listingIds.length === 0) return [];\n\n      let query = supabase\n        .from('listings')\n        .select('id, name, slug')\n        .in('id', listingIds);\n\n      if (search) {\n        query = query.ilike('name', `%${search}%`);\n      }\n\n      const { data: listings, error: listingsError } = await query;\n      if (listingsError) throw listingsError;\n\n      const listingMap = new Map(listings?.map(l => [l.id, l]) || []);\n\n      // Combine data\n      const results = Object.values(grouped)\n        .map((item) => {\n          const listing = listingMap.get(item.listingId);\n          return listing ? {\n            listingId: item.listingId,\n            companyName: listing.name,\n            slug: listing.slug,\n            linkType: item.linkType,\n            clicks: item.clicks\n          } : null;\n        })\n        .filter(Boolean) as Array<{\n          listingId: string;\n          companyName: string;\n          slug: string;\n          linkType: string;\n          clicks: number;\n        }>;\n\n      // Sort by clicks descending\n      return results.sort((a, b) => b.clicks - a.clicks);\n    },\n  });\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4279, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/PageViewTracker.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { usePageViewTracking } from '@/hooks/useAnalytics';\r\n\r\nexport function PageViewTracker() {\r\n  usePageViewTracking();\r\n  return null;\r\n}"],"names":[],"mappings":";;;;AAEA;AAFA;;AAIO,SAAS;IACd,IAAA,uKAAmB;IACnB,OAAO;AACT","debugId":null}},
    {"offset": {"line": 4294, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/Layout.tsx"],"sourcesContent":["import { Header, BreadcrumbItem } from \"./Header\";\nimport { Footer } from \"./Footer\";\nimport { PageViewTracker } from \"./PageViewTracker\";\nimport { cn } from \"@/lib/utils\";\nimport { ReactNode } from \"react\";\n\ninterface LayoutProps {\n  children: React.ReactNode;\n  hideFooter?: boolean;\n  breadcrumbs?: BreadcrumbItem[];\n  headerRightContent?: ReactNode;\n  customNavContent?: ReactNode;\n}\n\nexport function Layout({ children, hideFooter, breadcrumbs, headerRightContent, customNavContent }: LayoutProps) {\n  return (\n    <>\n      <PageViewTracker />\n      <div className={cn(\n        \"flex flex-col\",\n        hideFooter ? \"h-screen overflow-hidden\" : \"min-h-screen\"\n      )}>\n        <Header \n          breadcrumbs={breadcrumbs} \n          rightContent={headerRightContent} \n          customNavContent={customNavContent} \n        />\n        <main className={cn(\n          \"flex-1 flex flex-col\",\n          hideFooter && \"overflow-hidden\"\n        )}>{children}</main>\n        {!hideFooter && <Footer />}\n      </div>\n    </>\n  );\n}\n\nexport type { BreadcrumbItem };"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;;;;;AAWO,SAAS,OAAO,EAAE,QAAQ,EAAE,UAAU,EAAE,WAAW,EAAE,kBAAkB,EAAE,gBAAgB,EAAe;IAC7G,qBACE;;0BACE,kQAAC,4KAAe;;;;;0BAChB,kQAAC;gBAAI,WAAW,IAAA,6IAAE,EAChB,iBACA,aAAa,6BAA6B;;kCAE1C,kQAAC,0JAAM;wBACL,aAAa;wBACb,cAAc;wBACd,kBAAkB;;;;;;kCAEpB,kQAAC;wBAAK,WAAW,IAAA,6IAAE,EACjB,wBACA,cAAc;kCACZ;;;;;;oBACH,CAAC,4BAAc,kQAAC,0JAAM;;;;;;;;;;;;;AAI/B","debugId":null}},
    {"offset": {"line": 4354, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/ui/breadcrumb.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode;\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />);\nBreadcrumb.displayName = \"Breadcrumb\";\n\nconst BreadcrumbList = React.forwardRef<HTMLOListElement, React.ComponentPropsWithoutRef<\"ol\">>(\n  ({ className, ...props }, ref) => (\n    <ol\n      ref={ref}\n      className={cn(\n        \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n        className,\n      )}\n      {...props}\n    />\n  ),\n);\nBreadcrumbList.displayName = \"BreadcrumbList\";\n\nconst BreadcrumbItem = React.forwardRef<HTMLLIElement, React.ComponentPropsWithoutRef<\"li\">>(\n  ({ className, ...props }, ref) => (\n    <li ref={ref} className={cn(\"inline-flex items-center gap-1.5\", className)} {...props} />\n  ),\n);\nBreadcrumbItem.displayName = \"BreadcrumbItem\";\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean;\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\";\n\n  return <Comp ref={ref} className={cn(\"transition-colors hover:text-foreground\", className)} {...props} />;\n});\nBreadcrumbLink.displayName = \"BreadcrumbLink\";\n\nconst BreadcrumbPage = React.forwardRef<HTMLSpanElement, React.ComponentPropsWithoutRef<\"span\">>(\n  ({ className, ...props }, ref) => (\n    <span\n      ref={ref}\n      role=\"link\"\n      aria-disabled=\"true\"\n      aria-current=\"page\"\n      className={cn(\"font-normal text-foreground\", className)}\n      {...props}\n    />\n  ),\n);\nBreadcrumbPage.displayName = \"BreadcrumbPage\";\n\nconst BreadcrumbSeparator = ({ children, className, ...props }: React.ComponentProps<\"li\">) => (\n  <li role=\"presentation\" aria-hidden=\"true\" className={cn(\"[&>svg]:size-3.5\", className)} {...props}>\n    {children ?? <ChevronRight />}\n  </li>\n);\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\";\n\nconst BreadcrumbEllipsis = ({ className, ...props }: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n);\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\";\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAAA;AAEA;;;;;;AAEA,MAAM,2BAAa,uOAAgB,CAKjC,CAAC,EAAE,GAAG,OAAO,EAAE,oBAAQ,kQAAC;QAAI,KAAK;QAAK,cAAW;QAAc,GAAG,KAAK;;;;;;AACzE,WAAW,WAAW,GAAG;AAEzB,MAAM,+BAAiB,uOAAgB,CACrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,kQAAC;QACC,KAAK;QACL,WAAW,IAAA,6IAAE,EACX,4FACA;QAED,GAAG,KAAK;;;;;;AAIf,eAAe,WAAW,GAAG;AAE7B,MAAM,+BAAiB,uOAAgB,CACrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,kQAAC;QAAG,KAAK;QAAK,WAAW,IAAA,6IAAE,EAAC,oCAAoC;QAAa,GAAG,KAAK;;;;;;AAGzF,eAAe,WAAW,GAAG;AAE7B,MAAM,+BAAiB,uOAAgB,CAKrC,CAAC,EAAE,OAAO,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACnC,MAAM,OAAO,UAAU,4LAAI,GAAG;IAE9B,qBAAO,kQAAC;QAAK,KAAK;QAAK,WAAW,IAAA,6IAAE,EAAC,2CAA2C;QAAa,GAAG,KAAK;;;;;;AACvG;AACA,eAAe,WAAW,GAAG;AAE7B,MAAM,+BAAiB,uOAAgB,CACrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,kQAAC;QACC,KAAK;QACL,MAAK;QACL,iBAAc;QACd,gBAAa;QACb,WAAW,IAAA,6IAAE,EAAC,+BAA+B;QAC5C,GAAG,KAAK;;;;;;AAIf,eAAe,WAAW,GAAG;AAE7B,MAAM,sBAAsB,CAAC,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,OAAmC,iBACxF,kQAAC;QAAG,MAAK;QAAe,eAAY;QAAO,WAAW,IAAA,6IAAE,EAAC,oBAAoB;QAAa,GAAG,KAAK;kBAC/F,0BAAY,kQAAC,0PAAY;;;;;;;;;;AAG9B,oBAAoB,WAAW,GAAG;AAElC,MAAM,qBAAqB,CAAC,EAAE,SAAS,EAAE,GAAG,OAAqC,iBAC/E,kQAAC;QACC,MAAK;QACL,eAAY;QACZ,WAAW,IAAA,6IAAE,EAAC,4CAA4C;QACzD,GAAG,KAAK;;0BAET,kQAAC,sPAAc;gBAAC,WAAU;;;;;;0BAC1B,kQAAC;gBAAK,WAAU;0BAAU;;;;;;;;;;;;AAG9B,mBAAmB,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 4486, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/ResourceArticle.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\r\nimport DOMPurify from 'isomorphic-dompurify';\r\nimport { useResourceBySlug, parseSlugForBreadcrumbs, slugToDisplayName } from '@/hooks/useResourceBySlug';\r\nimport { useListingBySlug } from '@/hooks/useListings';\r\nimport { useIsAdmin } from '@/hooks/useAuth';\r\nimport { useCategories } from '@/hooks/useCategories';\r\nimport { Layout } from '@/components/Layout';\r\nimport { Loader2, ArrowLeft, ChevronRight } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n  Breadcrumb,\r\n  BreadcrumbItem,\r\n  BreadcrumbLink,\r\n  BreadcrumbList,\r\n  BreadcrumbPage,\r\n  BreadcrumbSeparator,\r\n} from '@/components/ui/breadcrumb';\r\n\r\n// Helper to generate slug from heading text\r\nconst generateSlug = (text: string): string => {\r\n  return text\r\n    .toLowerCase()\r\n    .replace(/[^a-z0-9\\s-]/g, '')\r\n    .replace(/\\s+/g, '-')\r\n    .replace(/-+/g, '-')\r\n    .trim();\r\n};\r\n\r\ninterface ResourceArticleProps {\r\n  slug: string;\r\n}\r\n\r\nexport default function ResourceArticle({ slug }: ResourceArticleProps) {\r\n  const { isAdmin } = useIsAdmin();\r\n  const { data: resource, isLoading, error } = useResourceBySlug(slug);\r\n  const { data: categories } = useCategories();\r\n  \r\n  // Parse slug segments for breadcrumbs\r\n  const { segments, pathType, listingSlug } = parseSlugForBreadcrumbs(slug);\r\n  \r\n  // Fetch listing data if this is a listing-based path\r\n  const { data: listing } = useListingBySlug(pathType === 'listing' ? listingSlug || '' : '');\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Layout>\r\n        <div className=\"min-h-screen flex items-center justify-center\">\r\n          <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\r\n        </div>\r\n      </Layout>\r\n    );\r\n  }\r\n\r\n  if (error || !resource) {\r\n    return null; // DynamicRoute handles the NotFound case\r\n  }\r\n\r\n  // Process content to add IDs to h2 elements\r\n  let processedContent = resource.content || '';\r\n  const h2Regex = /<h2[^>]*>(.*?)<\\/h2>/gi;\r\n  processedContent = processedContent.replace(h2Regex, (match, content) => {\r\n    const textContent = content.replace(/<[^>]*>/g, ''); // Strip inner HTML tags\r\n    const id = generateSlug(textContent);\r\n    return `<h2 id=\"${id}\">${content}</h2>`;\r\n  });\r\n\r\n  // Sanitize HTML content\r\n  const sanitizedContent = processedContent \r\n    ? DOMPurify.sanitize(processedContent, {\r\n        ADD_TAGS: ['iframe'],\r\n        ADD_ATTR: ['allow', 'allowfullscreen', 'frameborder', 'scrolling', 'id'],\r\n      })\r\n    : '';\r\n\r\n  // Parse internal links from JSON\r\n  const internalLinks: { text: string; url: string }[] = \r\n    Array.isArray(resource.internal_links) \r\n      ? (resource.internal_links as unknown as { text: string; url: string }[]) \r\n      : [];\r\n\r\n\r\n  // Build breadcrumb items from segments\r\n  const buildBreadcrumbItems = () => {\r\n    const items: { label: string; href: string }[] = [];\r\n\r\n    // Handle listing-based paths: Home > {Listing Name} > Article\r\n    if (pathType === 'listing' && listingSlug) {\r\n      const listingName = listing?.name || slugToDisplayName(listingSlug);\r\n      items.push({\r\n        label: listingName,\r\n        href: `/listing/${listingSlug}`,\r\n      });\r\n      return items;\r\n    }\r\n\r\n    // Handle category-based and other paths\r\n    let currentPath = '';\r\n    for (let i = 0; i < segments.length; i++) {\r\n      const segment = segments[i];\r\n      currentPath += `/${segment}`;\r\n\r\n      // Check if this segment is \"categories\" - just use the label\r\n      if (segment === 'categories') {\r\n        items.push({\r\n          label: 'Categories',\r\n          href: '/categories',\r\n        });\r\n      } else if (segment === 'listing') {\r\n        // Skip the \"listing\" segment itself for listing paths\r\n        continue;\r\n      } else {\r\n        // Try to find a matching category by slug\r\n        const category = categories?.find(c => c.slug === segment || c.url_slug === segment);\r\n        const label = category?.name || slugToDisplayName(segment);\r\n        \r\n        items.push({\r\n          label,\r\n          href: currentPath,\r\n        });\r\n      }\r\n    }\r\n\r\n    return items;\r\n  };\r\n\r\n  const breadcrumbItems = buildBreadcrumbItems();\r\n\r\n  return (\r\n    <Layout>\r\n      <article className=\"min-h-screen bg-background pt-8\">\r\n        {/* Hero Image with Gradient Overlay */}\r\n        {resource.image_url && (\r\n          <div className=\"w-full h-64 md:h-80 lg:h-96 relative overflow-hidden -mt-8\">\r\n            <img\r\n              src={resource.image_url}\r\n              alt={resource.image_alt || resource.article_title}\r\n              className=\"w-full h-full object-cover\"\r\n            />\r\n            <div className=\"absolute inset-0 bg-gradient-to-t from-background via-background/60 to-transparent\" />\r\n          </div>\r\n        )}\r\n\r\n        <div className={`container max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 ${resource.image_url ? '-mt-20' : ''}`}>\r\n          {/* Breadcrumbs */}\r\n          <Breadcrumb className=\"mb-6\">\r\n            <BreadcrumbList>\r\n              <BreadcrumbItem>\r\n                <BreadcrumbLink asChild>\r\n                  <Link href=\"/\" className=\"text-muted-foreground hover:text-foreground\">\r\n                    Home\r\n                  </Link>\r\n                </BreadcrumbLink>\r\n              </BreadcrumbItem>\r\n              {breadcrumbItems.map((item, index) => (\r\n                <span key={item.href} className=\"contents\">\r\n                  <BreadcrumbSeparator>\r\n                    <ChevronRight className=\"h-4 w-4\" />\r\n                  </BreadcrumbSeparator>\r\n                  <BreadcrumbItem>\r\n                    <BreadcrumbLink asChild>\r\n                      <Link href={item.href} className=\"text-muted-foreground hover:text-foreground\">\r\n                        {item.label}\r\n                      </Link>\r\n                    </BreadcrumbLink>\r\n                  </BreadcrumbItem>\r\n                </span>\r\n              ))}\r\n              <BreadcrumbSeparator>\r\n                <ChevronRight className=\"h-4 w-4\" />\r\n              </BreadcrumbSeparator>\r\n              <BreadcrumbItem>\r\n                <BreadcrumbPage className=\"text-foreground truncate max-w-[200px]\">\r\n                  {resource.article_title}\r\n                </BreadcrumbPage>\r\n              </BreadcrumbItem>\r\n            </BreadcrumbList>\r\n          </Breadcrumb>\r\n\r\n          {/* Main Content Card */}\r\n          <div className=\"bg-card rounded-lg border border-border shadow-lg p-6 md:p-10 lg:p-12\">\r\n            {/* Back Button - Admin only */}\r\n            {isAdmin && (\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={() => window.location.href = '/admin/resources'}\r\n                className=\"mb-6 -ml-2 text-muted-foreground hover:text-foreground\"\r\n              >\r\n                <ArrowLeft className=\"h-4 w-4 mr-2\" />\r\n              Back to Resources\r\n              </Button>\r\n            )}\r\n\r\n            {/* H1 Heading - Proportional scaling: ~2.25rem mobile, ~2.75rem tablet, ~3.25rem desktop */}\r\n            <h1 className=\"text-[2.25rem] md:text-[2.75rem] lg:text-[3.25rem] font-bold mb-8 text-foreground leading-[1.15]\">\r\n              {resource.h1 || resource.article_title}\r\n            </h1>\r\n\r\n            {/* Main Content - Editorial-style typography */}\r\n            <div \r\n              className=\"prose prose-lg md:prose-xl max-w-none dark:prose-invert\r\n                prose-headings:text-foreground prose-headings:scroll-mt-20\r\n                prose-h2:text-[1.5rem] prose-h2:md:text-[1.85rem] prose-h2:lg:text-[2.15rem] prose-h2:mt-12 prose-h2:mb-5 prose-h2:font-bold prose-h2:border-b prose-h2:border-border/50 prose-h2:pb-3 prose-h2:leading-[1.2]\r\n                prose-h3:text-lg prose-h3:md:text-xl prose-h3:mt-10 prose-h3:mb-4 prose-h3:font-semibold\r\n                prose-p:text-foreground/90 prose-p:leading-[1.8] prose-p:mb-6 prose-p:text-base prose-p:md:text-lg\r\n                [&_a]:font-semibold [&_a]:underline [&_a]:underline-offset-2 [&_a]:transition-colors\r\n                prose-strong:text-foreground prose-strong:font-semibold\r\n                prose-ul:text-foreground/90 prose-ol:text-foreground/90 prose-ul:my-6 prose-ol:my-6\r\n                prose-li:marker:text-primary prose-li:my-2 prose-li:leading-[1.7] prose-li:text-base prose-li:md:text-lg\r\n                prose-blockquote:border-l-4 prose-blockquote:border-primary prose-blockquote:text-foreground/80 prose-blockquote:bg-muted/30 prose-blockquote:py-4 prose-blockquote:px-6 prose-blockquote:rounded-r-lg prose-blockquote:my-8 prose-blockquote:italic\r\n                prose-img:rounded-lg prose-img:shadow-md prose-img:my-8\r\n                prose-hr:border-border prose-hr:my-10\r\n                [&_a:hover]:text-primary\r\n                [&_p+p]:mt-6\r\n                [&_h2+p]:mt-5\r\n                [&_h3+p]:mt-4\r\n                [&_p+h2]:mt-14\r\n                [&_p+h3]:mt-12\r\n                [&_ul+h2]:mt-14\r\n                [&_ol+h2]:mt-14\r\n                [&_ul+h3]:mt-12\r\n                [&_ol+h3]:mt-12\"\r\n              dangerouslySetInnerHTML={{ __html: sanitizedContent }}\r\n            />\r\n\r\n            {/* Internal Links */}\r\n            {internalLinks.length > 0 && (\r\n              <div className=\"mt-12 pt-8 border-t border-border\">\r\n                <h2 className=\"font-semibold mb-4 text-foreground text-lg\">Related Links</h2>\r\n                <ul className=\"space-y-2\">\r\n                  {internalLinks.map((link, index) => (\r\n                    <li key={index} className=\"flex items-center gap-2\">\r\n                      <ChevronRight className=\"h-4 w-4 text-primary/50\" />\r\n                      <a\r\n                        href={link.url}\r\n                        className=\"text-primary hover:underline\"\r\n                      >\r\n                        {link.text}\r\n                      </a>\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Bottom spacing */}\r\n          <div className=\"h-12\" />\r\n        </div>\r\n      </article>\r\n    </Layout>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAXA;;;;;;;;;;;;AAoBA,4CAA4C;AAC5C,MAAM,eAAe,CAAC;IACpB,OAAO,KACJ,WAAW,GACX,OAAO,CAAC,iBAAiB,IACzB,OAAO,CAAC,QAAQ,KAChB,OAAO,CAAC,OAAO,KACf,IAAI;AACT;AAMe,SAAS,gBAAgB,EAAE,IAAI,EAAwB;IACpE,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,yJAAU;IAC9B,MAAM,EAAE,MAAM,QAAQ,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,IAAA,0KAAiB,EAAC;IAC/D,MAAM,EAAE,MAAM,UAAU,EAAE,GAAG,IAAA,kKAAa;IAE1C,sCAAsC;IACtC,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,WAAW,EAAE,GAAG,IAAA,gLAAuB,EAAC;IAEpE,qDAAqD;IACrD,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,IAAA,mKAAgB,EAAC,aAAa,YAAY,eAAe,KAAK;IAExF,IAAI,WAAW;QACb,qBACE,kQAAC,0JAAM;sBACL,cAAA,kQAAC;gBAAI,WAAU;0BACb,cAAA,kQAAC,gPAAO;oBAAC,WAAU;;;;;;;;;;;;;;;;IAI3B;IAEA,IAAI,SAAS,CAAC,UAAU;QACtB,OAAO,MAAM,yCAAyC;IACxD;IAEA,4CAA4C;IAC5C,IAAI,mBAAmB,SAAS,OAAO,IAAI;IAC3C,MAAM,UAAU;IAChB,mBAAmB,iBAAiB,OAAO,CAAC,SAAS,CAAC,OAAO;QAC3D,MAAM,cAAc,QAAQ,OAAO,CAAC,YAAY,KAAK,wBAAwB;QAC7E,MAAM,KAAK,aAAa;QACxB,OAAO,CAAC,QAAQ,EAAE,GAAG,EAAE,EAAE,QAAQ,KAAK,CAAC;IACzC;IAEA,wBAAwB;IACxB,MAAM,mBAAmB,mBACrB,+KAAS,CAAC,QAAQ,CAAC,kBAAkB;QACnC,UAAU;YAAC;SAAS;QACpB,UAAU;YAAC;YAAS;YAAmB;YAAe;YAAa;SAAK;IAC1E,KACA;IAEJ,iCAAiC;IACjC,MAAM,gBACJ,MAAM,OAAO,CAAC,SAAS,cAAc,IAChC,SAAS,cAAc,GACxB,EAAE;IAGR,uCAAuC;IACvC,MAAM,uBAAuB;QAC3B,MAAM,QAA2C,EAAE;QAEnD,8DAA8D;QAC9D,IAAI,aAAa,aAAa,aAAa;YACzC,MAAM,cAAc,SAAS,QAAQ,IAAA,0KAAiB,EAAC;YACvD,MAAM,IAAI,CAAC;gBACT,OAAO;gBACP,MAAM,CAAC,SAAS,EAAE,aAAa;YACjC;YACA,OAAO;QACT;QAEA,wCAAwC;QACxC,IAAI,cAAc;QAClB,IAAK,IAAI,IAAI,GAAG,IAAI,SAAS,MAAM,EAAE,IAAK;YACxC,MAAM,UAAU,QAAQ,CAAC,EAAE;YAC3B,eAAe,CAAC,CAAC,EAAE,SAAS;YAE5B,6DAA6D;YAC7D,IAAI,YAAY,cAAc;gBAC5B,MAAM,IAAI,CAAC;oBACT,OAAO;oBACP,MAAM;gBACR;YACF,OAAO,IAAI,YAAY,WAAW;gBAEhC;YACF,OAAO;gBACL,0CAA0C;gBAC1C,MAAM,WAAW,YAAY,KAAK,CAAA,IAAK,EAAE,IAAI,KAAK,WAAW,EAAE,QAAQ,KAAK;gBAC5E,MAAM,QAAQ,UAAU,QAAQ,IAAA,0KAAiB,EAAC;gBAElD,MAAM,IAAI,CAAC;oBACT;oBACA,MAAM;gBACR;YACF;QACF;QAEA,OAAO;IACT;IAEA,MAAM,kBAAkB;IAExB,qBACE,kQAAC,0JAAM;kBACL,cAAA,kQAAC;YAAQ,WAAU;;gBAEhB,SAAS,SAAS,kBACjB,kQAAC;oBAAI,WAAU;;sCACb,kQAAC;4BACC,KAAK,SAAS,SAAS;4BACvB,KAAK,SAAS,SAAS,IAAI,SAAS,aAAa;4BACjD,WAAU;;;;;;sCAEZ,kQAAC;4BAAI,WAAU;;;;;;;;;;;;8BAInB,kQAAC;oBAAI,WAAW,CAAC,+DAA+D,EAAE,SAAS,SAAS,GAAG,WAAW,IAAI;;sCAEpH,kQAAC,wKAAU;4BAAC,WAAU;sCACpB,cAAA,kQAAC,4KAAc;;kDACb,kQAAC,4KAAc;kDACb,cAAA,kQAAC,4KAAc;4CAAC,OAAO;sDACrB,cAAA,kQAAC,2LAAI;gDAAC,MAAK;gDAAI,WAAU;0DAA8C;;;;;;;;;;;;;;;;oCAK1E,gBAAgB,GAAG,CAAC,CAAC,MAAM,sBAC1B,kQAAC;4CAAqB,WAAU;;8DAC9B,kQAAC,iLAAmB;8DAClB,cAAA,kQAAC,0PAAY;wDAAC,WAAU;;;;;;;;;;;8DAE1B,kQAAC,4KAAc;8DACb,cAAA,kQAAC,4KAAc;wDAAC,OAAO;kEACrB,cAAA,kQAAC,2LAAI;4DAAC,MAAM,KAAK,IAAI;4DAAE,WAAU;sEAC9B,KAAK,KAAK;;;;;;;;;;;;;;;;;2CAPR,KAAK,IAAI;;;;;kDAatB,kQAAC,iLAAmB;kDAClB,cAAA,kQAAC,0PAAY;4CAAC,WAAU;;;;;;;;;;;kDAE1B,kQAAC,4KAAc;kDACb,cAAA,kQAAC,4KAAc;4CAAC,WAAU;sDACvB,SAAS,aAAa;;;;;;;;;;;;;;;;;;;;;;sCAO/B,kQAAC;4BAAI,WAAU;;gCAEZ,yBACC,kQAAC,gKAAM;oCACL,SAAQ;oCACR,MAAK;oCACL,SAAS,IAAM,OAAO,QAAQ,CAAC,IAAI,GAAG;oCACtC,WAAU;;sDAEV,kQAAC,iPAAS;4CAAC,WAAU;;;;;;wCAAiB;;;;;;;8CAM1C,kQAAC;oCAAG,WAAU;8CACX,SAAS,EAAE,IAAI,SAAS,aAAa;;;;;;8CAIxC,kQAAC;oCACC,WAAU;oCAsBV,yBAAyB;wCAAE,QAAQ;oCAAiB;;;;;;gCAIrD,cAAc,MAAM,GAAG,mBACtB,kQAAC;oCAAI,WAAU;;sDACb,kQAAC;4CAAG,WAAU;sDAA6C;;;;;;sDAC3D,kQAAC;4CAAG,WAAU;sDACX,cAAc,GAAG,CAAC,CAAC,MAAM,sBACxB,kQAAC;oDAAe,WAAU;;sEACxB,kQAAC,0PAAY;4DAAC,WAAU;;;;;;sEACxB,kQAAC;4DACC,MAAM,KAAK,GAAG;4DACd,WAAU;sEAET,KAAK,IAAI;;;;;;;mDANL;;;;;;;;;;;;;;;;;;;;;;sCAgBnB,kQAAC;4BAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;AAKzB","debugId":null}},
    {"offset": {"line": 4878, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/FavouriteButton.tsx"],"sourcesContent":["'use client';\n\nimport { Heart } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { useIsFavourite } from \"@/hooks/useFavourites\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { memo } from \"react\";\r\n\r\ninterface FavouriteButtonProps {\r\n  listingId: string;\r\n  size?: \"sm\" | \"md\" | \"default\";\r\n  variant?: \"ghost\" | \"outline\" | \"default\";\r\n  className?: string;\r\n}\r\n\r\nfunction FavouriteButtonComponent({ listingId, size = \"md\", variant = \"ghost\", className }: FavouriteButtonProps) {\r\n  const { isFavourite, toggle } = useIsFavourite(listingId);\r\n\r\n  const sizeClasses = size === \"sm\" ? \"h-8 w-8\" : size === \"default\" ? \"h-10 w-10\" : \"h-10 w-10\";\r\n  const iconSizeClasses = size === \"sm\" ? \"h-4 w-4\" : size === \"default\" ? \"h-5 w-5\" : \"h-5 w-5\";\r\n\r\n  return (\r\n    <Button\r\n      variant={variant}\r\n      size=\"icon\"\r\n      className={cn(sizeClasses, isFavourite && \"text-red-500 hover:text-red-600\", className)}\r\n      onClick={(e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        toggle();\r\n      }}\r\n    >\r\n      <Heart className={cn(iconSizeClasses, isFavourite && \"fill-current\")} />\r\n    </Button>\r\n  );\r\n}\r\n\r\nexport const FavouriteButton = memo(FavouriteButtonComponent);\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAeA,SAAS,yBAAyB,EAAE,SAAS,EAAE,OAAO,IAAI,EAAE,UAAU,OAAO,EAAE,SAAS,EAAwB;IAC9G,MAAM,EAAE,WAAW,EAAE,MAAM,EAAE,GAAG,IAAA,mKAAc,EAAC;IAE/C,MAAM,cAAc,SAAS,OAAO,YAAY,SAAS,YAAY,cAAc;IACnF,MAAM,kBAAkB,SAAS,OAAO,YAAY,SAAS,YAAY,YAAY;IAErF,qBACE,kQAAC,gKAAM;QACL,SAAS;QACT,MAAK;QACL,WAAW,IAAA,6IAAE,EAAC,aAAa,eAAe,mCAAmC;QAC7E,SAAS,CAAC;YACR,EAAE,cAAc;YAChB,EAAE,eAAe;YACjB;QACF;kBAEA,cAAA,kQAAC,iOAAK;YAAC,WAAW,IAAA,6IAAE,EAAC,iBAAiB,eAAe;;;;;;;;;;;AAG3D;AAEO,MAAM,gCAAkB,IAAA,iOAAI,EAAC","debugId":null}},
    {"offset": {"line": 4926, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/TierBadge.tsx"],"sourcesContent":["import { Star } from \"lucide-react\";\nimport { ListingTier } from \"@/types/database\";\nimport { cn } from \"@/lib/utils\";\n\ninterface TierBadgeProps {\n  tier: ListingTier;\n  showLabel?: boolean;\n  className?: string;\n}\n\nconst tierConfig = {\n  premier: {\n    label: \"Premier\",\n    colorClass: \"text-tier-premier\",\n    bgClass: \"bg-tier-premier/20 border-tier-premier/40\",\n    glowClass: \"shadow-glow-pink\",\n  },\n  enhanced: {\n    label: \"Enhanced\",\n    colorClass: \"text-tier-enhanced\",\n    bgClass: \"bg-tier-enhanced/20 border-tier-enhanced/40\",\n    glowClass: \"shadow-glow-cyan\",\n  },\n  free: {\n    label: \"Free\",\n    colorClass: \"text-tier-free\",\n    bgClass: \"bg-tier-free/20 border-tier-free/40\",\n    glowClass: \"\",\n  },\n};\n\nexport function TierBadge({ tier, showLabel = false, className }: TierBadgeProps) {\n  const config = tierConfig[tier];\n\n  return (\n    <div\n      className={cn(\n        \"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium border\",\n        config.bgClass,\n        config.colorClass,\n        tier !== 'free' && config.glowClass,\n        className\n      )}\n    >\n      <Star className=\"h-3 w-3 fill-current\" />\n      {showLabel && <span>{config.label}</span>}\n    </div>\n  );\n}\n\nexport function TierStar({ tier, className }: { tier: ListingTier; className?: string }) {\n  const config = tierConfig[tier];\n  \n  return (\n    <Star className={cn(\"h-4 w-4 fill-current\", config.colorClass, className)} />\n  );\n}"],"names":[],"mappings":";;;;;;;AAAA;AAEA;;;;AAQA,MAAM,aAAa;IACjB,SAAS;QACP,OAAO;QACP,YAAY;QACZ,SAAS;QACT,WAAW;IACb;IACA,UAAU;QACR,OAAO;QACP,YAAY;QACZ,SAAS;QACT,WAAW;IACb;IACA,MAAM;QACJ,OAAO;QACP,YAAY;QACZ,SAAS;QACT,WAAW;IACb;AACF;AAEO,SAAS,UAAU,EAAE,IAAI,EAAE,YAAY,KAAK,EAAE,SAAS,EAAkB;IAC9E,MAAM,SAAS,UAAU,CAAC,KAAK;IAE/B,qBACE,kQAAC;QACC,WAAW,IAAA,6IAAE,EACX,sFACA,OAAO,OAAO,EACd,OAAO,UAAU,EACjB,SAAS,UAAU,OAAO,SAAS,EACnC;;0BAGF,kQAAC,8NAAI;gBAAC,WAAU;;;;;;YACf,2BAAa,kQAAC;0BAAM,OAAO,KAAK;;;;;;;;;;;;AAGvC;AAEO,SAAS,SAAS,EAAE,IAAI,EAAE,SAAS,EAA6C;IACrF,MAAM,SAAS,UAAU,CAAC,KAAK;IAE/B,qBACE,kQAAC,8NAAI;QAAC,WAAW,IAAA,6IAAE,EAAC,wBAAwB,OAAO,UAAU,EAAE;;;;;;AAEnE","debugId":null}},
    {"offset": {"line": 4998, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/ListingCompactCard.tsx"],"sourcesContent":["'use client';\n\nimport { useRouter } from 'next/navigation';\nimport { Listing, ListingPublic, ListingTier } from \"@/types/database\";\nimport { FavouriteButton } from \"@/components/FavouriteButton\";\nimport { TierStar } from \"@/components/TierBadge\";\nimport { cn } from \"@/lib/utils\";\nimport { trackListingView } from \"@/hooks/useAnalytics\";\n\ninterface ListingCompactCardProps {\n  listing: Listing | ListingPublic;\n  isHighlighted?: boolean;\n  onHover?: () => void;\n  onHoverEnd?: () => void;\n  locationMode?: \"country\" | \"city\";\n  // Referrer context for breadcrumbs\n  categoryName?: string;\n  categorySlug?: string;\n  locationName?: string;\n  referrerPath?: string; // Full path back to the listing page (e.g., /backline-hire/europe/bulgaria/sofia)\n}\n\nexport function ListingCompactCard({\n  listing,\n  isHighlighted,\n  onHover,\n  onHoverEnd,\n  locationMode = \"city\",\n  categoryName,\n  categorySlug,\n  locationName,\n  referrerPath,\n}: ListingCompactCardProps) {\n  const router = useRouter();\n  const tier = (listing.tier || \"free\") as ListingTier;\n  const isPremier = tier === \"premier\";\n  const isEnhanced = tier === \"enhanced\";\n  const isFree = tier === \"free\";\n\n  const location = locationMode === \"country\" ? listing.country : listing.town_city;\n\n  const handleClick = (e: React.MouseEvent) => {\n    // Track view for free listings\n    if (isFree) {\n      trackListingView(listing.id);\n    }\n    // Build URL with referrer context for breadcrumbs\n    const params = new URLSearchParams();\n    if (categoryName) params.set(\"cat\", categoryName);\n    if (categorySlug) params.set(\"catSlug\", categorySlug);\n    if (locationName) params.set(\"loc\", locationName);\n    if (referrerPath) params.set(\"ref\", referrerPath);\n\n    const queryString = params.toString();\n    const url = `/listing/${listing.slug}${queryString ? `?${queryString}` : \"\"}`;\n    router.push(url);\n  };\n\n  return (\n    <div className=\"group block\">\n      <div\n        className={cn(\n          \"px-3 py-2 rounded-lg border transition-all duration-200 relative flex items-center gap-3 cursor-pointer\",\n          // Background tint based on tier\n          isPremier && !isHighlighted && \"bg-primary/[0.03]\",\n          isEnhanced && !isHighlighted && \"bg-accent/[0.03]\",\n          // Highlighted state (from map)\n          isHighlighted && \"bg-primary/10 border-primary shadow-glow-pink\",\n          // Default border\n          !isHighlighted && \"border-border\",\n          // Hover states based on tier\n          !isHighlighted &&\n            isPremier &&\n            \"hover:bg-primary/[0.08] hover:border-primary/50 hover:shadow-[0_0_15px_hsl(330_80%_55%/0.15)]\",\n          !isHighlighted &&\n            isEnhanced &&\n            \"hover:bg-accent/[0.08] hover:border-accent/50 hover:shadow-[0_0_15px_hsl(185_100%_50%/0.15)]\",\n          !isHighlighted && isFree && \"hover:bg-muted/50 hover:border-muted-foreground/30\",\n        )}\n        onMouseEnter={onHover}\n        onMouseLeave={onHoverEnd}\n        onClick={handleClick}\n        data-listing-id={listing.id}\n      >\n        {/* Tier Star */}\n        <TierStar tier={tier} className=\"flex-shrink-0\" />\n\n        {/* Main content */}\n        <div className=\"flex-1 min-w-0\">\n          <span\n            className={cn(\n              \"font-medium text-sm transition-colors line-clamp-1\",\n              isPremier && \"group-hover:text-primary\",\n              isEnhanced && \"group-hover:text-accent\",\n              !isPremier && !isEnhanced && \"group-hover:text-foreground\",\n            )}\n          >\n            {listing.name}\n          </span>\n\n          {location && (\n            <div className=\"flex flex-wrap items-center gap-1.5 mt-0.5\">\n              <span className=\"text-[11px] text-muted-foreground\">{location}</span>\n            </div>\n          )}\n        </div>\n\n        {/* Favourite button - stop propagation to prevent navigation when clicking */}\n        <div onClick={(e) => e.stopPropagation()}>\n          <FavouriteButton listingId={listing.id} size=\"sm\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AACA;AACA;AAPA;;;;;;;AAsBO,SAAS,mBAAmB,EACjC,OAAO,EACP,aAAa,EACb,OAAO,EACP,UAAU,EACV,eAAe,MAAM,EACrB,YAAY,EACZ,YAAY,EACZ,YAAY,EACZ,YAAY,EACY;IACxB,MAAM,SAAS,IAAA,mKAAS;IACxB,MAAM,OAAQ,QAAQ,IAAI,IAAI;IAC9B,MAAM,YAAY,SAAS;IAC3B,MAAM,aAAa,SAAS;IAC5B,MAAM,SAAS,SAAS;IAExB,MAAM,WAAW,iBAAiB,YAAY,QAAQ,OAAO,GAAG,QAAQ,SAAS;IAEjF,MAAM,cAAc,CAAC;QACnB,+BAA+B;QAC/B,IAAI,QAAQ;YACV,IAAA,oKAAgB,EAAC,QAAQ,EAAE;QAC7B;QACA,kDAAkD;QAClD,MAAM,SAAS,IAAI;QACnB,IAAI,cAAc,OAAO,GAAG,CAAC,OAAO;QACpC,IAAI,cAAc,OAAO,GAAG,CAAC,WAAW;QACxC,IAAI,cAAc,OAAO,GAAG,CAAC,OAAO;QACpC,IAAI,cAAc,OAAO,GAAG,CAAC,OAAO;QAEpC,MAAM,cAAc,OAAO,QAAQ;QACnC,MAAM,MAAM,CAAC,SAAS,EAAE,QAAQ,IAAI,GAAG,cAAc,CAAC,CAAC,EAAE,aAAa,GAAG,IAAI;QAC7E,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,kQAAC;QAAI,WAAU;kBACb,cAAA,kQAAC;YACC,WAAW,IAAA,6IAAE,EACX,2GACA,gCAAgC;YAChC,aAAa,CAAC,iBAAiB,qBAC/B,cAAc,CAAC,iBAAiB,oBAChC,+BAA+B;YAC/B,iBAAiB,iDACjB,iBAAiB;YACjB,CAAC,iBAAiB,iBAClB,6BAA6B;YAC7B,CAAC,iBACC,aACA,iGACF,CAAC,iBACC,cACA,gGACF,CAAC,iBAAiB,UAAU;YAE9B,cAAc;YACd,cAAc;YACd,SAAS;YACT,mBAAiB,QAAQ,EAAE;;8BAG3B,kQAAC,+JAAQ;oBAAC,MAAM;oBAAM,WAAU;;;;;;8BAGhC,kQAAC;oBAAI,WAAU;;sCACb,kQAAC;4BACC,WAAW,IAAA,6IAAE,EACX,sDACA,aAAa,4BACb,cAAc,2BACd,CAAC,aAAa,CAAC,cAAc;sCAG9B,QAAQ,IAAI;;;;;;wBAGd,0BACC,kQAAC;4BAAI,WAAU;sCACb,cAAA,kQAAC;gCAAK,WAAU;0CAAqC;;;;;;;;;;;;;;;;;8BAM3D,kQAAC;oBAAI,SAAS,CAAC,IAAM,EAAE,eAAe;8BACpC,cAAA,kQAAC,4KAAe;wBAAC,WAAW,QAAQ,EAAE;wBAAE,MAAK;;;;;;;;;;;;;;;;;;;;;;AAKvD","debugId":null}},
    {"offset": {"line": 5121, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/VirtualListingList.tsx"],"sourcesContent":["'use client';\n\nimport { useRef, useCallback, memo, ReactNode, useEffect } from \"react\";\r\nimport { useVirtualizer } from \"@tanstack/react-virtual\";\r\nimport { Listing, ListingPublic } from \"@/types/database\";\r\nimport { ListingCompactCard } from \"./ListingCompactCard\";\r\n\r\ninterface VirtualListingListProps {\r\n  listings: (Listing | ListingPublic)[];\r\n  highlightedListingId: string | null;\r\n  onHoverListing: (listingId: string | null) => void;\r\n  locationMode?: \"country\" | \"city\";\r\n  className?: string;\r\n  footer?: ReactNode;\r\n  // Referrer context for breadcrumbs\r\n  categoryName?: string;\r\n  categorySlug?: string;\r\n  locationName?: string;\r\n  referrerPath?: string;\r\n  onScroll?: () => void;\r\n  // Scroll position persistence\r\n  initialScrollTop?: number;\r\n  onScrollPositionChange?: (scrollTop: number) => void;\r\n}\r\n\r\n// Memoized listing card to prevent unnecessary re-renders\r\nconst MemoizedListingCard = memo(function MemoizedListingCard({\r\n  listing,\r\n  isHighlighted,\r\n  onHover,\r\n  onHoverEnd,\r\n  locationMode,\r\n  categoryName,\r\n  categorySlug,\r\n  locationName,\r\n  referrerPath,\r\n}: {\r\n  listing: Listing | ListingPublic;\r\n  isHighlighted: boolean;\r\n  onHover: () => void;\r\n  onHoverEnd: () => void;\r\n  locationMode: \"country\" | \"city\";\r\n  categoryName?: string;\r\n  categorySlug?: string;\r\n  locationName?: string;\r\n  referrerPath?: string;\r\n}) {\r\n  return (\r\n    <ListingCompactCard\r\n      listing={listing}\r\n      isHighlighted={isHighlighted}\r\n      onHover={onHover}\r\n      onHoverEnd={onHoverEnd}\r\n      locationMode={locationMode}\r\n      categoryName={categoryName}\r\n      categorySlug={categorySlug}\r\n      locationName={locationName}\r\n      referrerPath={referrerPath}\r\n    />\r\n  );\r\n});\r\n\r\nexport function VirtualListingList({\r\n  listings,\r\n  highlightedListingId,\r\n  onHoverListing,\r\n  locationMode = \"city\",\r\n  className,\r\n  footer,\r\n  categoryName,\r\n  categorySlug,\r\n  locationName,\r\n  referrerPath,\r\n  onScroll,\r\n  initialScrollTop,\r\n  onScrollPositionChange,\r\n}: VirtualListingListProps) {\r\n  const parentRef = useRef<HTMLDivElement>(null);\r\n  const hasRestoredScroll = useRef(false);\r\n\r\n  // Virtual list - only renders visible items\r\n  const virtualizer = useVirtualizer({\r\n    count: listings.length,\r\n    getScrollElement: () => parentRef.current,\r\n    estimateSize: () => 68, // Height estimate - accounts for 2-line cards\r\n    overscan: 5, // Render 5 extra items above/below viewport for smooth scrolling\r\n  });\r\n\r\n  const items = virtualizer.getVirtualItems();\r\n\r\n  // Restore scroll position after initial render\r\n  useEffect(() => {\r\n    if (\r\n      initialScrollTop !== undefined &&\r\n      initialScrollTop > 0 &&\r\n      parentRef.current &&\r\n      !hasRestoredScroll.current &&\r\n      listings.length > 0\r\n    ) {\r\n      // Small delay to ensure virtualizer has rendered\r\n      requestAnimationFrame(() => {\r\n        if (parentRef.current) {\r\n          parentRef.current.scrollTop = initialScrollTop;\r\n          hasRestoredScroll.current = true;\r\n        }\r\n      });\r\n    }\r\n  }, [initialScrollTop, listings.length]);\r\n\r\n  // Debounced hover handlers\r\n  const handleHover = useCallback(\r\n    (listingId: string) => {\r\n      onHoverListing(listingId);\r\n    },\r\n    [onHoverListing],\r\n  );\r\n\r\n  const handleHoverEnd = useCallback(() => {\r\n    onHoverListing(null);\r\n  }, [onHoverListing]);\r\n\r\n  // Combined scroll handler\r\n  const handleScroll = useCallback(() => {\r\n    onScroll?.();\r\n    if (parentRef.current && onScrollPositionChange) {\r\n      onScrollPositionChange(parentRef.current.scrollTop);\r\n    }\r\n  }, [onScroll, onScrollPositionChange]);\r\n\r\n  return (\r\n    <div ref={parentRef} className={className} style={{ overflow: \"auto\", contain: \"strict\" }} onScroll={handleScroll}>\r\n      <div\r\n        style={{\r\n          height: `${virtualizer.getTotalSize()}px`,\r\n          width: \"100%\",\r\n          position: \"relative\",\r\n        }}\r\n      >\r\n        {items.map((virtualItem) => {\r\n          const listing = listings[virtualItem.index];\r\n          return (\r\n            <div\r\n              key={listing.id}\r\n              data-listing-id={listing.id}\r\n              style={{\r\n                position: \"absolute\",\r\n                top: 0,\r\n                left: 0,\r\n                width: \"100%\",\r\n                height: `${virtualItem.size}px`,\r\n                transform: `translateY(${virtualItem.start}px)`,\r\n                padding: \"3px 0\",\r\n              }}\r\n            >\r\n              <MemoizedListingCard\r\n                listing={listing}\r\n                isHighlighted={highlightedListingId === listing.id}\r\n                onHover={() => handleHover(listing.id)}\r\n                onHoverEnd={handleHoverEnd}\r\n                locationMode={locationMode}\r\n                categoryName={categoryName}\r\n                categorySlug={categorySlug}\r\n                locationName={locationName}\r\n                referrerPath={referrerPath}\r\n              />\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      {/* Footer section - rendered after virtual list, in DOM for SEO */}\r\n      {footer && <div className=\"mt-4\">{footer}</div>}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAyBA,0DAA0D;AAC1D,MAAM,oCAAsB,IAAA,iOAAI,EAAC,SAAS,oBAAoB,EAC5D,OAAO,EACP,aAAa,EACb,OAAO,EACP,UAAU,EACV,YAAY,EACZ,YAAY,EACZ,YAAY,EACZ,YAAY,EACZ,YAAY,EAWb;IACC,qBACE,kQAAC,kLAAkB;QACjB,SAAS;QACT,eAAe;QACf,SAAS;QACT,YAAY;QACZ,cAAc;QACd,cAAc;QACd,cAAc;QACd,cAAc;QACd,cAAc;;;;;;AAGpB;AAEO,SAAS,mBAAmB,EACjC,QAAQ,EACR,oBAAoB,EACpB,cAAc,EACd,eAAe,MAAM,EACrB,SAAS,EACT,MAAM,EACN,YAAY,EACZ,YAAY,EACZ,YAAY,EACZ,YAAY,EACZ,QAAQ,EACR,gBAAgB,EAChB,sBAAsB,EACE;IACxB,MAAM,YAAY,IAAA,mOAAM,EAAiB;IACzC,MAAM,oBAAoB,IAAA,mOAAM,EAAC;IAEjC,4CAA4C;IAC5C,MAAM,cAAc,IAAA,4NAAc,EAAC;QACjC,OAAO,SAAS,MAAM;QACtB,kBAAkB,IAAM,UAAU,OAAO;QACzC,cAAc,IAAM;QACpB,UAAU;IACZ;IAEA,MAAM,QAAQ,YAAY,eAAe;IAEzC,+CAA+C;IAC/C,IAAA,sOAAS,EAAC;QACR,IACE,qBAAqB,aACrB,mBAAmB,KACnB,UAAU,OAAO,IACjB,CAAC,kBAAkB,OAAO,IAC1B,SAAS,MAAM,GAAG,GAClB;YACA,iDAAiD;YACjD,sBAAsB;gBACpB,IAAI,UAAU,OAAO,EAAE;oBACrB,UAAU,OAAO,CAAC,SAAS,GAAG;oBAC9B,kBAAkB,OAAO,GAAG;gBAC9B;YACF;QACF;IACF,GAAG;QAAC;QAAkB,SAAS,MAAM;KAAC;IAEtC,2BAA2B;IAC3B,MAAM,cAAc,IAAA,wOAAW,EAC7B,CAAC;QACC,eAAe;IACjB,GACA;QAAC;KAAe;IAGlB,MAAM,iBAAiB,IAAA,wOAAW,EAAC;QACjC,eAAe;IACjB,GAAG;QAAC;KAAe;IAEnB,0BAA0B;IAC1B,MAAM,eAAe,IAAA,wOAAW,EAAC;QAC/B;QACA,IAAI,UAAU,OAAO,IAAI,wBAAwB;YAC/C,uBAAuB,UAAU,OAAO,CAAC,SAAS;QACpD;IACF,GAAG;QAAC;QAAU;KAAuB;IAErC,qBACE,kQAAC;QAAI,KAAK;QAAW,WAAW;QAAW,OAAO;YAAE,UAAU;YAAQ,SAAS;QAAS;QAAG,UAAU;;0BACnG,kQAAC;gBACC,OAAO;oBACL,QAAQ,GAAG,YAAY,YAAY,GAAG,EAAE,CAAC;oBACzC,OAAO;oBACP,UAAU;gBACZ;0BAEC,MAAM,GAAG,CAAC,CAAC;oBACV,MAAM,UAAU,QAAQ,CAAC,YAAY,KAAK,CAAC;oBAC3C,qBACE,kQAAC;wBAEC,mBAAiB,QAAQ,EAAE;wBAC3B,OAAO;4BACL,UAAU;4BACV,KAAK;4BACL,MAAM;4BACN,OAAO;4BACP,QAAQ,GAAG,YAAY,IAAI,CAAC,EAAE,CAAC;4BAC/B,WAAW,CAAC,WAAW,EAAE,YAAY,KAAK,CAAC,GAAG,CAAC;4BAC/C,SAAS;wBACX;kCAEA,cAAA,kQAAC;4BACC,SAAS;4BACT,eAAe,yBAAyB,QAAQ,EAAE;4BAClD,SAAS,IAAM,YAAY,QAAQ,EAAE;4BACrC,YAAY;4BACZ,cAAc;4BACd,cAAc;4BACd,cAAc;4BACd,cAAc;4BACd,cAAc;;;;;;uBArBX,QAAQ,EAAE;;;;;gBAyBrB;;;;;;YAGD,wBAAU,kQAAC;gBAAI,WAAU;0BAAQ;;;;;;;;;;;;AAGxC","debugId":null}},
    {"offset": {"line": 5272, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/SubcategorySidebar.tsx"],"sourcesContent":["import Link from 'next/link';\nimport { Category } from \"@/types/database\";\nimport { ChevronRight } from \"lucide-react\";\n\ninterface SubcategorySidebarProps {\n  subcategories: Category[];\n  parentSlug: string;\n}\n\nexport function SubcategorySidebar({ subcategories, parentSlug }: SubcategorySidebarProps) {\n  return (\n    <aside className=\"bg-card border rounded-lg overflow-hidden\">\n      <div className=\"px-4 py-3 border-b bg-muted/30\">\n        <h3 className=\"font-semibold text-sm uppercase tracking-wide text-muted-foreground\">\n          Subcategories\n        </h3>\n      </div>\n      <nav className=\"divide-y divide-border\">\n        {subcategories.map((sub) => (\n          <Link\n            key={sub.id}\n            href={`/${sub.url_slug || sub.slug}`}\n            className=\"flex items-center justify-between px-4 py-3 hover:bg-muted/50 transition-colors group\"\n          >\n            <span className=\"text-sm font-medium group-hover:text-primary transition-colors\">\n              {sub.name}\n            </span>\n            <ChevronRight className=\"h-4 w-4 text-muted-foreground group-hover:text-primary transition-colors\" />\n          </Link>\n        ))}\n      </nav>\n    </aside>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAOO,SAAS,mBAAmB,EAAE,aAAa,EAAE,UAAU,EAA2B;IACvF,qBACE,kQAAC;QAAM,WAAU;;0BACf,kQAAC;gBAAI,WAAU;0BACb,cAAA,kQAAC;oBAAG,WAAU;8BAAsE;;;;;;;;;;;0BAItF,kQAAC;gBAAI,WAAU;0BACZ,cAAc,GAAG,CAAC,CAAC,oBAClB,kQAAC,2LAAI;wBAEH,MAAM,CAAC,CAAC,EAAE,IAAI,QAAQ,IAAI,IAAI,IAAI,EAAE;wBACpC,WAAU;;0CAEV,kQAAC;gCAAK,WAAU;0CACb,IAAI,IAAI;;;;;;0CAEX,kQAAC,0PAAY;gCAAC,WAAU;;;;;;;uBAPnB,IAAI,EAAE;;;;;;;;;;;;;;;;AAavB","debugId":null}},
    {"offset": {"line": 5344, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-border bg-secondary px-3 py-2 text-base text-foreground ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:border-primary disabled:cursor-not-allowed disabled:opacity-50 md:text-sm transition-colors duration-200\",\n          className,\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  },\n);\nInput.displayName = \"Input\";\n\nexport { Input };"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,uOAAgB,CAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,kQAAC;QACC,MAAM;QACN,WAAW,IAAA,6IAAE,EACX,idACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 5372, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/hooks/useSearchAutocomplete.ts"],"sourcesContent":["'use client';\n\nimport { useQuery } from \"@tanstack/react-query\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport { Category } from \"@/types/database\";\nimport { stripLocationFromQuery, isOnlyLocation } from \"@/lib/searchUtils\";\n\n// =============================================================================\n// SECURITY NOTE: Uses listings_public view (no contact data)\n// =============================================================================\n\n// Extended listing type with venue fields for URL building\nexport interface SearchListing {\n  id: string;\n  name: string;\n  slug: string;\n  country: string | null;\n  town_city: string | null;\n  venue_type: string | null;\n  region_slug: string | null;\n}\n\ninterface SearchAutocompleteResult {\n  categories: Category[];\n  listings: SearchListing[];\n}\n\nexport function useSearchAutocomplete(query: string) {\n  return useQuery({\n    queryKey: [\"search-autocomplete\", query],\n    queryFn: async (): Promise<SearchAutocompleteResult> => {\n      if (!query || query.length < 2) {\n        return { categories: [], listings: [] };\n      }\n\n      // Strip location terms from the query for better matching\n      const strippedQuery = stripLocationFromQuery(query);\n\n      // If query is only a location with no search term, use empty results\n      if (!strippedQuery || isOnlyLocation(query)) {\n        return { categories: [], listings: [] };\n      }\n\n      const searchTerm = strippedQuery.toLowerCase();\n\n      // Search categories by name AND search_terms - fetch all and filter in JS\n      const { data: allCategories, error: catError } = await supabase\n        .from(\"categories\")\n        .select(\"*\");\n\n      if (catError) throw catError;\n\n      // Filter categories that match name OR any search_term contains the search term\n      // Only include child categories (those with a parent_id)\n      // Exception: Include \"Venues\" parent category if search_terms match (for arena, concert hall, etc.)\n      const categories = (allCategories || [])\n        .filter((cat) => {\n          const nameMatch = cat.name.toLowerCase().includes(searchTerm);\n          \n          // Parse search_terms if it's a string\n          let searchTermsArray: string[] = [];\n          if (typeof cat.search_terms === 'string') {\n            try {\n              searchTermsArray = JSON.parse(cat.search_terms);\n            } catch {\n              searchTermsArray = [];\n            }\n          } else if (Array.isArray(cat.search_terms)) {\n            searchTermsArray = cat.search_terms;\n          }\n          \n          const searchTermsMatch = searchTermsArray.some((term: string) => {\n            const lowerTerm = term.toLowerCase().trim();\n            return lowerTerm.includes(searchTerm) || searchTerm.includes(lowerTerm);\n          });\n\n          // For parent categories, only include Venues and only if search_terms match\n          if (!cat.parent_id) {\n            const isVenues = cat.slug === \"venues\" || cat.url_slug === \"venues\";\n            return isVenues && searchTermsMatch;\n          }\n\n          // For child categories, include if name OR search_terms match\n          return nameMatch || searchTermsMatch;\n        })\n        // Sort by relevance: name matches first, then alphabetically\n        .sort((a, b) => {\n          const aNameMatch = a.name.toLowerCase().includes(searchTerm);\n          const bNameMatch = b.name.toLowerCase().includes(searchTerm);\n\n          // Name matches come first\n          if (aNameMatch && !bNameMatch) return -1;\n          if (!aNameMatch && bNameMatch) return 1;\n\n          // Within same match type, sort alphabetically\n          return a.name.localeCompare(b.name);\n        });\n\n      // Search listings using listings_public view\n      const { data: listings, error: listError } = await supabase\n        .from(\"listings_public\")\n        .select(\n          `\n          id,\n          name,\n          slug,\n          country,\n          town_city,\n          venue_type,\n          region_id\n        `,\n        )\n        .ilike(\"name\", `%${searchTerm}%`);\n\n      if (listError) throw listError;\n\n      // Get region slugs for listings that have region_id\n      const regionIds = [...new Set((listings || []).filter((l) => l.region_id).map((l) => l.region_id))] as number[];\n      let regionMap: Record<number, string> = {};\n\n      if (regionIds.length > 0) {\n        const { data: regions } = await supabase.from(\"regions\").select(\"id, region_slug\").in(\"id\", regionIds);\n\n        if (regions) {\n          regionMap = Object.fromEntries(regions.map((r) => [r.id, r.region_slug]));\n        }\n      }\n\n      // Add region_slug to listings\n      const flattenedListings = (listings || []).map((l) => ({\n        id: l.id,\n        name: l.name,\n        slug: l.slug,\n        country: l.country,\n        town_city: l.town_city,\n        venue_type: l.venue_type,\n        region_slug: l.region_id ? regionMap[l.region_id] || null : null,\n      })) as SearchListing[];\n\n      return {\n        categories: categories as Category[],\n        listings: flattenedListings,\n      };\n    },\n    enabled: query.length >= 2,\n    staleTime: 1000 * 60, // 1 minute\n  });\n}"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;AA2BO,SAAS,sBAAsB,KAAa;IACjD,OAAO,IAAA,2MAAQ,EAAC;QACd,UAAU;YAAC;YAAuB;SAAM;QACxC,SAAS;YACP,IAAI,CAAC,SAAS,MAAM,MAAM,GAAG,GAAG;gBAC9B,OAAO;oBAAE,YAAY,EAAE;oBAAE,UAAU,EAAE;gBAAC;YACxC;YAEA,0DAA0D;YAC1D,MAAM,gBAAgB,IAAA,uKAAsB,EAAC;YAE7C,qEAAqE;YACrE,IAAI,CAAC,iBAAiB,IAAA,+JAAc,EAAC,QAAQ;gBAC3C,OAAO;oBAAE,YAAY,EAAE;oBAAE,UAAU,EAAE;gBAAC;YACxC;YAEA,MAAM,aAAa,cAAc,WAAW;YAE5C,0EAA0E;YAC1E,MAAM,EAAE,MAAM,aAAa,EAAE,OAAO,QAAQ,EAAE,GAAG,MAAM,yKAAQ,CAC5D,IAAI,CAAC,cACL,MAAM,CAAC;YAEV,IAAI,UAAU,MAAM;YAEpB,gFAAgF;YAChF,yDAAyD;YACzD,oGAAoG;YACpG,MAAM,aAAa,CAAC,iBAAiB,EAAE,EACpC,MAAM,CAAC,CAAC;gBACP,MAAM,YAAY,IAAI,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;gBAElD,sCAAsC;gBACtC,IAAI,mBAA6B,EAAE;gBACnC,IAAI,OAAO,IAAI,YAAY,KAAK,UAAU;oBACxC,IAAI;wBACF,mBAAmB,KAAK,KAAK,CAAC,IAAI,YAAY;oBAChD,EAAE,OAAM;wBACN,mBAAmB,EAAE;oBACvB;gBACF,OAAO,IAAI,MAAM,OAAO,CAAC,IAAI,YAAY,GAAG;oBAC1C,mBAAmB,IAAI,YAAY;gBACrC;gBAEA,MAAM,mBAAmB,iBAAiB,IAAI,CAAC,CAAC;oBAC9C,MAAM,YAAY,KAAK,WAAW,GAAG,IAAI;oBACzC,OAAO,UAAU,QAAQ,CAAC,eAAe,WAAW,QAAQ,CAAC;gBAC/D;gBAEA,4EAA4E;gBAC5E,IAAI,CAAC,IAAI,SAAS,EAAE;oBAClB,MAAM,WAAW,IAAI,IAAI,KAAK,YAAY,IAAI,QAAQ,KAAK;oBAC3D,OAAO,YAAY;gBACrB;gBAEA,8DAA8D;gBAC9D,OAAO,aAAa;YACtB,EACA,6DAA6D;aAC5D,IAAI,CAAC,CAAC,GAAG;gBACR,MAAM,aAAa,EAAE,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;gBACjD,MAAM,aAAa,EAAE,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;gBAEjD,0BAA0B;gBAC1B,IAAI,cAAc,CAAC,YAAY,OAAO,CAAC;gBACvC,IAAI,CAAC,cAAc,YAAY,OAAO;gBAEtC,8CAA8C;gBAC9C,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,EAAE,IAAI;YACpC;YAEF,6CAA6C;YAC7C,MAAM,EAAE,MAAM,QAAQ,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,yKAAQ,CACxD,IAAI,CAAC,mBACL,MAAM,CACL,CAAC;;;;;;;;QAQH,CAAC,EAEA,KAAK,CAAC,QAAQ,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC;YAElC,IAAI,WAAW,MAAM;YAErB,oDAAoD;YACpD,MAAM,YAAY;mBAAI,IAAI,IAAI,CAAC,YAAY,EAAE,EAAE,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,EAAE,GAAG,CAAC,CAAC,IAAM,EAAE,SAAS;aAAG;YACnG,IAAI,YAAoC,CAAC;YAEzC,IAAI,UAAU,MAAM,GAAG,GAAG;gBACxB,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,yKAAQ,CAAC,IAAI,CAAC,WAAW,MAAM,CAAC,mBAAmB,EAAE,CAAC,MAAM;gBAE5F,IAAI,SAAS;oBACX,YAAY,OAAO,WAAW,CAAC,QAAQ,GAAG,CAAC,CAAC,IAAM;4BAAC,EAAE,EAAE;4BAAE,EAAE,WAAW;yBAAC;gBACzE;YACF;YAEA,8BAA8B;YAC9B,MAAM,oBAAoB,CAAC,YAAY,EAAE,EAAE,GAAG,CAAC,CAAC,IAAM,CAAC;oBACrD,IAAI,EAAE,EAAE;oBACR,MAAM,EAAE,IAAI;oBACZ,MAAM,EAAE,IAAI;oBACZ,SAAS,EAAE,OAAO;oBAClB,WAAW,EAAE,SAAS;oBACtB,YAAY,EAAE,UAAU;oBACxB,aAAa,EAAE,SAAS,GAAG,SAAS,CAAC,EAAE,SAAS,CAAC,IAAI,OAAO;gBAC9D,CAAC;YAED,OAAO;gBACL,YAAY;gBACZ,UAAU;YACZ;QACF;QACA,SAAS,MAAM,MAAM,IAAI;QACzB,WAAW,OAAO;IACpB;AACF","debugId":null}},
    {"offset": {"line": 5494, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/hooks/useDebounce.ts"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from \"react\";\r\n\r\nexport function useDebounce<T>(value: T, delay: number): T {\r\n  const [debouncedValue, setDebouncedValue] = useState<T>(value);\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setDebouncedValue(value);\r\n    }, delay);\r\n\r\n    return () => {\r\n      clearTimeout(timer);\r\n    };\r\n  }, [value, delay]);\r\n\r\n  return debouncedValue;\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAFA;;AAIO,SAAS,YAAe,KAAQ,EAAE,KAAa;IACpD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,qOAAQ,EAAI;IAExD,IAAA,sOAAS,EAAC;QACR,MAAM,QAAQ,WAAW;YACvB,kBAAkB;QACpB,GAAG;QAEH,OAAO;YACL,aAAa;QACf;IACF,GAAG;QAAC;QAAO;KAAM;IAEjB,OAAO;AACT","debugId":null}},
    {"offset": {"line": 5520, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/lib/countryAliases.ts"],"sourcesContent":["// Canonical slug  display name mapping\nexport const COUNTRY_ALIASES: Record<string, string> = {\n  'uk': 'United Kingdom',\n  'usa': 'United States',\n  'us': 'United States',\n};\n\n// Display name  preferred slug mapping\nexport const COUNTRY_PREFERRED_SLUGS: Record<string, string> = {\n  'United Kingdom': 'uk',\n  'United States': 'usa',\n  'USA': 'usa',\n};\n\n// Convert country name to URL slug (using preferred short form if available)\nexport function countryToSlug(country: string): string {\n  if (COUNTRY_PREFERRED_SLUGS[country]) {\n    return COUNTRY_PREFERRED_SLUGS[country];\n  }\n  return country\n    .toLowerCase()\n    .replace(/[^a-z0-9]+/g, '-')\n    .replace(/^-|-$/g, '');\n}\n\n// Convert URL slug to country name (handling aliases)\nexport function slugToCountry(slug: string, knownCountries: string[]): string | null {\n  // Check aliases first\n  const normalizedSlug = slug.toLowerCase();\n  if (COUNTRY_ALIASES[normalizedSlug]) {\n    return COUNTRY_ALIASES[normalizedSlug];\n  }\n  \n  // Fall back to matching against known countries\n  return knownCountries.find(c => \n    c.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-|-$/g, '') === normalizedSlug\n  ) || null;\n}\n"],"names":[],"mappings":"AAAA,wCAAwC;;;;;;;;;;;AACjC,MAAM,kBAA0C;IACrD,MAAM;IACN,OAAO;IACP,MAAM;AACR;AAGO,MAAM,0BAAkD;IAC7D,kBAAkB;IAClB,iBAAiB;IACjB,OAAO;AACT;AAGO,SAAS,cAAc,OAAe;IAC3C,IAAI,uBAAuB,CAAC,QAAQ,EAAE;QACpC,OAAO,uBAAuB,CAAC,QAAQ;IACzC;IACA,OAAO,QACJ,WAAW,GACX,OAAO,CAAC,eAAe,KACvB,OAAO,CAAC,UAAU;AACvB;AAGO,SAAS,cAAc,IAAY,EAAE,cAAwB;IAClE,sBAAsB;IACtB,MAAM,iBAAiB,KAAK,WAAW;IACvC,IAAI,eAAe,CAAC,eAAe,EAAE;QACnC,OAAO,eAAe,CAAC,eAAe;IACxC;IAEA,gDAAgD;IAChD,OAAO,eAAe,IAAI,CAAC,CAAA,IACzB,EAAE,WAAW,GAAG,OAAO,CAAC,eAAe,KAAK,OAAO,CAAC,UAAU,QAAQ,mBACnE;AACP","debugId":null}},
    {"offset": {"line": 5560, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/lib/venueUrlUtils.ts"],"sourcesContent":["'use client';\n\nimport { CONTINENT_COUNTRIES, getContinentSlug } from './continents';\r\nimport { countryToSlug, slugToCountry } from './countryAliases';\r\nimport { isCityRegion } from './cityRegions';\r\n\r\n// Convert display name to URL slug\r\nexport function toSlug(name: string): string {\r\n  return name\r\n    .toLowerCase()\r\n    .replace(/[^a-z0-9]+/g, '-')\r\n    .replace(/^-|-$/g, '');\r\n}\r\n\r\n// Convert slug back to display name by matching against known values\r\nexport function fromSlug(slug: string, knownValues: string[]): string | null {\r\n  const normalized = slug.toLowerCase();\r\n  return knownValues.find(v => toSlug(v) === normalized) || null;\r\n}\r\n\r\n// Convert country slug back to display name (with alias support)\r\nexport function fromCountrySlug(slug: string, knownCountries: string[]): string | null {\r\n  return slugToCountry(slug, knownCountries);\r\n}\r\n\r\n// Get continent from country\r\nexport function getContinentForCountry(country: string): string | null {\r\n  for (const [continent, countries] of Object.entries(CONTINENT_COUNTRIES)) {\r\n    if (countries.includes(country)) {\r\n      return continent;\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\n// Countries that have regions configured (normalized names)\r\nexport const COUNTRIES_WITH_REGIONS = ['UK', 'United Kingdom', 'USA', 'United States'];\r\n\r\nexport function countryHasRegions(country: string): boolean {\r\n  return COUNTRIES_WITH_REGIONS.some(c => \r\n    c.toLowerCase() === country.toLowerCase()\r\n  );\r\n}\r\n\r\n// Build venue URL from location parameters\r\n// For city-regions (London, New York), the region IS the city - don't add city segment\r\nexport function buildVenueUrl(params: {\r\n  continent?: string | null;\r\n  country?: string | null;\r\n  regionSlug?: string | null;\r\n  city?: string | null;\r\n}): string {\r\n  const parts = ['/venues'];\r\n  \r\n  if (params.continent) {\r\n    parts.push(getContinentSlug(params.continent));\r\n    \r\n    if (params.country) {\r\n      parts.push(countryToSlug(params.country));\r\n      \r\n      if (params.regionSlug) {\r\n        parts.push(params.regionSlug);\r\n        \r\n        // For city-regions, skip the city segment (region IS the city)\r\n        if (!isCityRegion(params.country, params.regionSlug) && params.city) {\r\n          parts.push(toSlug(params.city));\r\n        }\r\n      } else if (params.city) {\r\n        parts.push(toSlug(params.city));\r\n      }\r\n    }\r\n  }\r\n  \r\n  return parts.join('/');\r\n}\r\n\r\n// Re-export for convenience\r\nexport { isCityRegion } from './cityRegions';\r\nexport { countryToSlug } from './countryAliases';\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAJA;;;;AAOO,SAAS,OAAO,IAAY;IACjC,OAAO,KACJ,WAAW,GACX,OAAO,CAAC,eAAe,KACvB,OAAO,CAAC,UAAU;AACvB;AAGO,SAAS,SAAS,IAAY,EAAE,WAAqB;IAC1D,MAAM,aAAa,KAAK,WAAW;IACnC,OAAO,YAAY,IAAI,CAAC,CAAA,IAAK,OAAO,OAAO,eAAe;AAC5D;AAGO,SAAS,gBAAgB,IAAY,EAAE,cAAwB;IACpE,OAAO,IAAA,iKAAa,EAAC,MAAM;AAC7B;AAGO,SAAS,uBAAuB,OAAe;IACpD,KAAK,MAAM,CAAC,WAAW,UAAU,IAAI,OAAO,OAAO,CAAC,mKAAmB,EAAG;QACxE,IAAI,UAAU,QAAQ,CAAC,UAAU;YAC/B,OAAO;QACT;IACF;IACA,OAAO;AACT;AAGO,MAAM,yBAAyB;IAAC;IAAM;IAAkB;IAAO;CAAgB;AAE/E,SAAS,kBAAkB,OAAe;IAC/C,OAAO,uBAAuB,IAAI,CAAC,CAAA,IACjC,EAAE,WAAW,OAAO,QAAQ,WAAW;AAE3C;AAIO,SAAS,cAAc,MAK7B;IACC,MAAM,QAAQ;QAAC;KAAU;IAEzB,IAAI,OAAO,SAAS,EAAE;QACpB,MAAM,IAAI,CAAC,IAAA,gKAAgB,EAAC,OAAO,SAAS;QAE5C,IAAI,OAAO,OAAO,EAAE;YAClB,MAAM,IAAI,CAAC,IAAA,iKAAa,EAAC,OAAO,OAAO;YAEvC,IAAI,OAAO,UAAU,EAAE;gBACrB,MAAM,IAAI,CAAC,OAAO,UAAU;gBAE5B,+DAA+D;gBAC/D,IAAI,CAAC,IAAA,6JAAY,EAAC,OAAO,OAAO,EAAE,OAAO,UAAU,KAAK,OAAO,IAAI,EAAE;oBACnE,MAAM,IAAI,CAAC,OAAO,OAAO,IAAI;gBAC/B;YACF,OAAO,IAAI,OAAO,IAAI,EAAE;gBACtB,MAAM,IAAI,CAAC,OAAO,OAAO,IAAI;YAC/B;QACF;IACF;IAEA,OAAO,MAAM,IAAI,CAAC;AACpB","debugId":null}},
    {"offset": {"line": 5637, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/lib/buildVenueUrl.ts"],"sourcesContent":["'use client';\n\nimport { countryToSlug } from \"./countryAliases\";\r\nimport { getContinentSlug } from \"./continents\";\r\nimport { getContinentForCountry, toSlug } from \"./venueUrlUtils\";\r\nimport { isCityRegion } from \"./cityRegions\";\r\n\r\ninterface VenueUrlParams {\r\n  slug: string;\r\n  country: string | null;\r\n  regionSlug: string | null;\r\n  city: string | null;\r\n}\r\n\r\n/**\r\n * Builds the full SEO-friendly URL path for a venue\r\n * Example output: /venues/europe/uk/south-east/london/o2-arena\r\n *\r\n * For city-regions (London, New York), skip the redundant city segment:\r\n * /venues/europe/uk/london/o2-arena (not /venues/europe/uk/london/london/o2-arena)\r\n */\r\nexport function buildVenueProfileUrl(venue: VenueUrlParams): string {\r\n  const { slug, country, regionSlug, city } = venue;\r\n\r\n  // Fallback to basic listing URL if we don't have location data\r\n  if (!country) {\r\n    return `/listing/${slug}`;\r\n  }\r\n\r\n  let continent = getContinentForCountry(country);\r\n\r\n  // Fallback: If country not in mapping, try to infer continent from country name patterns\r\n  if (!continent) {\r\n    console.warn(`Country \"${country}\" not found in continent mapping, using fallback`);\r\n\r\n    // Try to infer from common patterns or default to listing URL\r\n    const countryLower = country.toLowerCase();\r\n    if (countryLower.includes(\"island\") || countryLower.includes(\"pacific\")) {\r\n      continent = \"Oceania\";\r\n    } else if (\r\n      countryLower.includes(\"africa\") ||\r\n      [\"nigeria\", \"ghana\", \"kenya\", \"egypt\"].some((c) => countryLower.includes(c))\r\n    ) {\r\n      continent = \"Africa\";\r\n    } else if (\r\n      [\"arab\", \"dubai\", \"saudi\", \"qatar\", \"israel\", \"jordan\", \"lebanon\"].some((c) => countryLower.includes(c))\r\n    ) {\r\n      continent = \"Asia\";\r\n    } else {\r\n      // If we really can't determine, fall back to listing URL\r\n      return `/listing/${slug}`;\r\n    }\r\n  }\r\n\r\n  const parts = [\"/venues\", getContinentSlug(continent), countryToSlug(country)];\r\n\r\n  // Add region if present\r\n  if (regionSlug) {\r\n    parts.push(regionSlug);\r\n\r\n    // For city-regions (London, New York), the region IS the city - don't add city segment\r\n    // This prevents URLs like /uk/london/london/venue-name\r\n    if (!isCityRegion(country, regionSlug)) {\r\n      // Only add city if it's not a city-region\r\n      if (city) {\r\n        parts.push(toSlug(city));\r\n      }\r\n    }\r\n  } else if (city) {\r\n    // No region, just add city\r\n    parts.push(toSlug(city));\r\n  }\r\n\r\n  // Add venue slug\r\n  parts.push(slug);\r\n\r\n  return parts.join(\"/\");\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AALA;;;;;AAqBO,SAAS,qBAAqB,KAAqB;IACxD,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,UAAU,EAAE,IAAI,EAAE,GAAG;IAE5C,+DAA+D;IAC/D,IAAI,CAAC,SAAS;QACZ,OAAO,CAAC,SAAS,EAAE,MAAM;IAC3B;IAEA,IAAI,YAAY,IAAA,yLAAsB,EAAC;IAEvC,yFAAyF;IACzF,IAAI,CAAC,WAAW;QACd,QAAQ,IAAI,CAAC,CAAC,SAAS,EAAE,QAAQ,gDAAgD,CAAC;QAElF,8DAA8D;QAC9D,MAAM,eAAe,QAAQ,WAAW;QACxC,IAAI,aAAa,QAAQ,CAAC,aAAa,aAAa,QAAQ,CAAC,YAAY;YACvE,YAAY;QACd,OAAO,IACL,aAAa,QAAQ,CAAC,aACtB;YAAC;YAAW;YAAS;YAAS;SAAQ,CAAC,IAAI,CAAC,CAAC,IAAM,aAAa,QAAQ,CAAC,KACzE;YACA,YAAY;QACd,OAAO,IACL;YAAC;YAAQ;YAAS;YAAS;YAAS;YAAU;YAAU;SAAU,CAAC,IAAI,CAAC,CAAC,IAAM,aAAa,QAAQ,CAAC,KACrG;YACA,YAAY;QACd,OAAO;YACL,yDAAyD;YACzD,OAAO,CAAC,SAAS,EAAE,MAAM;QAC3B;IACF;IAEA,MAAM,QAAQ;QAAC;QAAW,IAAA,gKAAgB,EAAC;QAAY,IAAA,iKAAa,EAAC;KAAS;IAE9E,wBAAwB;IACxB,IAAI,YAAY;QACd,MAAM,IAAI,CAAC;QAEX,uFAAuF;QACvF,uDAAuD;QACvD,IAAI,CAAC,IAAA,6JAAY,EAAC,SAAS,aAAa;YACtC,0CAA0C;YAC1C,IAAI,MAAM;gBACR,MAAM,IAAI,CAAC,IAAA,yKAAM,EAAC;YACpB;QACF;IACF,OAAO,IAAI,MAAM;QACf,2BAA2B;QAC3B,MAAM,IAAI,CAAC,IAAA,yKAAM,EAAC;IACpB;IAEA,iBAAiB;IACjB,MAAM,IAAI,CAAC;IAEX,OAAO,MAAM,IAAI,CAAC;AACpB","debugId":null}},
    {"offset": {"line": 5714, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/SearchAutocomplete.tsx"],"sourcesContent":["'use client';\n\nimport { useRouter } from 'next/navigation';\nimport { useState, useRef, useEffect } from \"react\";\nimport { Search, Building2, FolderOpen, Loader2 } from \"lucide-react\";\nimport { Input } from \"@/components/ui/input\";\nimport { useSearchAutocomplete } from \"@/hooks/useSearchAutocomplete\";\nimport { useDebounce } from \"@/hooks/useDebounce\";\nimport { cn } from \"@/lib/utils\";\nimport { buildVenueProfileUrl } from \"@/lib/buildVenueUrl\";\n\ninterface SearchAutocompleteProps {\n  placeholder?: string;\n}\n\nexport function SearchAutocomplete({ placeholder = \"Search...\" }: SearchAutocompleteProps) {\n  const [query, setQuery] = useState(\"\");\n  const [isOpen, setIsOpen] = useState(false);\n  const [selectedIndex, setSelectedIndex] = useState(-1);\n  const debouncedQuery = useDebounce(query, 300);\n  const { data, isLoading } = useSearchAutocomplete(debouncedQuery);\n  const router = useRouter();\n  const inputRef = useRef<HTMLInputElement>(null);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n\n  const categories = data?.categories || [];\n  const listings = data?.listings || [];\n  const hasResults = categories.length > 0 || listings.length > 0;\n  const totalItems = categories.length + listings.length;\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      if (\n        dropdownRef.current &&\n        !dropdownRef.current.contains(e.target as Node) &&\n        inputRef.current &&\n        !inputRef.current.contains(e.target as Node)\n      ) {\n        setIsOpen(false);\n      }\n    };\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\n  }, []);\n\n  // Reset selection when results change\n  useEffect(() => {\n    setSelectedIndex(-1);\n  }, [debouncedQuery]);\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (!isOpen || !hasResults) {\n      if (e.key === \"Enter\" && query.trim()) {\n        if (isLoading) {\n          return;\n        }\n        // Single result = go directly to it\n        if (categories.length === 1 && listings.length === 0) {\n          // Single category, no listings\n          router.push(`/${categories[0].url_slug || categories[0].slug}`);\n        } else if (listings.length === 1 && categories.length === 0) {\n          // Single listing, no categories\n          router.push(getListingUrl(listings[0]));\n        } else {\n          // Multiple results or no results = go to search results page\n          router.push(`/search?q=${encodeURIComponent(query.trim())}`);\n        }\n        setIsOpen(false);\n        setQuery(\"\");\n      }\n      return;\n    }\n\n    switch (e.key) {\n      case \"ArrowDown\":\n        e.preventDefault();\n        setSelectedIndex((prev) => (prev < totalItems - 1 ? prev + 1 : 0));\n        break;\n      case \"ArrowUp\":\n        e.preventDefault();\n        setSelectedIndex((prev) => (prev > 0 ? prev - 1 : totalItems - 1));\n        break;\n      case \"Enter\":\n        e.preventDefault();\n        if (selectedIndex >= 0) {\n          handleSelect(selectedIndex);\n        } else if (query.trim()) {\n          if (isLoading) {\n            return;\n          }\n          // Single result = go directly to it\n          if (categories.length === 1 && listings.length === 0) {\n            // Single category, no listings\n            router.push(`/${categories[0].url_slug || categories[0].slug}`);\n          } else if (listings.length === 1 && categories.length === 0) {\n            // Single listing, no categories\n            router.push(getListingUrl(listings[0]));\n          } else {\n            // Multiple results or no results = go to search results page\n            router.push(`/search?q=${encodeURIComponent(query.trim())}`);\n          }\n          setIsOpen(false);\n          setQuery(\"\");\n        }\n        break;\n      case \"Escape\":\n        setIsOpen(false);\n        break;\n    }\n  };\n\n  // Build URL for a listing - use venue URL for venues, /listing/ for others\n  const getListingUrl = (listing: (typeof listings)[0]): string => {\n    if (listing.venue_type) {\n      // It's a venue - use SEO-friendly venue URL\n      return buildVenueProfileUrl({\n        slug: listing.slug,\n        country: listing.country,\n        regionSlug: listing.region_slug,\n        city: listing.town_city,\n      });\n    }\n    // Regular listing\n    return `/listing/${listing.slug}`;\n  };\n\n  const handleSelect = (index: number) => {\n    if (index < categories.length) {\n      // Category selected\n      const category = categories[index];\n      router.push(`/${category.url_slug || category.slug}`);\n    } else {\n      // Listing selected\n      const listing = listings[index - categories.length];\n      router.push(getListingUrl(listing));\n    }\n    setIsOpen(false);\n    setQuery(\"\");\n  };\n\n  const highlightMatch = (text: string) => {\n    if (!query) return text;\n    const regex = new RegExp(`(${query})`, \"gi\");\n    const parts = text.split(regex);\n    return parts.map((part, i) =>\n      part.toLowerCase() === query.toLowerCase() ? (\n        <span key={i} className=\"text-primary font-semibold\">\n          {part}\n        </span>\n      ) : (\n        part\n      ),\n    );\n  };\n\n  return (\n    <div className=\"relative w-full\">\n      <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-primary\" />\n      <Input\n        ref={inputRef}\n        type=\"search\"\n        placeholder={placeholder}\n        className=\"w-full pl-9 pr-9 bg-secondary/50 border-border focus-visible:border-primary focus-visible:ring-primary\"\n        value={query}\n        onChange={(e) => {\n          setQuery(e.target.value);\n          setIsOpen(true);\n        }}\n        onFocus={() => setIsOpen(true)}\n        onKeyDown={handleKeyDown}\n      />\n      {isLoading && <Loader2 className=\"absolute right-3 top-1/2 h-4 w-4 -translate-y-1/2 animate-spin text-primary\" />}\n      {/* Dropdown */}\n      {isOpen && query.length >= 2 && (\n        <div\n          ref={dropdownRef}\n          className=\"absolute top-full left-0 right-0 mt-1 bg-card border border-border rounded-md shadow-lg z-50 max-h-[400px] overflow-y-auto\"\n          onMouseLeave={() => setSelectedIndex(-1)}\n        >\n          {!hasResults && !isLoading && (\n            <div className=\"p-4 text-sm text-muted-foreground text-center\">No results found for \"{query}\"</div>\n          )}\n\n          {categories.length > 0 && (\n            <div>\n              <div className=\"px-3 py-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider bg-secondary/50\">\n                Categories\n              </div>\n              {categories.map((category, index) => (\n                <button\n                  key={category.id}\n                  className={cn(\n                    \"w-full flex items-center gap-3 px-3 py-2 text-left text-foreground hover:bg-primary/10 hover:text-primary transition-colors\",\n                    selectedIndex === index && \"bg-primary/10 text-primary\",\n                  )}\n                  onClick={() => handleSelect(index)}\n                  onMouseEnter={() => setSelectedIndex(index)}\n                >\n                  <FolderOpen className=\"h-4 w-4 text-primary shrink-0\" />\n                  <span className=\"truncate\">{highlightMatch(category.name)}</span>\n                </button>\n              ))}\n            </div>\n          )}\n\n          {listings.length > 0 && (\n            <div>\n              <div className=\"px-3 py-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider bg-secondary/50\">\n                Companies\n              </div>\n              {listings.map((listing, index) => {\n                const itemIndex = categories.length + index;\n                return (\n                  <button\n                    key={listing.id}\n                    className={cn(\n                      \"w-full flex items-center gap-3 px-3 py-2 text-left text-foreground hover:bg-primary/10 hover:text-primary transition-colors\",\n                      selectedIndex === itemIndex && \"bg-primary/10 text-primary\",\n                    )}\n                    onClick={() => handleSelect(itemIndex)}\n                    onMouseEnter={() => setSelectedIndex(itemIndex)}\n                  >\n                    <Building2 className=\"h-4 w-4 text-muted-foreground shrink-0\" />\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"truncate\">{highlightMatch(listing.name)}</div>\n                      {listing.town_city && (\n                        <div className=\"text-xs text-muted-foreground truncate\">\n                          {listing.town_city}\n                          {listing.country && `, ${listing.country}`}\n                        </div>\n                      )}\n                    </div>\n                  </button>\n                );\n              })}\n            </div>\n          )}\n\n          {hasResults && (\n            <button\n              className=\"w-full px-3 py-2 text-sm text-primary hover:bg-primary/10 transition-colors border-t border-border flex items-center justify-center gap-2\"\n              onClick={() => {\n                if (categories.length === 1 && listings.length === 0) {\n                  router.push(`/${categories[0].url_slug || categories[0].slug}`);\n                } else {\n                  router.push(`/search?q=${encodeURIComponent(query.trim())}`);\n                }\n                setIsOpen(false);\n              }}\n            >\n              <Search className=\"h-4 w-4\" />\n              {categories.length === 1 && listings.length === 0\n                ? `Go to ${categories[0].name}`\n                : `View all results for \"${query}\"`}\n            </button>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6068, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/ui/checkbox.tsx"],"sourcesContent":["import * as React from \"react\";\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\";\nimport { Check } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n      className,\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator className={cn(\"flex items-center justify-center text-current\")}>\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n));\nCheckbox.displayName = CheckboxPrimitive.Root.displayName;\n\nexport { Checkbox };\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,yBAAW,uOAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,kQAAC,gMAAsB;QACrB,KAAK;QACL,WAAW,IAAA,6IAAE,EACX,kTACA;QAED,GAAG,KAAK;kBAET,cAAA,kQAAC,qMAA2B;YAAC,WAAW,IAAA,6IAAE,EAAC;sBACzC,cAAA,kQAAC,iOAAK;gBAAC,WAAU;;;;;;;;;;;;;;;;AAIvB,SAAS,WAAW,GAAG,gMAAsB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 6111, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/CategoryCountryFilter.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect } from \"react\";\nimport { ChevronDown, X } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { cn } from \"@/lib/utils\";\n\ninterface CategoryCountryFilterProps {\n  countries: string[];\n  countryCounts?: Record<string, number>;\n  selectedCountries: string[];\n  onChange: (countries: string[]) => void;\n}\n\nexport function CategoryCountryFilter({\n  countries,\n  countryCounts,\n  selectedCountries,\n  onChange,\n}: CategoryCountryFilterProps) {\n  const KEEP_OPEN_KEY = 'country-filter-keep-open';\n  \n  // Check if we should restore open state on mount\n  const shouldStartOpen = () => {\n    if (typeof window === 'undefined') return false;\n    const keepOpen = sessionStorage.getItem(KEEP_OPEN_KEY);\n    if (keepOpen) {\n      sessionStorage.removeItem(KEEP_OPEN_KEY); // Clear immediately\n      return true;\n    }\n    return false;\n  };\n\n  const [open, setOpen] = useState(shouldStartOpen);\n  const ref = useRef<HTMLDivElement>(null);\n\n  // Close on click outside\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (ref.current && !ref.current.contains(event.target as Node)) {\n        setOpen(false);\n      }\n    }\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\n  }, []);\n\n  // Close on scroll outside\n  useEffect(() => {\n    if (!open) return;\n\n    function handleScroll(event: Event) {\n      if (ref.current && ref.current.contains(event.target as Node)) {\n        return;\n      }\n      setOpen(false);\n    }\n\n    document.addEventListener(\"scroll\", handleScroll, true);\n    return () => document.removeEventListener(\"scroll\", handleScroll, true);\n  }, [open]);\n\n  const handleToggle = (country: string) => {\n    // Mark that we want to keep the dropdown open after navigation\n    sessionStorage.setItem(KEEP_OPEN_KEY, 'true');\n\n    // Call onChange (this will trigger navigation)\n    if (selectedCountries.includes(country)) {\n      onChange(selectedCountries.filter((c) => c !== country));\n    } else {\n      onChange([...selectedCountries, country]);\n    }\n  };\n\n  const handleClearAll = () => {\n    // Mark that we want to keep the dropdown open\n    sessionStorage.setItem(KEEP_OPEN_KEY, 'true');\n    onChange([]);\n  };\n\n  const handleClose = () => {\n    // User explicitly closed - clear the keep-open flag\n    sessionStorage.removeItem(KEEP_OPEN_KEY);\n    setOpen(false);\n  };\n\n  const triggerLabel =\n    selectedCountries.length === 0\n      ? \"All Countries\"\n      : selectedCountries.length === 1\n        ? selectedCountries[0]\n        : `${selectedCountries.length} Countries`;\n\n  return (\n    <div ref={ref} className=\"relative\">\n      <Button\n        variant=\"outline\"\n        size=\"sm\"\n        onClick={() => setOpen(!open)}\n        className={cn(\n          \"h-9 w-full gap-1.5 px-3 justify-between text-xs font-normal\",\n          selectedCountries.length > 0\n            ? \"border-primary bg-primary/10 text-primary hover:bg-primary/20\"\n            : \"border-input bg-background text-foreground hover:bg-muted hover:border-input\",\n        )}\n      >\n        <span className=\"truncate\">{triggerLabel}</span>\n        <ChevronDown className={cn(\"h-4 w-4 shrink-0 opacity-50 transition-transform\", open && \"rotate-180\")} />\n      </Button>\n\n      {open && (\n        <div\n          className=\"absolute top-full left-0 mt-1 z-50 w-64 rounded-md border bg-popover p-1 shadow-lg\"\n          onMouseDown={(e) => e.stopPropagation()}\n          onClick={(e) => e.stopPropagation()}\n        >\n          <div className=\"flex items-center justify-between mb-1\">\n            {selectedCountries.length > 0 ? (\n              <button\n                type=\"button\"\n                onClick={handleClearAll}\n                className=\"flex items-center gap-1 px-2 py-1.5 rounded-sm hover:bg-muted text-sm text-muted-foreground\"\n              >\n                <X className=\"h-3 w-3\" />\n                <span className=\"md:hidden\">Clear</span>\n                <span className=\"hidden md:inline\">Clear selection</span>\n              </button>\n            ) : (\n              <span />\n            )}\n            <button\n              type=\"button\"\n              onClick={handleClose}\n              className=\"flex items-center gap-1 px-2 py-1.5 rounded-sm hover:bg-muted text-sm text-muted-foreground\"\n            >\n              <X className=\"h-3 w-3\" />\n              Close\n            </button>\n          </div>\n          <div className=\"max-h-64 overflow-y-auto overscroll-contain\">\n            {countries.map((country) => (\n              <label\n                key={country}\n                className=\"flex items-center gap-2 px-2 py-1.5 rounded-sm hover:bg-muted cursor-pointer text-sm\"\n              >\n                <Checkbox \n                  checked={selectedCountries.includes(country)} \n                  onCheckedChange={() => handleToggle(country)}\n                />\n                <span className=\"flex-1\">{country}</span>\n                {countryCounts?.[country] && (\n                  <span className=\"text-muted-foreground text-xs\">({countryCounts[country]})</span>\n                )}\n              </label>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6351, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/hooks/useCategoryLocationSeo.ts"],"sourcesContent":["'use client';\n\nimport { useQuery } from \"@tanstack/react-query\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport { fetchAllRows } from \"@/lib/supabasePagination\";\n\nexport interface CategoryLocationSeo {\n  id: string;\n  category_id: string;\n  country: string | null;\n  region: string | null;\n  city: string | null;\n  meta_description: string | null;\n  meta_keywords: string | null;\n  intro_text: string | null;\n  seo_title: string | null;\n  h1_override: string | null;\n  h2_override: string | null;\n  about_heading: string | null;\n  about_content: string | null;\n  created_at: string;\n  updated_at: string;\n}\n\nexport const useCategoryLocationSeo = (\n  categoryId: string | undefined,\n  country: string | null,\n  region: string | null,\n  city: string | null\n) => {\n  return useQuery({\n    queryKey: [\"category-location-seo\", categoryId, country, region, city],\n    queryFn: async () => {\n      if (!categoryId) return null;\n\n      // Priority 1: Exact match (category + country + region + city)\n      if (country && region && city) {\n        const { data: exactMatch } = await supabase\n          .from(\"category_location_seo\")\n          .select(\"*\")\n          .eq(\"category_id\", categoryId)\n          .eq(\"country\", country)\n          .eq(\"region\", region)\n          .eq(\"city\", city)\n          .limit(1);\n\n        if (exactMatch && exactMatch.length > 0) return exactMatch[0] as CategoryLocationSeo;\n      }\n\n      // Priority 2: Region-level match (category + country + region, city = null)\n      if (country && region) {\n        const { data: regionMatch } = await supabase\n          .from(\"category_location_seo\")\n          .select(\"*\")\n          .eq(\"category_id\", categoryId)\n          .eq(\"country\", country)\n          .eq(\"region\", region)\n          .is(\"city\", null)\n          .limit(1);\n\n        if (regionMatch && regionMatch.length > 0) return regionMatch[0] as CategoryLocationSeo;\n      }\n\n      // Priority 3: City-level match for countries without regions (category + country + city, region = null)\n      if (country && city && !region) {\n        const { data: cityMatch } = await supabase\n          .from(\"category_location_seo\")\n          .select(\"*\")\n          .eq(\"category_id\", categoryId)\n          .eq(\"country\", country)\n          .is(\"region\", null)\n          .eq(\"city\", city)\n          .limit(1);\n\n        if (cityMatch && cityMatch.length > 0) return cityMatch[0] as CategoryLocationSeo;\n      }\n\n      // Priority 4: Country-level match (category + country, region = null, city = null)\n      if (country) {\n        const { data: countryMatch } = await supabase\n          .from(\"category_location_seo\")\n          .select(\"*\")\n          .eq(\"category_id\", categoryId)\n          .eq(\"country\", country)\n          .is(\"region\", null)\n          .is(\"city\", null)\n          .limit(1);\n\n        if (countryMatch && countryMatch.length > 0) return countryMatch[0] as CategoryLocationSeo;\n      }\n\n      // Priority 5: Category-level match (category only, no location)\n      const { data: categoryMatch } = await supabase\n        .from(\"category_location_seo\")\n        .select(\"*\")\n        .eq(\"category_id\", categoryId)\n        .is(\"country\", null)\n        .is(\"region\", null)\n        .is(\"city\", null)\n        .limit(1);\n\n      if (categoryMatch && categoryMatch.length > 0) return categoryMatch[0] as CategoryLocationSeo;\n\n      // No custom content found\n      return null;\n    },\n    enabled: !!categoryId,\n  });\n};\n\n// Hook to fetch all location SEO records (for admin)\nexport const useAllCategoryLocationSeo = () => {\n  return useQuery({\n    queryKey: [\"category-location-seo-all\"],\n    queryFn: async () => {\n      // First, fetch all SEO records\n      const seoData = await fetchAllRows(() =>\n        supabase\n          .from(\"category_location_seo\")\n          .select(\"*\")\n          .order(\"created_at\", { ascending: false })\n      );\n\n      // Then fetch all categories separately\n      const { data: categories } = await supabase\n        .from(\"categories\")\n        .select(\"id, name, slug, url_slug\");\n\n      // Manually join them\n      const joined = seoData.map((seo: any) => ({\n        ...seo,\n        categories: categories?.find((c) => c.id === seo.category_id) || null,\n      }));\n\n      return joined;\n    },\n  });\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6429, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/lib/slugify.ts"],"sourcesContent":["import { COUNTRY_ALIASES, COUNTRY_PREFERRED_SLUGS, countryToSlug } from './countryAliases';\n\n/**\n * Converts a string to a URL-friendly slug\n * e.g., \"United Kingdom\" -> \"united-kingdom\"\n */\nexport function slugify(text: string): string {\n  return text\n    .toLowerCase()\n    .trim()\n    .replace(/[^\\w\\s-]/g, '') // Remove special characters\n    .replace(/\\s+/g, '-') // Replace spaces with hyphens\n    .replace(/-+/g, '-'); // Remove consecutive hyphens\n}\n\n/**\n * Converts a country name to a URL-friendly slug\n * Uses short aliases for UK/USA\n * e.g., \"United Kingdom\" -> \"uk\"\n */\nexport function slugifyCountry(country: string): string {\n  return countryToSlug(country);\n}\n\n/**\n * Finds the original name from a list that matches the given slug\n * e.g., \"united-kingdom\" -> \"United Kingdom\" (if found in list)\n */\nexport function deslugify(slug: string, options: string[]): string | null {\n  const normalizedSlug = slug.toLowerCase();\n  \n  // Check country aliases first\n  if (COUNTRY_ALIASES[normalizedSlug]) {\n    const aliasedCountry = COUNTRY_ALIASES[normalizedSlug];\n    // Return it only if it's in the options list\n    if (options.includes(aliasedCountry)) {\n      return aliasedCountry;\n    }\n  }\n  \n  // Fall back to standard slug matching\n  return options.find(option => slugify(option) === normalizedSlug) || null;\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAMO,SAAS,QAAQ,IAAY;IAClC,OAAO,KACJ,WAAW,GACX,IAAI,GACJ,OAAO,CAAC,aAAa,IAAI,4BAA4B;KACrD,OAAO,CAAC,QAAQ,KAAK,8BAA8B;KACnD,OAAO,CAAC,OAAO,MAAM,6BAA6B;AACvD;AAOO,SAAS,eAAe,OAAe;IAC5C,OAAO,IAAA,iKAAa,EAAC;AACvB;AAMO,SAAS,UAAU,IAAY,EAAE,OAAiB;IACvD,MAAM,iBAAiB,KAAK,WAAW;IAEvC,8BAA8B;IAC9B,IAAI,mKAAe,CAAC,eAAe,EAAE;QACnC,MAAM,iBAAiB,mKAAe,CAAC,eAAe;QACtD,6CAA6C;QAC7C,IAAI,QAAQ,QAAQ,CAAC,iBAAiB;YACpC,OAAO;QACT;IACF;IAEA,sCAAsC;IACtC,OAAO,QAAQ,IAAI,CAAC,CAAA,SAAU,QAAQ,YAAY,mBAAmB;AACvE","debugId":null}},
    {"offset": {"line": 6464, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/ui/select.tsx"],"sourcesContent":["import * as React from \"react\";\nimport * as SelectPrimitive from \"@radix-ui/react-select\";\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Select = SelectPrimitive.Root;\n\nconst SelectGroup = SelectPrimitive.Group;\n\nconst SelectValue = SelectPrimitive.Value;\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className,\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n));\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName;\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\"flex cursor-default items-center justify-center py-1\", className)}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n));\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName;\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\"flex cursor-default items-center justify-center py-1\", className)}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n));\nSelectScrollDownButton.displayName = SelectPrimitive.ScrollDownButton.displayName;\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className,\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\",\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n));\nSelectContent.displayName = SelectPrimitive.Content.displayName;\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label ref={ref} className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)} {...props} />\n));\nSelectLabel.displayName = SelectPrimitive.Label.displayName;\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground\",\n      className,\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n));\nSelectItem.displayName = SelectPrimitive.Item.displayName;\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator ref={ref} className={cn(\"-mx-1 my-1 h-px bg-muted\", className)} {...props} />\n));\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName;\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAAA;AAAA;AAEA;;;;;;AAEA,MAAM,SAAS,8LAAoB;AAEnC,MAAM,cAAc,+LAAqB;AAEzC,MAAM,cAAc,+LAAqB;AAEzC,MAAM,8BAAgB,uOAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,kQAAC,iMAAuB;QACtB,KAAK;QACL,WAAW,IAAA,6IAAE,EACX,mTACA;QAED,GAAG,KAAK;;YAER;0BACD,kQAAC,8LAAoB;gBAAC,OAAO;0BAC3B,cAAA,kQAAC,uPAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI7B,cAAc,WAAW,GAAG,iMAAuB,CAAC,WAAW;AAE/D,MAAM,qCAAuB,uOAAgB,CAG3C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,kQAAC,wMAA8B;QAC7B,KAAK;QACL,WAAW,IAAA,6IAAE,EAAC,wDAAwD;QACrE,GAAG,KAAK;kBAET,cAAA,kQAAC,iPAAS;YAAC,WAAU;;;;;;;;;;;AAGzB,qBAAqB,WAAW,GAAG,wMAA8B,CAAC,WAAW;AAE7E,MAAM,uCAAyB,uOAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,kQAAC,0MAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,6IAAE,EAAC,wDAAwD;QACrE,GAAG,KAAK;kBAET,cAAA,kQAAC,uPAAW;YAAC,WAAU;;;;;;;;;;;AAG3B,uBAAuB,WAAW,GAAG,0MAAgC,CAAC,WAAW;AAEjF,MAAM,8BAAgB,uOAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACzD,kQAAC,gMAAsB;kBACrB,cAAA,kQAAC,iMAAuB;YACtB,KAAK;YACL,WAAW,IAAA,6IAAE,EACX,ucACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,kQAAC;;;;;8BACD,kQAAC,kMAAwB;oBACvB,WAAW,IAAA,6IAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,kQAAC;;;;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG,iMAAuB,CAAC,WAAW;AAE/D,MAAM,4BAAc,uOAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,kQAAC,+LAAqB;QAAC,KAAK;QAAK,WAAW,IAAA,6IAAE,EAAC,0CAA0C;QAAa,GAAG,KAAK;;;;;;AAEhH,YAAY,WAAW,GAAG,+LAAqB,CAAC,WAAW;AAE3D,MAAM,2BAAa,uOAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,kQAAC,8LAAoB;QACnB,KAAK;QACL,WAAW,IAAA,6IAAE,EACX,6NACA;QAED,GAAG,KAAK;;0BAET,kQAAC;gBAAK,WAAU;0BACd,cAAA,kQAAC,uMAA6B;8BAC5B,cAAA,kQAAC,iOAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAIrB,kQAAC,kMAAwB;0BAAE;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,8LAAoB,CAAC,WAAW;AAEzD,MAAM,gCAAkB,uOAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,kQAAC,mMAAyB;QAAC,KAAK;QAAK,WAAW,IAAA,6IAAE,EAAC,4BAA4B;QAAa,GAAG,KAAK;;;;;;AAEtG,gBAAgB,WAAW,GAAG,mMAAyB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 6663, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/ui/collapsible.tsx"],"sourcesContent":["import * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\";\n\nconst Collapsible = CollapsiblePrimitive.Root;\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger;\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent;\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent };\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEA,MAAM,cAAc,mMAAyB;AAE7C,MAAM,qBAAqB,iNAAuC;AAElE,MAAM,qBAAqB,iNAAuC","debugId":null}},
    {"offset": {"line": 6681, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default: \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive: \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n);\n\nexport interface BadgeProps extends React.HTMLAttributes<HTMLSpanElement>, VariantProps<typeof badgeVariants> {}\n\nconst Badge = React.forwardRef<HTMLSpanElement, BadgeProps>(\n  ({ className, variant, ...props }, ref) => {\n    return <span ref={ref} className={cn(badgeVariants({ variant }), className)} {...props} />;\n  }\n);\nBadge.displayName = \"Badge\";\n\nexport { Badge, badgeVariants };\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,2LAAG,EACvB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,WAAW;YACX,aAAa;YACb,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAKF,MAAM,sBAAQ,uOAAgB,CAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE;IACjC,qBAAO,kQAAC;QAAK,KAAK;QAAK,WAAW,IAAA,6IAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AACxF;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 6727, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/james/showcase-redo/showcase-next/src/components/CategoryPage.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport { useParams, useRouter, useSearchParams, usePathname } from 'next/navigation';\nimport { useState, useMemo, useEffect, useRef, lazy, Suspense, useCallback } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport DOMPurify from \"isomorphic-dompurify\";\nimport NotFound from \"./NotFound\";\nimport ResourceArticle from \"./ResourceArticle\";\nimport { Layout, BreadcrumbItem } from \"@/components/Layout\";\nimport { VirtualListingList } from \"@/components/VirtualListingList\";\nimport { SubcategorySidebar } from \"@/components/SubcategorySidebar\";\nimport { SearchAutocomplete } from \"@/components/SearchAutocomplete\";\nimport { CategoryCountryFilter } from \"@/components/CategoryCountryFilter\";\nimport { useCategoryBySlug, useSubcategories } from \"@/hooks/useCategories\";\nimport {\n  useListings,\n  useListingLocations,\n  useCitiesByCountry,\n  useRegionsByCountry,\n  useCitiesByRegion,\n  useCategoryCountryCounts,\n  useCategoryRegionCounts,\n} from \"@/hooks/useListings\";\nimport { useCategoryLocationSeo } from \"@/hooks/useCategoryLocationSeo\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport { deslugify, slugifyCountry, slugify } from \"@/lib/slugify\";\nimport { isCityRegion } from \"@/lib/cityRegions\";\nimport {\n  CONTINENT_ORDER,\n  CONTINENT_COUNTRIES,\n  CONTINENT_COLORS,\n  getContinentFromSlug,\n  getContinentSlug,\n  getContinent,\n} from \"@/lib/continents\";\nimport { ChevronRight, ChevronDown, MapPin, X, List, Map, Globe, RotateCcw } from \"lucide-react\";\nimport { Listing } from \"@/types/database\";\nimport { trackCategoryPageView } from \"@/hooks/useAnalytics\";\nimport { Button } from \"@/components/ui/button\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from \"@/components/ui/collapsible\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { cn } from \"@/lib/utils\";\nimport { MapBounds } from \"@/components/ListingsMap\";\n\nconst ListingsMap = lazy(() => import(\"@/components/ListingsMap\").then((m) => ({ default: m.ListingsMap })));\n\nconst MapLoadingFallback = () => (\n  <div className=\"flex items-center justify-center h-full bg-card border rounded-lg\">\n    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\" />\n  </div>\n);\n\nconst COUNTRIES_WITH_REGIONS = [\"United Kingdom\", \"UK\", \"United States\", \"USA\"];\n\nfunction countryHasRegions(country: string): boolean {\n  return COUNTRIES_WITH_REGIONS.some((c) => c.toLowerCase() === country.toLowerCase());\n}\n\nexport default function CategoryPage({\n  initialCategory,\n  initialSubcategories\n}: {\n  initialCategory?: any;\n  initialSubcategories?: any[];\n} = {}) {\n  const {\n    slug,\n    continent: continentSlug,\n    country: countrySlug,\n    regionOrCity: regionOrCitySlug,\n    region: regionSlug,\n    city: citySlug,\n  } = useParams();\n  const searchParams = useSearchParams();\n  const router = useRouter();\n  const pathname = usePathname();\n  const currentSlug = slug || \"\";\n\n  const [locationFilterOpen, setLocationFilterOpen] = useState(false);\n  const [viewMode, setViewMode] = useState<\"list\" | \"map\">(\"list\");\n  const [highlightedListingId, setHighlightedListingId] = useState<string | null>(null);\n  const [selectedMapListing, setSelectedMapListing] = useState<Listing | null>(null);\n  const [mapBounds, setMapBounds] = useState<MapBounds | null>(null);\n  const [mapZoom, setMapZoom] = useState<number>(2);\n  const [selectedCountries, setSelectedCountries] = useState<string[]>([]);\n  const [initialScrollTop, setInitialScrollTop] = useState<number | undefined>(undefined);\n\n  const mapStateKey = `map-state-${currentSlug}`;\n  const countriesStorageKey = `category-countries-${currentSlug}`;\n\n  // Resolve continent from URL slug\n  const selectedContinent = useMemo(() => {\n    if (!continentSlug) return null;\n    return getContinentFromSlug(continentSlug) || null;\n  }, [continentSlug]);\n\n  const [initialMapState, setInitialMapState] = useState<{ bounds: MapBounds; zoom: number } | null>(null);\n  const [mapResetTrigger, setMapResetTrigger] = useState(0);\n\n  // Check if this is a fresh navigation (from breadcrumb) - should not restore map state\n  const isFreshNavigation = searchParams?.get(\"nav\") === \"1\";\n\n  // Check if this is a browser back/forward navigation\n  const isBackForwardNav = useRef(false);\n  \n  useEffect(() => {\n    // Detect back/forward navigation using Navigation API or performance API\n    const checkNavType = () => {\n      if (typeof window !== 'undefined') {\n        // Check if this is a back/forward navigation\n        const perfEntries = performance.getEntriesByType('navigation') as PerformanceNavigationTiming[];\n        if (perfEntries.length > 0) {\n          isBackForwardNav.current = perfEntries[0].type === 'back_forward';\n        }\n      }\n    };\n    checkNavType();\n  }, [pathname]);\n\n  // Restore map state and scroll position from sessionStorage on mount - only if URL matches and not fresh nav\n  useEffect(() => {\n    // Skip restoration if this is a fresh navigation from breadcrumb\n    if (isFreshNavigation) {\n      sessionStorage.removeItem(mapStateKey);\n      return;\n    }\n\n    try {\n      const saved = sessionStorage.getItem(mapStateKey);\n      if (saved) {\n        const parsed = JSON.parse(saved);\n        // Only restore if the saved URL matches current URL AND it's a back/forward navigation\n        if (parsed.url === pathname + searchParams.toString() && isBackForwardNav.current) {\n          setInitialMapState({ bounds: parsed.bounds, zoom: parsed.zoom });\n          // Restore viewMode if it was saved (e.g., user was on map view)\n          if (parsed.viewMode) {\n            setViewMode(parsed.viewMode);\n          }\n          // Restore scroll position if it was saved\n          if (parsed.scrollTop !== undefined) {\n            setInitialScrollTop(parsed.scrollTop);\n          }\n        }\n        // Always clear after checking\n        sessionStorage.removeItem(mapStateKey);\n      }\n    } catch {\n      sessionStorage.removeItem(mapStateKey);\n    }\n\n    // Cleanup: Clear map state when navigating away\n    return () => {\n      sessionStorage.removeItem(mapStateKey);\n    };\n  }, [mapStateKey, pathname, searchParams.toString(), isFreshNavigation]);\n\n  const { data: category, isLoading: categoryLoading } = useCategoryBySlug(currentSlug, initialCategory);\n  const { data: subcategories } = useSubcategories(category?.id || null, initialSubcategories);\n  const { data: locations } = useListingLocations(category?.id);\n  const { data: countryCounts } = useCategoryCountryCounts(category?.id);\n\n  const hasSubcategories = subcategories && subcategories.length > 0;\n\n  // Resolve country from URL slug\n  const countryFromUrl = useMemo(() => {\n    if (!countrySlug || !locations?.countries) return null;\n    return deslugify(countrySlug, locations.countries);\n  }, [countrySlug, locations?.countries]);\n\n  // Sync selectedCountries from URL/sessionStorage on mount\n  useEffect(() => {\n    if (countryFromUrl) {\n      // Single country from URL path\n      setSelectedCountries([countryFromUrl]);\n    } else {\n      // Check for multi-country in query params\n      const countriesParam = searchParams.get(\"countries\");\n      if (countriesParam) {\n        const countryList = countriesParam.split(\",\").map((c) => decodeURIComponent(c.trim()));\n        setSelectedCountries(countryList);\n      } else {\n        // Check sessionStorage for persisted multi-country selection\n        try {\n          const saved = sessionStorage.getItem(countriesStorageKey);\n          if (saved) {\n            const parsed = JSON.parse(saved);\n            if (Array.isArray(parsed) && parsed.length > 1) {\n              setSelectedCountries(parsed);\n              // Restore query params\n              const params = new URLSearchParams(searchParams);\n              params.set(\"countries\", parsed.join(\",\"));\n              router.replace(`?${params.toString()}`);\n            }\n            sessionStorage.removeItem(countriesStorageKey);\n          } else {\n            setSelectedCountries([]);\n          }\n        } catch {\n          setSelectedCountries([]);\n        }\n      }\n    }\n  }, [countryFromUrl, searchParams, countriesStorageKey]);\n\n  // Save multi-country selection to sessionStorage\n  useEffect(() => {\n    if (selectedCountries.length > 1) {\n      sessionStorage.setItem(countriesStorageKey, JSON.stringify(selectedCountries));\n    } else {\n      sessionStorage.removeItem(countriesStorageKey);\n    }\n  }, [selectedCountries, countriesStorageKey]);\n\n  // Save viewMode to sessionStorage whenever it changes (for restoration after navigation)\n  useEffect(() => {\n    try {\n      const saved = sessionStorage.getItem(mapStateKey);\n      if (saved) {\n        const parsed = JSON.parse(saved);\n        parsed.viewMode = viewMode;\n        sessionStorage.setItem(mapStateKey, JSON.stringify(parsed));\n      } else if (mapBounds) {\n        // If no saved state but we have bounds, create initial state\n        sessionStorage.setItem(\n          mapStateKey,\n          JSON.stringify({\n            bounds: mapBounds,\n            zoom: mapZoom,\n            viewMode,\n            url: pathname + searchParams.toString(),\n          }),\n        );\n      }\n    } catch {}\n  }, [viewMode, mapStateKey, mapBounds, mapZoom, pathname, searchParams.toString()]);\n\n  // For backwards compatibility - single country for region/city logic\n  const selectedCountry = selectedCountries.length === 1 ? selectedCountries[0] : null;\n\n  const { data: regionsForCountry } = useRegionsByCountry(selectedCountry || undefined, category?.id);\n  const { data: regionCounts } = useCategoryRegionCounts(selectedCountry || undefined, category?.id);\n\n  const { resolvedRegionId, resolvedCity, resolvedCityFromFourSegment } = useMemo(() => {\n    if (regionSlug && citySlug && regionsForCountry) {\n      const region = regionsForCountry.find((r) => r.region_slug === regionSlug);\n      return { resolvedRegionId: region?.id || null, resolvedCity: null, resolvedCityFromFourSegment: citySlug };\n    }\n    if (regionOrCitySlug && selectedCountry) {\n      if (countryHasRegions(selectedCountry) && regionsForCountry) {\n        const region = regionsForCountry.find((r) => r.region_slug === regionOrCitySlug);\n        if (region) return { resolvedRegionId: region.id, resolvedCity: null, resolvedCityFromFourSegment: null };\n      }\n      return { resolvedRegionId: null, resolvedCity: regionOrCitySlug, resolvedCityFromFourSegment: null };\n    }\n    return { resolvedRegionId: null, resolvedCity: null, resolvedCityFromFourSegment: null };\n  }, [regionOrCitySlug, regionSlug, citySlug, selectedCountry, regionsForCountry]);\n\n  const selectedRegion = resolvedRegionId;\n  const selectedRegionData = regionsForCountry?.find((r) => r.id === selectedRegion);\n  const selectedRegionName = selectedRegionData?.region_name || null;\n\n  const isCurrentCityRegion = useMemo(() => {\n    return selectedRegionData && isCityRegion(selectedCountry, selectedRegionData.region_slug);\n  }, [selectedCountry, selectedRegionData]);\n\n  if (regionSlug && citySlug && isCityRegion(selectedCountry, regionSlug)) {\n  if (regionSlug.toLowerCase() === citySlug.toLowerCase()) {\n    const categoryUrlSlug = category?.url_slug || category?.slug || currentSlug;\n    router.replace(`/${categoryUrlSlug}/${continentSlug}/${countrySlug}/${regionSlug}`);\n    return null;\n  }\n}\n\n  const { data: citiesByRegion } = useCitiesByRegion(selectedRegion || undefined, category?.id);\n  const { data: citiesForCountryDirect } = useCitiesByCountry(category?.id, selectedCountry || undefined);\n  const citiesForCountry = selectedRegion ? citiesByRegion : citiesForCountryDirect;\n\n  const selectedCity = useMemo(() => {\n    const citySlugToResolve = resolvedCityFromFourSegment || resolvedCity;\n    if (!citySlugToResolve || !citiesForCountry) return null;\n    return deslugify(citySlugToResolve, citiesForCountry);\n  }, [resolvedCity, resolvedCityFromFourSegment, citiesForCountry]);\n\n  // Fetch listings - pass single country to RPC, multi-country filtered client-side\n  const { data: allListings, isLoading: listingsLoading } = useListings({\n    categoryId: hasSubcategories ? undefined : category?.id,\n    continent: selectedContinent || undefined,\n    country: selectedCountry || undefined,\n    regionId: selectedRegion || undefined,\n    city: selectedCity || undefined,\n  });\n\n  // Filter by multiple countries client-side\n  const listings = useMemo(() => {\n    if (!allListings) return [];\n    if (selectedCountries.length <= 1) return allListings;\n    // Multi-country: filter client-side\n    return allListings.filter((l) => l.country && selectedCountries.includes(l.country));\n  }, [allListings, selectedCountries]);\n\n  const { data: locationSeo } = useCategoryLocationSeo(category?.id, selectedCountry, selectedRegionName, selectedCity);\n\n  const { data: resourceExists, isLoading: resourceLoading } = useQuery({\n    queryKey: [\"resource-exists\", currentSlug],\n    queryFn: async () => {\n      const { data } = await supabase\n        .from(\"resources\")\n        .select(\"id\")\n        .eq(\"slug\", currentSlug)\n        .eq(\"status\", \"published\")\n        .maybeSingle();\n      return !!data;\n    },\n    enabled: !category && !categoryLoading,\n  });\n\n  const locationMode = selectedCountry ? \"city\" : \"country\";\n  const activeLocationFilters =\n    (selectedContinent ? 1 : 0) +\n    (selectedCountries.length > 0 ? 1 : 0) +\n    (selectedRegion ? 1 : 0) +\n    (selectedCity ? 1 : 0);\n\n  const locationSuffix = useMemo(() => {\n    if (selectedCity && selectedRegionName && selectedCountry)\n      return ` in ${selectedCity}, ${selectedRegionName}, ${selectedCountry}`;\n    if (selectedCity && selectedCountry) return ` in ${selectedCity}, ${selectedCountry}`;\n    if (selectedRegionName && selectedCountry) return ` in ${selectedRegionName}, ${selectedCountry}`;\n    if (selectedCountry) return ` in ${selectedCountry}`;\n    if (selectedCountries.length > 1) return ` in ${selectedCountries.length} countries`;\n    return \"\";\n  }, [selectedCity, selectedRegionName, selectedCountry, selectedCountries]);\n\n  const injectLocation = (text: string | null | undefined): string | null => {\n    if (!text) return null;\n    let result = text;\n    let locationString = \"\";\n    if (selectedCity && selectedRegionName && selectedCountry)\n      locationString = `${selectedCity}, ${selectedRegionName}, ${selectedCountry}`;\n    else if (selectedCity && selectedCountry) locationString = `${selectedCity}, ${selectedCountry}`;\n    else if (selectedRegionName && selectedCountry) locationString = `${selectedRegionName}, ${selectedCountry}`;\n    else if (selectedCountry) locationString = selectedCountry;\n\n    if (locationString) {\n      result = result.replace(/\\{in_location\\}/gi, `in ${locationString}`);\n      result = result.replace(/\\{location\\}/gi, locationString);\n    } else {\n      result = result.replace(/\\{in_location\\}/gi, \"\");\n      result = result.replace(/\\{location\\}/gi, \"\");\n    }\n    return result\n      .replace(/\\s{2,}/g, \" \")\n      .replace(/\\s+\\./g, \".\")\n      .replace(/\\s+,/g, \",\")\n      .trim();\n  };\n\n  const trackedRef = useRef<string | null>(null);\n  useEffect(() => {\n    if (category) {\n      const trackingKey = `${category.id}|${countrySlug || \"\"}|${citySlug || \"\"}`;\n      if (trackedRef.current !== trackingKey) {\n        trackedRef.current = trackingKey;\n        trackCategoryPageView(\n          category.id,\n          category.name,\n          countrySlug?.replace(/-/g, \" \") || null,\n          citySlug?.replace(/-/g, \" \") || null,\n        );\n      }\n    }\n  }, [category, countrySlug, citySlug]);\n\n  const visibleListings = useMemo(() => {\n    if (!listings) return [];\n    if (!mapBounds) return listings;\n    return listings.filter(\n      (l) =>\n        l.latitude &&\n        l.longitude &&\n        l.latitude >= mapBounds.south &&\n        l.latitude <= mapBounds.north &&\n        l.longitude >= mapBounds.west &&\n        l.longitude <= mapBounds.east,\n    );\n  }, [listings, mapBounds]);\n\n  // Track current scroll position for saving\n  const scrollTopRef = useRef<number>(0);\n\n  const handleBoundsChange = useCallback(\n    (bounds: MapBounds, zoom: number) => {\n      setMapBounds(bounds);\n      setMapZoom(zoom);\n      try {\n        sessionStorage.setItem(\n          mapStateKey,\n          JSON.stringify({\n            bounds,\n            zoom,\n            viewMode,\n            scrollTop: scrollTopRef.current,\n            url: pathname + searchParams.toString(),\n          }),\n        );\n      } catch {}\n    },\n    [mapStateKey, pathname, searchParams.toString(), viewMode],\n  );\n\n  // Handle scroll position changes - save to ref and sessionStorage\n  const handleScrollPositionChange = useCallback(\n    (scrollTop: number) => {\n      scrollTopRef.current = scrollTop;\n      try {\n        const saved = sessionStorage.getItem(mapStateKey);\n        if (saved) {\n          const parsed = JSON.parse(saved);\n          parsed.scrollTop = scrollTop;\n          sessionStorage.setItem(mapStateKey, JSON.stringify(parsed));\n        } else {\n          // Create state if it doesn't exist\n          sessionStorage.setItem(\n            mapStateKey,\n            JSON.stringify({\n              bounds: mapBounds,\n              zoom: mapZoom,\n              viewMode,\n              scrollTop,\n              url: pathname + searchParams.toString(),\n            }),\n          );\n        }\n      } catch {}\n    },\n    [mapStateKey, mapBounds, mapZoom, viewMode, pathname, searchParams.toString()],\n  );\n\n  const handleHoverListing = useCallback((listingId: string | null) => setHighlightedListingId(listingId), []);\n  const handleMapListingSelect = useCallback((listing: Listing | null) => setSelectedMapListing(listing), []);\n\n  const filteredCountries = useMemo(() => {\n    if (!locations?.countries) return [];\n    if (!selectedContinent) return locations.countries;\n\n    // Filter by checking each country's continent via getContinent()\n    return locations.countries.filter((c) => {\n      const countryContinent = getContinent(c);\n      return countryContinent === selectedContinent;\n    });\n  }, [locations?.countries, selectedContinent]);\n\n  const availableContinents = useMemo(() => {\n    if (!locations?.countries) return [];\n    return CONTINENT_ORDER.filter((continent) =>\n      locations.countries.some((c) => (CONTINENT_COUNTRIES[continent] || []).includes(c)),\n    );\n  }, [locations?.countries]);\n\n  const buildUrl = (params: {\n    continent?: string | null;\n    country?: string | null;\n    region?: typeof selectedRegionData | null;\n    city?: string | null;\n  }) => {\n    const categoryUrlSlug = category?.url_slug || currentSlug;\n    const parts = [`/${categoryUrlSlug}`];\n\n    // Add continent if provided\n    if (params.continent) {\n      parts.push(getContinentSlug(params.continent));\n    }\n\n    if (params.country) {\n      // If we have a country but no explicit continent, derive it\n      if (!params.continent) {\n        const derivedContinent = getContinent(params.country);\n        if (derivedContinent) {\n          parts.push(getContinentSlug(derivedContinent));\n        }\n      }\n      parts.push(slugifyCountry(params.country));\n      if (params.region) {\n        parts.push(params.region.region_slug);\n        if (params.city && !isCityRegion(params.country, params.region.region_slug)) parts.push(slugify(params.city));\n      } else if (params.city) parts.push(slugify(params.city));\n    }\n    return parts.join(\"/\");\n  };\n\n  const handleContinentChange = (continent: string | null) => {\n    // Clear countries when changing continent\n    setSelectedCountries([]);\n    sessionStorage.removeItem(mapStateKey);\n    sessionStorage.removeItem(countriesStorageKey);\n    setInitialMapState(null);\n\n    const categoryUrlSlug = category?.url_slug || currentSlug;\n\n    if (continent) {\n      // Navigate to continent URL\n      router.push(`/${categoryUrlSlug}/${getContinentSlug(continent)}`);\n    } else {\n      // Navigate to base category URL (no continent)\n      router.push(`/${categoryUrlSlug}`);\n    }\n  };\n\n  const handleCountryChange = (newCountries: string[]) => {\n    setSelectedCountries(newCountries);\n    sessionStorage.removeItem(mapStateKey);\n    setInitialMapState(null);\n\n    const categoryUrlSlug = category?.url_slug || currentSlug;\n\n    if (newCountries.length === 1) {\n      // Single country - use SEO URL path with continent\n      router.push(buildUrl({ continent: selectedContinent, country: newCountries[0] }));\n    } else if (newCountries.length === 0) {\n      // Clear country - go back to continent level (or base if no continent)\n      sessionStorage.removeItem(countriesStorageKey);\n      const params = new URLSearchParams(searchParams);\n      params.delete(\"countries\");\n      if (selectedContinent) {\n        router.push(`/${categoryUrlSlug}/${getContinentSlug(selectedContinent)}`);\n      } else {\n        router.push(`/${categoryUrlSlug}`);\n      }\n    } else {\n      // Multiple countries - use query param\n      const params = new URLSearchParams();\n      params.set(\"countries\", newCountries.join(\",\"));\n      if (selectedContinent) {\n        router.push(`/${categoryUrlSlug}/${getContinentSlug(selectedContinent)}?${params.toString()}`);\n      } else {\n        router.push(`/${categoryUrlSlug}?${params.toString()}`);\n      }\n    }\n  };\n\n  const handleRegionChange = (regionSlugVal: string) => {\n    if (regionSlugVal === \"all\") {\n      // Clear map state when deselecting region so map resets to show broader area\n      sessionStorage.removeItem(mapStateKey);\n      setInitialMapState(null);\n      setMapResetTrigger((t) => t + 1); // Force map to re-fit to bounds\n      router.push(buildUrl({ continent: selectedContinent, country: selectedCountry }));\n    } else {\n      const region = regionsForCountry?.find((r) => r.region_slug === regionSlugVal);\n      if (region) router.push(buildUrl({ continent: selectedContinent, country: selectedCountry, region }));\n    }\n  };\n\n  const handleCityChange = (city: string) => {\n    if (city === \"all\") {\n      // Clear map state when deselecting city so map resets to show broader area\n      sessionStorage.removeItem(mapStateKey);\n      setInitialMapState(null);\n      setMapResetTrigger((t) => t + 1); // Force map to re-fit to bounds\n      router.push(buildUrl({ continent: selectedContinent, country: selectedCountry, region: selectedRegionData }));\n    } else {\n      router.push(buildUrl({ continent: selectedContinent, country: selectedCountry, region: selectedRegionData, city }));\n    }\n  };\n\n  if (categoryLoading) {\n    return (\n      <Layout>\n        <div className=\"container py-4 sm:py-8\">\n          <div className=\"h-8 w-48 bg-muted animate-pulse rounded mb-4 sm:mb-8\" />\n          <div className=\"h-64 bg-muted animate-pulse rounded\" />\n        </div>\n      </Layout>\n    );\n  }\n\n  if (!category) {\n    if (resourceLoading)\n      return (\n        <Layout>\n          <div className=\"container py-4 sm:py-8\">\n            <div className=\"h-8 w-48 bg-muted animate-pulse rounded mb-4 sm:mb-8\" />\n            <div className=\"h-64 bg-muted animate-pulse rounded\" />\n          </div>\n        </Layout>\n      );\n    if (resourceExists) return <ResourceArticle slug={currentSlug} />;\n    return <NotFound />;\n  }\n\n  const categoryUrlSlug = category.url_slug || category.slug;\n  const displayLocation =\n    selectedCity ||\n    selectedRegionData?.region_name ||\n    (selectedCountries.length === 1\n      ? selectedCountries[0]\n      : selectedCountries.length > 1\n        ? `${selectedCountries.length} countries`\n        : null) ||\n    selectedContinent;\n\n  // Build breadcrumbs for header (only used when !hasSubcategories)\n  const breadcrumbs: BreadcrumbItem[] = displayLocation\n    ? [\n        { label: \"Home\", to: \"/\" },\n        { label: \"Categories\", to: \"/categories\" },\n        { label: category.name, to: `/${categoryUrlSlug}` },\n        { label: displayLocation },\n      ]\n    : [{ label: \"Home\", to: \"/\" }, { label: \"Categories\", to: \"/categories\" }, { label: category.name }];\n\n  return (\n    <Layout hideFooter={!hasSubcategories} breadcrumbs={breadcrumbs}>\n      {hasSubcategories && (\n        <div className=\"container py-4 sm:py-8\">\n          <div className=\"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4 mb-3 sm:mb-6\">\n            <h1 className=\"text-2xl sm:text-3xl font-bold\">{category.name}</h1>\n            <div className=\"relative flex-1 min-w-0 sm:max-w-xs\">\n              <SearchAutocomplete />\n            </div>\n          </div>\n          <SubcategorySidebar subcategories={subcategories} parentSlug={categoryUrlSlug} />\n        </div>\n      )}\n      {!hasSubcategories && (\n        <div className=\"flex-1 flex flex-col min-h-0 overflow-hidden\">\n          <div className=\"container flex-shrink-0 py-2 border-b border-border bg-background\">\n            {/* H1 Title + Search */}\n            <div className=\"flex items-center justify-between gap-2 mb-2\">\n              <h1 className=\"text-sm sm:text-lg font-semibold truncate\">\n                {(() => {\n                  // Check if locationSeo override matches current specificity\n                  const seoMatchesSpecificity =\n                    locationSeo &&\n                    // SEO has city: we must have city selected\n                    ((locationSeo.city && selectedCity) ||\n                      // SEO has region but no city: we must have region selected\n                      (locationSeo.region && !locationSeo.city && selectedRegionData) ||\n                      // SEO has country only: we must have single country, no region/city\n                      (locationSeo.country &&\n                        !locationSeo.region &&\n                        !locationSeo.city &&\n                        selectedCountries.length === 1 &&\n                        !selectedRegionData &&\n                        !selectedCity) ||\n                      // SEO is category-level (no location): no location filters\n                      (!locationSeo.country && !selectedContinent && selectedCountries.length === 0));\n\n                  // Use override if it matches specificity\n                  if (seoMatchesSpecificity && locationSeo?.h1_override) {\n                    return locationSeo.h1_override;\n                  }\n\n                  // Single location (city, region, or single country)\n                  if (selectedCity) return `${category.name} in ${selectedCity}, ${selectedCountries[0]}`;\n                  if (selectedRegionData)\n                    return `${category.name} in ${selectedRegionData.region_name}, ${selectedCountries[0]}`;\n                  if (selectedCountries.length === 1) return `${category.name} in ${selectedCountries[0]}`;\n\n                  // Continent selected (with or without multiple countries)\n                  if (selectedContinent) return `${category.name} in ${selectedContinent}`;\n\n                  // Multiple countries without continent - just category name\n                  if (selectedCountries.length > 1) return category.name;\n\n                  // Default - just category name\n                  return category.name;\n                })()}\n              </h1>\n              <div className=\"hidden md:block w-48\">\n                <SearchAutocomplete />\n              </div>\n            </div>\n\n            <div className=\"md:hidden mb-2 [&_input]:h-9 [&_input]:text-sm\">\n              <SearchAutocomplete placeholder=\"Search listings...\" />\n            </div>\n\n            {/* Desktop Filters */}\n            <div className=\"hidden md:flex items-center gap-1.5 lg:gap-3 flex-nowrap\">\n              {selectedContinent ? (\n                <button\n                  onClick={() => handleContinentChange(null)}\n                  className=\"inline-flex items-center gap-1.5 px-2.5 py-1.5 rounded-full text-xs font-medium hover:opacity-80\"\n                  style={{\n                    backgroundColor: `${CONTINENT_COLORS[selectedContinent]}20`,\n                    color: CONTINENT_COLORS[selectedContinent],\n                    border: `1px solid ${CONTINENT_COLORS[selectedContinent]}40`,\n                  }}\n                >\n                  <Globe className=\"h-3 w-3\" />\n                  {selectedContinent}\n                  <X className=\"h-3 w-3\" />\n                </button>\n              ) : (\n                <Select value=\"all\" onValueChange={(v) => v !== \"all\" && handleContinentChange(v)}>\n                  <SelectTrigger className=\"w-[130px] h-8 text-xs px-2 hover:bg-muted\">\n                    <SelectValue placeholder=\"All Continents\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Continents</SelectItem>\n                    {availableContinents.map((c) => (\n                      <SelectItem key={c} value={c}>\n                        {c}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              )}\n              <div className=\"h-4 w-px bg-border\" />\n\n              {/* Multi-select Country Filter - hide when drilled down to region or city */}\n              {!selectedRegionData && !selectedCity ? (\n                <CategoryCountryFilter\n                  countries={filteredCountries}\n                  countryCounts={countryCounts}\n                  selectedCountries={selectedCountries}\n                  onChange={handleCountryChange}\n                />\n              ) : selectedCountry ? (\n                <Badge\n                  variant=\"secondary\"\n                  className=\"bg-primary text-primary-foreground hover:bg-primary/90 gap-1 pr-1 h-8 text-xs\"\n                >\n                  {selectedCountry}\n                  <button\n                    onClick={() => {\n                      setSelectedCountries([]);\n                      sessionStorage.removeItem(mapStateKey);\n                      sessionStorage.removeItem(countriesStorageKey);\n                      setInitialMapState(null);\n                      router.push(`/${categoryUrlSlug}`);\n                    }}\n                    className=\"ml-0.5 rounded-full hover:bg-primary-foreground/20 p-0.5\"\n                  >\n                    <X className=\"h-3 w-3\" />\n                  </button>\n                </Badge>\n              ) : null}\n\n              {/* Region filter - only for single country with regions */}\n              {selectedCountry &&\n                regionsForCountry &&\n                regionsForCountry.length > 0 &&\n                (selectedRegionData ? (\n                  <Badge\n                    variant=\"secondary\"\n                    className=\"bg-primary text-primary-foreground hover:bg-primary/90 gap-1 pr-1 h-8 text-xs\"\n                  >\n                    {selectedRegionData.region_name}\n                    <button\n                      onClick={() => handleRegionChange(\"all\")}\n                      className=\"ml-0.5 rounded-full hover:bg-primary-foreground/20 p-0.5\"\n                    >\n                      <X className=\"h-3 w-3\" />\n                    </button>\n                  </Badge>\n                ) : (\n                  <Select value=\"all\" onValueChange={handleRegionChange}>\n                    <SelectTrigger className=\"w-[130px] h-8 text-xs px-2 hover:bg-muted\">\n                      <SelectValue placeholder=\"Select Region\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"all\">Select Region</SelectItem>\n                      {regionsForCountry.map((r) => (\n                        <SelectItem key={r.id} value={r.region_slug}>\n                          {r.region_name}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                ))}\n\n              {/* City filter - only for single country, hide for city-regions */}\n              {selectedCountry &&\n                !isCurrentCityRegion &&\n                citiesForCountry &&\n                citiesForCountry.length > 0 &&\n                (selectedCity ? (\n                  <Badge\n                    variant=\"secondary\"\n                    className=\"bg-primary text-primary-foreground hover:bg-primary/90 gap-1 pr-1 h-8 text-xs\"\n                  >\n                    {selectedCity}\n                    <button\n                      onClick={() => handleCityChange(\"all\")}\n                      className=\"ml-0.5 rounded-full hover:bg-primary-foreground/20 p-0.5\"\n                    >\n                      <X className=\"h-3 w-3\" />\n                    </button>\n                  </Badge>\n                ) : (\n                  <Select value=\"all\" onValueChange={handleCityChange}>\n                    <SelectTrigger className=\"w-[130px] h-8 text-xs px-2 hover:bg-muted\">\n                      <SelectValue placeholder=\"Select City\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"all\">Select City</SelectItem>\n                      {citiesForCountry.map((c) => (\n                        <SelectItem key={c} value={c}>\n                          {c}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                ))}\n\n              {(selectedCountries.length > 0 || selectedRegionData || selectedCity) && (\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"h-8 px-2 text-xs text-muted-foreground hover:text-foreground\"\n                  onClick={() => {\n                    setSelectedCountries([]);\n                    sessionStorage.removeItem(mapStateKey);\n                    sessionStorage.removeItem(countriesStorageKey);\n                    setInitialMapState(null);\n                    const categoryUrlSlug = category?.url_slug || currentSlug;\n                    if (selectedContinent) {\n                      router.push(`/${categoryUrlSlug}/${getContinentSlug(selectedContinent)}`);\n                    } else {\n                      router.push(`/${categoryUrlSlug}`);\n                    }\n                  }}\n                >\n                  <X className=\"h-3 w-3 mr-1\" />\n                  Clear\n                </Button>\n              )}\n            </div>\n\n            {/* Mobile Filters */}\n            <div className=\"md:hidden\">\n              <Collapsible open={locationFilterOpen} onOpenChange={setLocationFilterOpen}>\n                <div className=\"flex items-center gap-2\">\n                  <CollapsibleTrigger className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center justify-between p-2.5 bg-card rounded-lg border\">\n                      <div className=\"flex items-center gap-2\">\n                        <MapPin className=\"h-4 w-4 text-muted-foreground\" />\n                        <span className=\"font-medium text-sm\">Filter Listings</span>\n                        {activeLocationFilters > 0 && (\n                          <Badge variant=\"secondary\" className=\"ml-1 bg-primary text-primary-foreground text-xs\">\n                            {activeLocationFilters}\n                          </Badge>\n                        )}\n                      </div>\n                      <ChevronDown\n                        className={cn(\n                          \"h-4 w-4 text-muted-foreground transition-transform\",\n                          locationFilterOpen && \"rotate-180\",\n                        )}\n                      />\n                    </div>\n                  </CollapsibleTrigger>\n                  <div className=\"flex items-center gap-1 shrink-0\">\n                    <Button\n                      variant={viewMode === \"list\" ? \"default\" : \"outline\"}\n                      size=\"sm\"\n                      className=\"h-9 w-9 p-0\"\n                      onClick={() => setViewMode(\"list\")}\n                    >\n                      <List className=\"h-4 w-4\" />\n                    </Button>\n                    <Button\n                      variant={viewMode === \"map\" ? \"default\" : \"outline\"}\n                      size=\"sm\"\n                      className=\"h-9 w-9 p-0\"\n                      onClick={() => setViewMode(\"map\")}\n                    >\n                      <Map className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n                <CollapsibleContent className=\"mt-2\">\n                  <div className=\"p-3 bg-card border border-border rounded-lg space-y-3\">\n                    {/* Active filter badges - dismissible */}\n                    {(selectedCountries.length > 0 || selectedRegionData || selectedCity || selectedContinent) && (\n                      <div className=\"flex flex-wrap items-center gap-1.5\">\n                        {selectedContinent && (\n                          <Badge variant=\"secondary\" className=\"bg-primary text-primary-foreground gap-1 pr-1 text-xs\">\n                            {selectedContinent}\n                            <button\n                              onClick={() => handleContinentChange(null)}\n                              className=\"ml-0.5 rounded-full hover:bg-primary-foreground/20 p-0.5\"\n                            >\n                              <X className=\"h-3 w-3\" />\n                            </button>\n                          </Badge>\n                        )}\n                        {selectedCountries.map((c) => (\n                          <Badge\n                            key={c}\n                            variant=\"secondary\"\n                            className=\"bg-primary text-primary-foreground gap-1 pr-1 text-xs\"\n                          >\n                            {c}\n                            <button\n                              onClick={() => handleCountryChange(selectedCountries.filter((x) => x !== c))}\n                              className=\"ml-0.5 rounded-full hover:bg-primary-foreground/20 p-0.5\"\n                            >\n                              <X className=\"h-3 w-3\" />\n                            </button>\n                          </Badge>\n                        ))}\n                        {selectedRegionData && (\n                          <Badge variant=\"secondary\" className=\"bg-primary text-primary-foreground gap-1 pr-1 text-xs\">\n                            {selectedRegionData.region_name}\n                            <button\n                              onClick={() => handleRegionChange(\"all\")}\n                              className=\"ml-0.5 rounded-full hover:bg-primary-foreground/20 p-0.5\"\n                            >\n                              <X className=\"h-3 w-3\" />\n                            </button>\n                          </Badge>\n                        )}\n                        {selectedCity && (\n                          <Badge variant=\"secondary\" className=\"bg-primary text-primary-foreground gap-1 pr-1 text-xs\">\n                            {selectedCity}\n                            <button\n                              onClick={() => handleCityChange(\"all\")}\n                              className=\"ml-0.5 rounded-full hover:bg-primary-foreground/20 p-0.5\"\n                            >\n                              <X className=\"h-3 w-3\" />\n                            </button>\n                          </Badge>\n                        )}\n                        {/* Clear All button - only show when countries/regions/cities are selected */}\n                        {(selectedCountries.length > 0 || selectedRegionData || selectedCity) && (\n                          <button\n                            onClick={() => {\n                              setSelectedCountries([]);\n                              sessionStorage.removeItem(mapStateKey);\n                              sessionStorage.removeItem(countriesStorageKey);\n                              setInitialMapState(null);\n                              setLocationFilterOpen(false);\n                              // Navigate to continent level (preserve continent)\n                              const categoryUrlSlug = category?.url_slug || currentSlug;\n                              if (selectedContinent) {\n                                router.push(`/${categoryUrlSlug}/${getContinentSlug(selectedContinent)}`);\n                              } else {\n                                router.push(`/${categoryUrlSlug}`);\n                              }\n                            }}\n                            className=\"text-xs text-muted-foreground hover:text-foreground underline underline-offset-2 ml-1\"\n                          >\n                            Clear\n                          </button>\n                        )}\n                      </div>\n                    )}\n                    {/* Dropdowns - only show for unselected filter levels */}\n                    <div className=\"grid grid-cols-2 gap-2\">\n                      {!selectedContinent && (\n                        <Select value=\"all\" onValueChange={(v) => handleContinentChange(v === \"all\" ? null : v)}>\n                          <SelectTrigger className=\"h-9 text-xs\">\n                            <SelectValue placeholder=\"Continent\" />\n                          </SelectTrigger>\n                          <SelectContent>\n                            <SelectItem value=\"all\">All Continents</SelectItem>\n                            {availableContinents.map((c) => (\n                              <SelectItem key={c} value={c}>\n                                {c}\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                      )}\n                      {selectedContinent && !selectedRegionData && !selectedCity && (\n                        <div className=\"col-span-2\">\n                          <CategoryCountryFilter\n                            countries={filteredCountries}\n                            countryCounts={countryCounts}\n                            selectedCountries={selectedCountries}\n                            onChange={handleCountryChange}\n                          />\n                        </div>\n                      )}\n                      {!selectedContinent && !selectedRegionData && !selectedCity && (\n                        <div className=\"col-span-1\">\n                          <CategoryCountryFilter\n                            countries={filteredCountries}\n                            countryCounts={countryCounts}\n                            selectedCountries={selectedCountries}\n                            onChange={handleCountryChange}\n                          />\n                        </div>\n                      )}\n                      {selectedCountry && !selectedRegionData && regionsForCountry && regionsForCountry.length > 0 && (\n                        <Select value=\"all\" onValueChange={handleRegionChange}>\n                          <SelectTrigger className=\"h-9 text-xs\">\n                            <SelectValue placeholder=\"Region\" />\n                          </SelectTrigger>\n                          <SelectContent>\n                            <SelectItem value=\"all\">All Regions</SelectItem>\n                            {regionsForCountry.map((r) => (\n                              <SelectItem key={r.id} value={r.region_slug}>\n                                {r.region_name}\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                      )}\n                      {selectedCountry &&\n                        !selectedCity &&\n                        !isCurrentCityRegion &&\n                        citiesForCountry &&\n                        citiesForCountry.length > 0 && (\n                          <Select value=\"all\" onValueChange={handleCityChange}>\n                            <SelectTrigger className=\"h-9 text-xs\">\n                              <SelectValue placeholder=\"City\" />\n                            </SelectTrigger>\n                            <SelectContent>\n                              <SelectItem value=\"all\">All Cities</SelectItem>\n                              {citiesForCountry.map((c) => (\n                                <SelectItem key={c} value={c}>\n                                  {c}\n                                </SelectItem>\n                              ))}\n                            </SelectContent>\n                          </Select>\n                        )}\n                    </div>\n                  </div>\n                </CollapsibleContent>\n              </Collapsible>\n            </div>\n          </div>\n\n          {/* Main Content */}\n          <div className=\"container flex-1 flex gap-4 min-h-0 overflow-hidden py-4\">\n            <div className={cn(\"flex-1 flex flex-col min-h-0\", viewMode === \"map\" && \"hidden md:flex\")}>\n              {listingsLoading ? (\n                <div className=\"space-y-1.5 overflow-hidden\">\n                  {[...Array(8)].map((_, i) => (\n                    <div key={i} className=\"h-14 bg-card border rounded-lg animate-pulse\" />\n                  ))}\n                </div>\n              ) : !listings || listings.length === 0 ? (\n                <div className=\"flex flex-col items-center justify-center h-full text-center\">\n                  <MapPin className=\"h-12 w-12 text-muted-foreground mb-4\" />\n                  <p className=\"text-lg font-medium\">No listings found</p>\n                  <p className=\"text-sm text-muted-foreground mt-1\">Try adjusting your filters</p>\n                  {activeLocationFilters > 0 && (\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => {\n                        setSelectedCountries([]);\n                        sessionStorage.removeItem(mapStateKey);\n                        sessionStorage.removeItem(countriesStorageKey);\n                        setInitialMapState(null);\n                        router.push(`/${categoryUrlSlug}`);\n                      }}\n                      className=\"mt-4\"\n                    >\n                      Clear Filters\n                    </Button>\n                  )}\n                </div>\n              ) : (\n                <>\n                  <div className=\"px-3 py-2 bg-card border rounded-lg mb-3 flex-shrink-0\">\n                    <div className=\"flex items-center justify-between gap-2\">\n                      <h2 className=\"text-sm font-medium flex-1 min-w-0\">\n                        <span className=\"text-muted-foreground\">\n                          {visibleListings.length === listings.length\n                            ? `${listings.length} listing${listings.length !== 1 ? \"s\" : \"\"}`\n                            : `${visibleListings.length} of ${listings.length} in view`}\n                        </span>\n                        <span className=\"mx-1.5 text-muted-foreground\"></span>\n                        <span className=\"text-foreground\">\n                          {locationSeo?.h2_override ||\n                            injectLocation(category.seo_h2_override) ||\n                            `${category.name} Companies${locationSuffix}`}\n                        </span>\n                      </h2>\n                      {visibleListings.length < listings.length && (\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => {\n                            setMapBounds(null);\n                            setMapResetTrigger((t) => t + 1);\n                          }}\n                          className=\"h-7 text-xs shrink-0\"\n                        >\n                          <RotateCcw className=\"h-3 w-3 mr-1\" />\n                          Reset View\n                        </Button>\n                      )}\n                    </div>\n                  </div>\n                  <VirtualListingList\n                    listings={visibleListings}\n                    highlightedListingId={highlightedListingId}\n                    onHoverListing={handleHoverListing}\n                    locationMode={locationMode}\n                    className=\"flex-1 min-h-0 pr-2\"\n                    categoryName={category.name}\n                    categorySlug={categoryUrlSlug}\n                    locationName={displayLocation || undefined}\n                    referrerPath={pathname}\n                    onScroll={() => setLocationFilterOpen(false)}\n                    initialScrollTop={initialScrollTop}\n                    onScrollPositionChange={handleScrollPositionChange}\n                    footer={\n                      <section className=\"pt-4 border-t border-border\">\n                        <h3 className=\"text-sm font-medium text-muted-foreground mb-2\">\n                          {locationSeo?.about_heading || `About ${category.name}${locationSuffix}`}\n                        </h3>\n                        {locationSeo?.about_content ? (\n                          <div\n                            className=\"text-xs text-muted-foreground/80 leading-relaxed prose prose-sm max-w-none\"\n                            dangerouslySetInnerHTML={{ __html: DOMPurify.sanitize(locationSeo.about_content) }}\n                          />\n                        ) : (\n                          <p className=\"text-xs text-muted-foreground/80 leading-relaxed\">\n                            {selectedCity\n                              ? `Discover ${category.name.toLowerCase()} companies in ${selectedCity}. Browse our directory to find the best ${category.name.toLowerCase()} services and solutions for your needs.`\n                              : selectedRegionName\n                                ? `Explore ${category.name.toLowerCase()} companies across ${selectedRegionName}. Our directory features leading businesses in the ${category.name.toLowerCase()} sector.`\n                                : selectedCountry\n                                  ? `Find top ${category.name.toLowerCase()} companies in ${selectedCountry}. Browse our comprehensive directory of ${category.name.toLowerCase()} businesses and services.`\n                                  : `Browse our directory of ${category.name.toLowerCase()} companies. Find the best ${category.name.toLowerCase()} services and solutions from industry-leading businesses worldwide.`}\n                          </p>\n                        )}\n                      </section>\n                    }\n                  />\n                </>\n              )}\n            </div>\n            <div\n              className={cn(\n                \"flex-1 rounded-lg overflow-hidden min-h-0 h-full\",\n                viewMode === \"list\" && \"hidden md:block\",\n              )}\n            >\n              <Suspense fallback={<MapLoadingFallback />}>\n                <ListingsMap\n                  listings={listings || []}\n                  selectedListing={selectedMapListing}\n                  onSelectListing={handleMapListingSelect}\n                  highlightedListingId={highlightedListingId}\n                  onBoundsChange={handleBoundsChange}\n                  initialState={initialMapState}\n                  resetTrigger={mapResetTrigger}\n                />\n              </Suspense>\n            </div>\n          </div>\n        </div>\n      )}\n    </Layout>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}